{"ast":null,"code":"\"use strict\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _corejs2BuiltIns = _interopRequireDefault(require(\"@babel/compat-data/corejs2-built-ins\"));\n\nvar _helperCompilationTargets = require(\"@babel/helper-compilation-targets\");\n\nvar _getPlatformSpecificDefault = _interopRequireDefault(require(\"./get-platform-specific-default\"));\n\nvar _builtInDefinitions = require(\"./built-in-definitions\");\n\nvar _utils = require(\"../../utils\");\n\nvar _debug = require(\"../../debug\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar NO_DIRECT_POLYFILL_IMPORT = \"\\n  When setting `useBuiltIns: 'usage'`, polyfills are automatically imported when needed.\\n  Please remove the `import '@babel/polyfill'` call or use `useBuiltIns: 'entry'` instead.\";\n\nfunction _default(_ref, _ref2) {\n  var t = _ref.types;\n  var include = _ref2.include,\n      exclude = _ref2.exclude,\n      polyfillTargets = _ref2.polyfillTargets,\n      debug = _ref2.debug;\n  var polyfills = (0, _helperCompilationTargets.filterItems)(_corejs2BuiltIns.default, include, exclude, polyfillTargets, (0, _getPlatformSpecificDefault.default)(polyfillTargets));\n  var addAndRemovePolyfillImports = {\n    ImportDeclaration: function ImportDeclaration(path) {\n      if ((0, _utils.isPolyfillSource)((0, _utils.getImportSource)(path))) {\n        console.warn(NO_DIRECT_POLYFILL_IMPORT);\n        path.remove();\n      }\n    },\n    Program: function Program(path) {\n      path.get(\"body\").forEach(function (bodyPath) {\n        if ((0, _utils.isPolyfillSource)((0, _utils.getRequireSource)(bodyPath))) {\n          console.warn(NO_DIRECT_POLYFILL_IMPORT);\n          bodyPath.remove();\n        }\n      });\n    },\n    ReferencedIdentifier: function ReferencedIdentifier(_ref3) {\n      var name = _ref3.node.name,\n          parent = _ref3.parent,\n          scope = _ref3.scope;\n      if (t.isMemberExpression(parent)) return;\n      if (!(0, _utils.has)(_builtInDefinitions.BuiltIns, name)) return;\n      if (scope.getBindingIdentifier(name)) return;\n      var BuiltInDependencies = _builtInDefinitions.BuiltIns[name];\n      this.addUnsupported(BuiltInDependencies);\n    },\n    CallExpression: function CallExpression(path) {\n      if (path.node.arguments.length) return;\n      var callee = path.node.callee;\n      if (!t.isMemberExpression(callee)) return;\n      if (!callee.computed) return;\n\n      if (!path.get(\"callee.property\").matchesPattern(\"Symbol.iterator\")) {\n        return;\n      }\n\n      this.addImport(\"web.dom.iterable\");\n    },\n    BinaryExpression: function BinaryExpression(path) {\n      if (path.node.operator !== \"in\") return;\n      if (!path.get(\"left\").matchesPattern(\"Symbol.iterator\")) return;\n      this.addImport(\"web.dom.iterable\");\n    },\n    YieldExpression: function YieldExpression(path) {\n      if (path.node.delegate) {\n        this.addImport(\"web.dom.iterable\");\n      }\n    },\n    MemberExpression: {\n      enter: function enter(path) {\n        var node = path.node;\n        var object = node.object,\n            property = node.property;\n        if ((0, _utils.isNamespaced)(path.get(\"object\"))) return;\n        var evaluatedPropType = object.name;\n        var propertyName = \"\";\n        var instanceType = \"\";\n\n        if (node.computed) {\n          if (t.isStringLiteral(property)) {\n            propertyName = property.value;\n          } else {\n            var result = path.get(\"property\").evaluate();\n\n            if (result.confident && result.value) {\n              propertyName = result.value;\n            }\n          }\n        } else {\n          propertyName = property.name;\n        }\n\n        if (path.scope.getBindingIdentifier(object.name)) {\n          var _result = path.get(\"object\").evaluate();\n\n          if (_result.value) {\n            instanceType = (0, _utils.getType)(_result.value);\n          } else if (_result.deopt && _result.deopt.isIdentifier()) {\n            evaluatedPropType = _result.deopt.node.name;\n          }\n        }\n\n        if ((0, _utils.has)(_builtInDefinitions.StaticProperties, evaluatedPropType)) {\n          var BuiltInProperties = _builtInDefinitions.StaticProperties[evaluatedPropType];\n\n          if ((0, _utils.has)(BuiltInProperties, propertyName)) {\n            var StaticPropertyDependencies = BuiltInProperties[propertyName];\n            this.addUnsupported(StaticPropertyDependencies);\n          }\n        }\n\n        if ((0, _utils.has)(_builtInDefinitions.InstanceProperties, propertyName)) {\n          var InstancePropertyDependencies = _builtInDefinitions.InstanceProperties[propertyName];\n\n          if (instanceType) {\n            InstancePropertyDependencies = InstancePropertyDependencies.filter(function (module) {\n              return module.includes(instanceType);\n            });\n          }\n\n          this.addUnsupported(InstancePropertyDependencies);\n        }\n      },\n      exit: function exit(path) {\n        var name = path.node.object.name;\n        if (!(0, _utils.has)(_builtInDefinitions.BuiltIns, name)) return;\n        if (path.scope.getBindingIdentifier(name)) return;\n        var BuiltInDependencies = _builtInDefinitions.BuiltIns[name];\n        this.addUnsupported(BuiltInDependencies);\n      }\n    },\n    VariableDeclarator: function VariableDeclarator(path) {\n      var node = path.node;\n      var id = node.id,\n          init = node.init;\n      if (!t.isObjectPattern(id)) return;\n      if (init && path.scope.getBindingIdentifier(init.name)) return;\n\n      for (var _iterator = _createForOfIteratorHelperLoose(id.properties), _step; !(_step = _iterator()).done;) {\n        var _ref4 = _step.value;\n        var key = _ref4.key;\n\n        if (!node.computed && t.isIdentifier(key) && (0, _utils.has)(_builtInDefinitions.InstanceProperties, key.name)) {\n          var InstancePropertyDependencies = _builtInDefinitions.InstanceProperties[key.name];\n          this.addUnsupported(InstancePropertyDependencies);\n        }\n      }\n    }\n  };\n  return {\n    name: \"corejs2-usage\",\n    pre: function pre(_ref5) {\n      var path = _ref5.path;\n      this.polyfillsSet = new Set();\n\n      this.addImport = function (builtIn) {\n        if (!this.polyfillsSet.has(builtIn)) {\n          this.polyfillsSet.add(builtIn);\n          (0, _utils.createImport)(path, builtIn);\n        }\n      };\n\n      this.addUnsupported = function (builtIn) {\n        var modules = Array.isArray(builtIn) ? builtIn : [builtIn];\n\n        for (var _iterator2 = _createForOfIteratorHelperLoose(modules), _step2; !(_step2 = _iterator2()).done;) {\n          var module = _step2.value;\n\n          if (polyfills.has(module)) {\n            this.addImport(module);\n          }\n        }\n      };\n    },\n    post: function post() {\n      if (debug) {\n        (0, _debug.logUsagePolyfills)(this.polyfillsSet, this.file.opts.filename, polyfillTargets, _corejs2BuiltIns.default);\n      }\n    },\n    visitor: addAndRemovePolyfillImports\n  };\n}","map":{"version":3,"sources":["/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/@expo/config/node_modules/@babel/preset-env/lib/polyfills/corejs2/usage-plugin.js"],"names":["Object","defineProperty","exports","value","default","_default","_corejs2BuiltIns","_interopRequireDefault","require","_helperCompilationTargets","_getPlatformSpecificDefault","_builtInDefinitions","_utils","_debug","obj","__esModule","NO_DIRECT_POLYFILL_IMPORT","t","types","include","exclude","polyfillTargets","debug","polyfills","filterItems","addAndRemovePolyfillImports","ImportDeclaration","path","isPolyfillSource","getImportSource","console","warn","remove","Program","get","forEach","bodyPath","getRequireSource","ReferencedIdentifier","name","node","parent","scope","isMemberExpression","has","BuiltIns","getBindingIdentifier","BuiltInDependencies","addUnsupported","CallExpression","arguments","length","callee","computed","matchesPattern","addImport","BinaryExpression","operator","YieldExpression","delegate","MemberExpression","enter","object","property","isNamespaced","evaluatedPropType","propertyName","instanceType","isStringLiteral","result","evaluate","confident","getType","deopt","isIdentifier","StaticProperties","BuiltInProperties","StaticPropertyDependencies","InstanceProperties","InstancePropertyDependencies","filter","module","includes","exit","VariableDeclarator","id","init","isObjectPattern","properties","key","pre","polyfillsSet","Set","builtIn","add","createImport","modules","Array","isArray","post","logUsagePolyfills","file","opts","filename","visitor"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = _default;\n\nvar _corejs2BuiltIns = _interopRequireDefault(require(\"@babel/compat-data/corejs2-built-ins\"));\n\nvar _helperCompilationTargets = require(\"@babel/helper-compilation-targets\");\n\nvar _getPlatformSpecificDefault = _interopRequireDefault(require(\"./get-platform-specific-default\"));\n\nvar _builtInDefinitions = require(\"./built-in-definitions\");\n\nvar _utils = require(\"../../utils\");\n\nvar _debug = require(\"../../debug\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst NO_DIRECT_POLYFILL_IMPORT = `\n  When setting \\`useBuiltIns: 'usage'\\`, polyfills are automatically imported when needed.\n  Please remove the \\`import '@babel/polyfill'\\` call or use \\`useBuiltIns: 'entry'\\` instead.`;\n\nfunction _default({\n  types: t\n}, {\n  include,\n  exclude,\n  polyfillTargets,\n  debug\n}) {\n  const polyfills = (0, _helperCompilationTargets.filterItems)(_corejs2BuiltIns.default, include, exclude, polyfillTargets, (0, _getPlatformSpecificDefault.default)(polyfillTargets));\n  const addAndRemovePolyfillImports = {\n    ImportDeclaration(path) {\n      if ((0, _utils.isPolyfillSource)((0, _utils.getImportSource)(path))) {\n        console.warn(NO_DIRECT_POLYFILL_IMPORT);\n        path.remove();\n      }\n    },\n\n    Program(path) {\n      path.get(\"body\").forEach(bodyPath => {\n        if ((0, _utils.isPolyfillSource)((0, _utils.getRequireSource)(bodyPath))) {\n          console.warn(NO_DIRECT_POLYFILL_IMPORT);\n          bodyPath.remove();\n        }\n      });\n    },\n\n    ReferencedIdentifier({\n      node: {\n        name\n      },\n      parent,\n      scope\n    }) {\n      if (t.isMemberExpression(parent)) return;\n      if (!(0, _utils.has)(_builtInDefinitions.BuiltIns, name)) return;\n      if (scope.getBindingIdentifier(name)) return;\n      const BuiltInDependencies = _builtInDefinitions.BuiltIns[name];\n      this.addUnsupported(BuiltInDependencies);\n    },\n\n    CallExpression(path) {\n      if (path.node.arguments.length) return;\n      const callee = path.node.callee;\n      if (!t.isMemberExpression(callee)) return;\n      if (!callee.computed) return;\n\n      if (!path.get(\"callee.property\").matchesPattern(\"Symbol.iterator\")) {\n        return;\n      }\n\n      this.addImport(\"web.dom.iterable\");\n    },\n\n    BinaryExpression(path) {\n      if (path.node.operator !== \"in\") return;\n      if (!path.get(\"left\").matchesPattern(\"Symbol.iterator\")) return;\n      this.addImport(\"web.dom.iterable\");\n    },\n\n    YieldExpression(path) {\n      if (path.node.delegate) {\n        this.addImport(\"web.dom.iterable\");\n      }\n    },\n\n    MemberExpression: {\n      enter(path) {\n        const {\n          node\n        } = path;\n        const {\n          object,\n          property\n        } = node;\n        if ((0, _utils.isNamespaced)(path.get(\"object\"))) return;\n        let evaluatedPropType = object.name;\n        let propertyName = \"\";\n        let instanceType = \"\";\n\n        if (node.computed) {\n          if (t.isStringLiteral(property)) {\n            propertyName = property.value;\n          } else {\n            const result = path.get(\"property\").evaluate();\n\n            if (result.confident && result.value) {\n              propertyName = result.value;\n            }\n          }\n        } else {\n          propertyName = property.name;\n        }\n\n        if (path.scope.getBindingIdentifier(object.name)) {\n          const result = path.get(\"object\").evaluate();\n\n          if (result.value) {\n            instanceType = (0, _utils.getType)(result.value);\n          } else if (result.deopt && result.deopt.isIdentifier()) {\n            evaluatedPropType = result.deopt.node.name;\n          }\n        }\n\n        if ((0, _utils.has)(_builtInDefinitions.StaticProperties, evaluatedPropType)) {\n          const BuiltInProperties = _builtInDefinitions.StaticProperties[evaluatedPropType];\n\n          if ((0, _utils.has)(BuiltInProperties, propertyName)) {\n            const StaticPropertyDependencies = BuiltInProperties[propertyName];\n            this.addUnsupported(StaticPropertyDependencies);\n          }\n        }\n\n        if ((0, _utils.has)(_builtInDefinitions.InstanceProperties, propertyName)) {\n          let InstancePropertyDependencies = _builtInDefinitions.InstanceProperties[propertyName];\n\n          if (instanceType) {\n            InstancePropertyDependencies = InstancePropertyDependencies.filter(module => module.includes(instanceType));\n          }\n\n          this.addUnsupported(InstancePropertyDependencies);\n        }\n      },\n\n      exit(path) {\n        const {\n          name\n        } = path.node.object;\n        if (!(0, _utils.has)(_builtInDefinitions.BuiltIns, name)) return;\n        if (path.scope.getBindingIdentifier(name)) return;\n        const BuiltInDependencies = _builtInDefinitions.BuiltIns[name];\n        this.addUnsupported(BuiltInDependencies);\n      }\n\n    },\n\n    VariableDeclarator(path) {\n      const {\n        node\n      } = path;\n      const {\n        id,\n        init\n      } = node;\n      if (!t.isObjectPattern(id)) return;\n      if (init && path.scope.getBindingIdentifier(init.name)) return;\n\n      for (const {\n        key\n      } of id.properties) {\n        if (!node.computed && t.isIdentifier(key) && (0, _utils.has)(_builtInDefinitions.InstanceProperties, key.name)) {\n          const InstancePropertyDependencies = _builtInDefinitions.InstanceProperties[key.name];\n          this.addUnsupported(InstancePropertyDependencies);\n        }\n      }\n    }\n\n  };\n  return {\n    name: \"corejs2-usage\",\n\n    pre({\n      path\n    }) {\n      this.polyfillsSet = new Set();\n\n      this.addImport = function (builtIn) {\n        if (!this.polyfillsSet.has(builtIn)) {\n          this.polyfillsSet.add(builtIn);\n          (0, _utils.createImport)(path, builtIn);\n        }\n      };\n\n      this.addUnsupported = function (builtIn) {\n        const modules = Array.isArray(builtIn) ? builtIn : [builtIn];\n\n        for (const module of modules) {\n          if (polyfills.has(module)) {\n            this.addImport(module);\n          }\n        }\n      };\n    },\n\n    post() {\n      if (debug) {\n        (0, _debug.logUsagePolyfills)(this.polyfillsSet, this.file.opts.filename, polyfillTargets, _corejs2BuiltIns.default);\n      }\n    },\n\n    visitor: addAndRemovePolyfillImports\n  };\n}"]},"metadata":{},"sourceType":"script"}