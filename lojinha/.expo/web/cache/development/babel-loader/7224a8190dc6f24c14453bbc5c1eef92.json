{"ast":null,"code":"function _createForOfIteratorHelperLoose(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } it = o[Symbol.iterator](); return it.next.bind(it); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar util = require('util'),\n    f = util.format,\n    EventEmitter = require('events').EventEmitter,\n    path = require('path'),\n    uuid = require('uuid'),\n    fork = require('child_process').fork,\n    pbxWriter = require(\"./pbxWriter\"),\n    pbxFile = require(\"./pbxFile\"),\n    fs = require('fs'),\n    parser = require(\"./parser/pbxproj\"),\n    plist = require('simple-plist'),\n    COMMENT_KEY = /_comment$/;\n\nfunction pbxProject(filename) {\n  if (!(this instanceof pbxProject)) return new pbxProject(filename);\n  this.filepath = path.resolve(filename);\n}\n\nutil.inherits(pbxProject, EventEmitter);\n\npbxProject.prototype.parse = function (cb) {\n  var worker = fork(__dirname + '/parseJob.js', [this.filepath]);\n  worker.on('message', function (msg) {\n    if (msg.name == 'SyntaxError' || msg.code) {\n      this.emit('error', msg);\n    } else {\n      this.hash = msg;\n      this.emit('end', null, msg);\n    }\n  }.bind(this));\n\n  if (cb) {\n    this.on('error', cb);\n    this.on('end', cb);\n  }\n\n  return this;\n};\n\npbxProject.prototype.parseSync = function () {\n  var file_contents = fs.readFileSync(this.filepath, 'utf-8');\n  this.hash = parser.parse(file_contents);\n  return this;\n};\n\npbxProject.prototype.writeSync = function (options) {\n  this.writer = new pbxWriter(this.hash, options);\n  return this.writer.writeSync();\n};\n\npbxProject.prototype.allUuids = function () {\n  var sections = this.hash.project.objects,\n      uuids = [],\n      section;\n\n  for (key in sections) {\n    section = sections[key];\n    uuids = uuids.concat(Object.keys(section));\n  }\n\n  uuids = uuids.filter(function (str) {\n    return !COMMENT_KEY.test(str) && str.length == 24;\n  });\n  return uuids;\n};\n\npbxProject.prototype.generateUuid = function () {\n  var id = uuid.v4().replace(/-/g, '').substr(0, 24).toUpperCase();\n\n  if (this.allUuids().indexOf(id) >= 0) {\n    return this.generateUuid();\n  } else {\n    return id;\n  }\n};\n\npbxProject.prototype.addPluginFile = function (path, opt) {\n  var file = new pbxFile(path, opt);\n  file.plugin = true;\n  correctForPluginsPath(file, this);\n  if (this.hasFile(file.path)) return null;\n  file.fileRef = this.generateUuid();\n  this.addToPbxFileReferenceSection(file);\n  this.addToPluginsPbxGroup(file);\n  return file;\n};\n\npbxProject.prototype.removePluginFile = function (path, opt) {\n  var file = new pbxFile(path, opt);\n  correctForPluginsPath(file, this);\n  this.removeFromPbxFileReferenceSection(file);\n  this.removeFromPluginsPbxGroup(file);\n  return file;\n};\n\npbxProject.prototype.addProductFile = function (targetPath, opt) {\n  var file = new pbxFile(targetPath, opt);\n  file.includeInIndex = 0;\n  file.fileRef = this.generateUuid();\n  file.target = opt ? opt.target : undefined;\n  file.group = opt ? opt.group : undefined;\n  file.uuid = this.generateUuid();\n  file.path = file.basename;\n  this.addToPbxFileReferenceSection(file);\n  this.addToProductsPbxGroup(file);\n  return file;\n};\n\npbxProject.prototype.removeProductFile = function (path, opt) {\n  var file = new pbxFile(path, opt);\n  this.removeFromProductsPbxGroup(file);\n  return file;\n};\n\npbxProject.prototype.addSourceFile = function (path, opt, group) {\n  var file;\n\n  if (group) {\n    file = this.addFile(path, group, opt);\n  } else {\n    file = this.addPluginFile(path, opt);\n  }\n\n  if (!file) return false;\n  file.target = opt ? opt.target : undefined;\n  file.uuid = this.generateUuid();\n  this.addToPbxBuildFileSection(file);\n  this.addToPbxSourcesBuildPhase(file);\n  return file;\n};\n\npbxProject.prototype.removeSourceFile = function (path, opt, group) {\n  var file;\n\n  if (group) {\n    file = this.removeFile(path, group, opt);\n  } else {\n    file = this.removePluginFile(path, opt);\n  }\n\n  file.target = opt ? opt.target : undefined;\n  this.removeFromPbxBuildFileSection(file);\n  this.removeFromPbxSourcesBuildPhase(file);\n  return file;\n};\n\npbxProject.prototype.addHeaderFile = function (path, opt, group) {\n  if (group) {\n    return this.addFile(path, group, opt);\n  } else {\n    return this.addPluginFile(path, opt);\n  }\n};\n\npbxProject.prototype.removeHeaderFile = function (path, opt, group) {\n  if (group) {\n    return this.removeFile(path, group, opt);\n  } else {\n    return this.removePluginFile(path, opt);\n  }\n};\n\npbxProject.prototype.addResourceFile = function (path, opt, group) {\n  opt = opt || {};\n  var file;\n\n  if (opt.plugin) {\n    file = this.addPluginFile(path, opt);\n    if (!file) return false;\n  } else {\n    file = new pbxFile(path, opt);\n    if (this.hasFile(file.path)) return false;\n  }\n\n  file.uuid = this.generateUuid();\n  file.target = opt ? opt.target : undefined;\n\n  if (!opt.plugin) {\n    correctForResourcesPath(file, this);\n    file.fileRef = this.generateUuid();\n  }\n\n  if (!opt.variantGroup) {\n    this.addToPbxBuildFileSection(file);\n    this.addToPbxResourcesBuildPhase(file);\n  }\n\n  if (!opt.plugin) {\n    this.addToPbxFileReferenceSection(file);\n\n    if (group) {\n      if (this.getPBXGroupByKey(group)) {\n        this.addToPbxGroup(file, group);\n      } else if (this.getPBXVariantGroupByKey(group)) {\n        this.addToPbxVariantGroup(file, group);\n      }\n    } else {\n      this.addToResourcesPbxGroup(file);\n    }\n  }\n\n  return file;\n};\n\npbxProject.prototype.removeResourceFile = function (path, opt, group) {\n  var file = new pbxFile(path, opt);\n  file.target = opt ? opt.target : undefined;\n  correctForResourcesPath(file, this);\n  this.removeFromPbxBuildFileSection(file);\n  this.removeFromPbxFileReferenceSection(file);\n\n  if (group) {\n    if (this.getPBXGroupByKey(group)) {\n      this.removeFromPbxGroup(file, group);\n    } else if (this.getPBXVariantGroupByKey(group)) {\n      this.removeFromPbxVariantGroup(file, group);\n    }\n  } else {\n    this.removeFromResourcesPbxGroup(file);\n  }\n\n  this.removeFromPbxResourcesBuildPhase(file);\n  return file;\n};\n\npbxProject.prototype.addFramework = function (fpath, opt) {\n  var customFramework = opt && opt.customFramework == true;\n  var link = !opt || opt.link == undefined || opt.link;\n  var embed = opt && opt.embed;\n\n  if (opt) {\n    delete opt.embed;\n  }\n\n  var file = new pbxFile(fpath, opt);\n  file.uuid = this.generateUuid();\n  file.fileRef = this.generateUuid();\n  file.target = opt ? opt.target : undefined;\n  if (this.hasFile(file.path)) return false;\n  this.addToPbxBuildFileSection(file);\n  this.addToPbxFileReferenceSection(file);\n  this.addToFrameworksPbxGroup(file);\n\n  if (link) {\n    this.addToPbxFrameworksBuildPhase(file);\n  }\n\n  if (customFramework) {\n    this.addToFrameworkSearchPaths(file);\n\n    if (embed) {\n      opt.embed = embed;\n      var embeddedFile = new pbxFile(fpath, opt);\n      embeddedFile.uuid = this.generateUuid();\n      embeddedFile.fileRef = file.fileRef;\n      this.addToPbxBuildFileSection(embeddedFile);\n      this.addToPbxEmbedFrameworksBuildPhase(embeddedFile);\n      return embeddedFile;\n    }\n  }\n\n  return file;\n};\n\npbxProject.prototype.removeFramework = function (fpath, opt) {\n  var embed = opt && opt.embed;\n\n  if (opt) {\n    delete opt.embed;\n  }\n\n  var file = new pbxFile(fpath, opt);\n  file.target = opt ? opt.target : undefined;\n  this.removeFromPbxBuildFileSection(file);\n  this.removeFromPbxFileReferenceSection(file);\n  this.removeFromFrameworksPbxGroup(file);\n  this.removeFromPbxFrameworksBuildPhase(file);\n\n  if (opt && opt.customFramework) {\n    this.removeFromFrameworkSearchPaths(file);\n  }\n\n  opt = opt || {};\n  opt.embed = true;\n  var embeddedFile = new pbxFile(fpath, opt);\n  embeddedFile.fileRef = file.fileRef;\n  this.removeFromPbxBuildFileSection(embeddedFile);\n  this.removeFromPbxEmbedFrameworksBuildPhase(embeddedFile);\n  return file;\n};\n\npbxProject.prototype.addCopyfile = function (fpath, opt) {\n  var file = new pbxFile(fpath, opt);\n\n  if (this.hasFile(file.path)) {\n    file = this.hasFile(file.path);\n  }\n\n  file.fileRef = file.uuid = this.generateUuid();\n  file.target = opt ? opt.target : undefined;\n  this.addToPbxBuildFileSection(file);\n  this.addToPbxFileReferenceSection(file);\n  this.addToPbxCopyfilesBuildPhase(file);\n  return file;\n};\n\npbxProject.prototype.pbxCopyfilesBuildPhaseObj = function (target) {\n  return this.buildPhaseObject('PBXCopyFilesBuildPhase', 'Copy Files', target);\n};\n\npbxProject.prototype.addToPbxCopyfilesBuildPhase = function (file) {\n  var sources = this.buildPhaseObject('PBXCopyFilesBuildPhase', 'Copy Files', file.target);\n  sources.files.push(pbxBuildPhaseObj(file));\n};\n\npbxProject.prototype.removeCopyfile = function (fpath, opt) {\n  var file = new pbxFile(fpath, opt);\n  file.target = opt ? opt.target : undefined;\n  this.removeFromPbxBuildFileSection(file);\n  this.removeFromPbxFileReferenceSection(file);\n  this.removeFromPbxCopyfilesBuildPhase(file);\n  return file;\n};\n\npbxProject.prototype.removeFromPbxCopyfilesBuildPhase = function (file) {\n  var sources = this.pbxCopyfilesBuildPhaseObj(file.target);\n\n  for (i in sources.files) {\n    if (sources.files[i].comment == longComment(file)) {\n      sources.files.splice(i, 1);\n      break;\n    }\n  }\n};\n\npbxProject.prototype.addStaticLibrary = function (path, opt) {\n  opt = opt || {};\n  var file;\n\n  if (opt.plugin) {\n    file = this.addPluginFile(path, opt);\n    if (!file) return false;\n  } else {\n    file = new pbxFile(path, opt);\n    if (this.hasFile(file.path)) return false;\n  }\n\n  file.uuid = this.generateUuid();\n  file.target = opt ? opt.target : undefined;\n\n  if (!opt.plugin) {\n    file.fileRef = this.generateUuid();\n    this.addToPbxFileReferenceSection(file);\n  }\n\n  this.addToPbxBuildFileSection(file);\n  this.addToPbxFrameworksBuildPhase(file);\n  this.addToLibrarySearchPaths(file);\n  return file;\n};\n\npbxProject.prototype.addToPbxBuildFileSection = function (file) {\n  var commentKey = f(\"%s_comment\", file.uuid);\n  this.pbxBuildFileSection()[file.uuid] = pbxBuildFileObj(file);\n  this.pbxBuildFileSection()[commentKey] = pbxBuildFileComment(file);\n};\n\npbxProject.prototype.removeFromPbxBuildFileSection = function (file) {\n  var uuid;\n\n  for (uuid in this.pbxBuildFileSection()) {\n    if (this.pbxBuildFileSection()[uuid].fileRef_comment == file.basename) {\n      file.uuid = uuid;\n      delete this.pbxBuildFileSection()[uuid];\n      var commentKey = f(\"%s_comment\", uuid);\n      delete this.pbxBuildFileSection()[commentKey];\n    }\n  }\n};\n\npbxProject.prototype.addPbxGroup = function (filePathsArray, name, path, sourceTree) {\n  var groups = this.hash.project.objects['PBXGroup'],\n      pbxGroupUuid = this.generateUuid(),\n      commentKey = f(\"%s_comment\", pbxGroupUuid),\n      pbxGroup = {\n    isa: 'PBXGroup',\n    children: [],\n    name: name,\n    path: path,\n    sourceTree: sourceTree ? sourceTree : '\"<group>\"'\n  },\n      fileReferenceSection = this.pbxFileReferenceSection(),\n      filePathToReference = {};\n\n  for (var key in fileReferenceSection) {\n    if (!COMMENT_KEY.test(key)) continue;\n    var fileReferenceKey = key.split(COMMENT_KEY)[0],\n        fileReference = fileReferenceSection[fileReferenceKey];\n    filePathToReference[fileReference.path] = {\n      fileRef: fileReferenceKey,\n      basename: fileReferenceSection[key]\n    };\n  }\n\n  for (var index = 0; index < filePathsArray.length; index++) {\n    var filePath = filePathsArray[index],\n        filePathQuoted = \"\\\"\" + filePath + \"\\\"\";\n\n    if (filePathToReference[filePath]) {\n      pbxGroup.children.push(pbxGroupChild(filePathToReference[filePath]));\n      continue;\n    } else if (filePathToReference[filePathQuoted]) {\n      pbxGroup.children.push(pbxGroupChild(filePathToReference[filePathQuoted]));\n      continue;\n    }\n\n    var file = new pbxFile(filePath);\n    file.uuid = this.generateUuid();\n    file.fileRef = this.generateUuid();\n    this.addToPbxFileReferenceSection(file);\n    this.addToPbxBuildFileSection(file);\n    pbxGroup.children.push(pbxGroupChild(file));\n  }\n\n  if (groups) {\n    groups[pbxGroupUuid] = pbxGroup;\n    groups[commentKey] = name;\n  }\n\n  return {\n    uuid: pbxGroupUuid,\n    pbxGroup: pbxGroup\n  };\n};\n\npbxProject.prototype.removePbxGroup = function (groupName) {\n  var section = this.hash.project.objects['PBXGroup'],\n      key,\n      itemKey;\n\n  for (key in section) {\n    if (!COMMENT_KEY.test(key)) continue;\n\n    if (section[key] == groupName) {\n      itemKey = key.split(COMMENT_KEY)[0];\n      delete section[itemKey];\n    }\n  }\n};\n\npbxProject.prototype.addToPbxProjectSection = function (target) {\n  var newTarget = {\n    value: target.uuid,\n    comment: pbxNativeTargetComment(target.pbxNativeTarget)\n  };\n  this.pbxProjectSection()[this.getFirstProject()['uuid']]['targets'].push(newTarget);\n};\n\npbxProject.prototype.addToPbxNativeTargetSection = function (target) {\n  var commentKey = f(\"%s_comment\", target.uuid);\n  this.pbxNativeTargetSection()[target.uuid] = target.pbxNativeTarget;\n  this.pbxNativeTargetSection()[commentKey] = target.pbxNativeTarget.name;\n};\n\npbxProject.prototype.addToPbxFileReferenceSection = function (file) {\n  var commentKey = f(\"%s_comment\", file.fileRef);\n  this.pbxFileReferenceSection()[file.fileRef] = pbxFileReferenceObj(file);\n  this.pbxFileReferenceSection()[commentKey] = pbxFileReferenceComment(file);\n};\n\npbxProject.prototype.removeFromPbxFileReferenceSection = function (file) {\n  var i;\n  var refObj = pbxFileReferenceObj(file);\n\n  for (i in this.pbxFileReferenceSection()) {\n    if (this.pbxFileReferenceSection()[i].name == refObj.name || '\"' + this.pbxFileReferenceSection()[i].name + '\"' == refObj.name || this.pbxFileReferenceSection()[i].path == refObj.path || '\"' + this.pbxFileReferenceSection()[i].path + '\"' == refObj.path) {\n      file.fileRef = file.uuid = i;\n      delete this.pbxFileReferenceSection()[i];\n      break;\n    }\n  }\n\n  var commentKey = f(\"%s_comment\", file.fileRef);\n\n  if (this.pbxFileReferenceSection()[commentKey] != undefined) {\n    delete this.pbxFileReferenceSection()[commentKey];\n  }\n\n  return file;\n};\n\npbxProject.prototype.addToXcVersionGroupSection = function (file) {\n  if (!file.models || !file.currentModel) {\n    throw new Error(\"Cannot create a XCVersionGroup section from not a data model document file\");\n  }\n\n  var commentKey = f(\"%s_comment\", file.fileRef);\n\n  if (!this.xcVersionGroupSection()[file.fileRef]) {\n    this.xcVersionGroupSection()[file.fileRef] = {\n      isa: 'XCVersionGroup',\n      children: file.models.map(function (el) {\n        return el.fileRef;\n      }),\n      currentVersion: file.currentModel.fileRef,\n      name: path.basename(file.path),\n      path: file.path,\n      sourceTree: '\"<group>\"',\n      versionGroupType: 'wrapper.xcdatamodel'\n    };\n    this.xcVersionGroupSection()[commentKey] = path.basename(file.path);\n  }\n};\n\npbxProject.prototype.addToPluginsPbxGroup = function (file) {\n  var pluginsGroup = this.pbxGroupByName('Plugins');\n\n  if (!pluginsGroup) {\n    this.addPbxGroup([file.path], 'Plugins');\n  } else {\n    pluginsGroup.children.push(pbxGroupChild(file));\n  }\n};\n\npbxProject.prototype.removeFromPluginsPbxGroup = function (file) {\n  if (!this.pbxGroupByName('Plugins')) {\n    return null;\n  }\n\n  var pluginsGroupChildren = this.pbxGroupByName('Plugins').children,\n      i;\n\n  for (i in pluginsGroupChildren) {\n    if (pbxGroupChild(file).value == pluginsGroupChildren[i].value && pbxGroupChild(file).comment == pluginsGroupChildren[i].comment) {\n      pluginsGroupChildren.splice(i, 1);\n      break;\n    }\n  }\n};\n\npbxProject.prototype.addToResourcesPbxGroup = function (file) {\n  var pluginsGroup = this.pbxGroupByName('Resources');\n\n  if (!pluginsGroup) {\n    this.addPbxGroup([file.path], 'Resources');\n  } else {\n    pluginsGroup.children.push(pbxGroupChild(file));\n  }\n};\n\npbxProject.prototype.removeFromResourcesPbxGroup = function (file) {\n  if (!this.pbxGroupByName('Resources')) {\n    return null;\n  }\n\n  var pluginsGroupChildren = this.pbxGroupByName('Resources').children,\n      i;\n\n  for (i in pluginsGroupChildren) {\n    if (pbxGroupChild(file).value == pluginsGroupChildren[i].value && pbxGroupChild(file).comment == pluginsGroupChildren[i].comment) {\n      pluginsGroupChildren.splice(i, 1);\n      break;\n    }\n  }\n};\n\npbxProject.prototype.addToFrameworksPbxGroup = function (file) {\n  var pluginsGroup = this.pbxGroupByName('Frameworks');\n\n  if (!pluginsGroup) {\n    this.addPbxGroup([file.path], 'Frameworks');\n  } else {\n    pluginsGroup.children.push(pbxGroupChild(file));\n  }\n};\n\npbxProject.prototype.removeFromFrameworksPbxGroup = function (file) {\n  if (!this.pbxGroupByName('Frameworks')) {\n    return null;\n  }\n\n  var pluginsGroupChildren = this.pbxGroupByName('Frameworks').children;\n\n  for (i in pluginsGroupChildren) {\n    if (pbxGroupChild(file).value == pluginsGroupChildren[i].value && pbxGroupChild(file).comment == pluginsGroupChildren[i].comment) {\n      pluginsGroupChildren.splice(i, 1);\n      break;\n    }\n  }\n};\n\npbxProject.prototype.addToPbxEmbedFrameworksBuildPhase = function (file) {\n  var sources = this.pbxEmbedFrameworksBuildPhaseObj(file.target);\n\n  if (sources) {\n    sources.files.push(pbxBuildPhaseObj(file));\n  }\n};\n\npbxProject.prototype.removeFromPbxEmbedFrameworksBuildPhase = function (file) {\n  var sources = this.pbxEmbedFrameworksBuildPhaseObj(file.target);\n\n  if (sources) {\n    var files = [];\n\n    for (i in sources.files) {\n      if (sources.files[i].comment != longComment(file)) {\n        files.push(sources.files[i]);\n      }\n    }\n\n    sources.files = files;\n  }\n};\n\npbxProject.prototype.addToProductsPbxGroup = function (file) {\n  var productsGroup = this.pbxGroupByName('Products');\n\n  if (!productsGroup) {\n    this.addPbxGroup([file.path], 'Products');\n  } else {\n    productsGroup.children.push(pbxGroupChild(file));\n  }\n};\n\npbxProject.prototype.removeFromProductsPbxGroup = function (file) {\n  if (!this.pbxGroupByName('Products')) {\n    return null;\n  }\n\n  var productsGroupChildren = this.pbxGroupByName('Products').children,\n      i;\n\n  for (i in productsGroupChildren) {\n    if (pbxGroupChild(file).value == productsGroupChildren[i].value && pbxGroupChild(file).comment == productsGroupChildren[i].comment) {\n      productsGroupChildren.splice(i, 1);\n      break;\n    }\n  }\n};\n\npbxProject.prototype.addToPbxSourcesBuildPhase = function (file) {\n  var sources = this.pbxSourcesBuildPhaseObj(file.target);\n  sources.files.push(pbxBuildPhaseObj(file));\n};\n\npbxProject.prototype.removeFromPbxSourcesBuildPhase = function (file) {\n  var sources = this.pbxSourcesBuildPhaseObj(file.target),\n      i;\n\n  for (i in sources.files) {\n    if (sources.files[i].comment == longComment(file)) {\n      sources.files.splice(i, 1);\n      break;\n    }\n  }\n};\n\npbxProject.prototype.addToPbxResourcesBuildPhase = function (file) {\n  var sources = this.pbxResourcesBuildPhaseObj(file.target);\n  sources.files.push(pbxBuildPhaseObj(file));\n};\n\npbxProject.prototype.removeFromPbxResourcesBuildPhase = function (file) {\n  var sources = this.pbxResourcesBuildPhaseObj(file.target),\n      i;\n\n  for (i in sources.files) {\n    if (sources.files[i].comment == longComment(file)) {\n      sources.files.splice(i, 1);\n      break;\n    }\n  }\n};\n\npbxProject.prototype.addToPbxFrameworksBuildPhase = function (file) {\n  var sources = this.pbxFrameworksBuildPhaseObj(file.target);\n  sources.files.push(pbxBuildPhaseObj(file));\n};\n\npbxProject.prototype.removeFromPbxFrameworksBuildPhase = function (file) {\n  var sources = this.pbxFrameworksBuildPhaseObj(file.target);\n\n  for (i in sources.files) {\n    if (sources.files[i].comment == longComment(file)) {\n      sources.files.splice(i, 1);\n      break;\n    }\n  }\n};\n\npbxProject.prototype.addXCConfigurationList = function (configurationObjectsArray, defaultConfigurationName, comment) {\n  var pbxBuildConfigurationSection = this.pbxXCBuildConfigurationSection(),\n      pbxXCConfigurationListSection = this.pbxXCConfigurationList(),\n      xcConfigurationListUuid = this.generateUuid(),\n      commentKey = f(\"%s_comment\", xcConfigurationListUuid),\n      xcConfigurationList = {\n    isa: 'XCConfigurationList',\n    buildConfigurations: [],\n    defaultConfigurationIsVisible: 0,\n    defaultConfigurationName: defaultConfigurationName\n  };\n\n  for (var index = 0; index < configurationObjectsArray.length; index++) {\n    var configuration = configurationObjectsArray[index],\n        configurationUuid = this.generateUuid(),\n        configurationCommentKey = f(\"%s_comment\", configurationUuid);\n    pbxBuildConfigurationSection[configurationUuid] = configuration;\n    pbxBuildConfigurationSection[configurationCommentKey] = configuration.name;\n    xcConfigurationList.buildConfigurations.push({\n      value: configurationUuid,\n      comment: configuration.name\n    });\n  }\n\n  if (pbxXCConfigurationListSection) {\n    pbxXCConfigurationListSection[xcConfigurationListUuid] = xcConfigurationList;\n    pbxXCConfigurationListSection[commentKey] = comment;\n  }\n\n  return {\n    uuid: xcConfigurationListUuid,\n    xcConfigurationList: xcConfigurationList\n  };\n};\n\npbxProject.prototype.addTargetDependency = function (target, dependencyTargets) {\n  if (!target) return undefined;\n  var nativeTargets = this.pbxNativeTargetSection();\n  if (typeof nativeTargets[target] == \"undefined\") throw new Error(\"Invalid target: \" + target);\n\n  for (var index = 0; index < dependencyTargets.length; index++) {\n    var dependencyTarget = dependencyTargets[index];\n    if (typeof nativeTargets[dependencyTarget] == \"undefined\") throw new Error(\"Invalid target: \" + dependencyTarget);\n  }\n\n  var pbxTargetDependency = 'PBXTargetDependency',\n      pbxContainerItemProxy = 'PBXContainerItemProxy',\n      pbxTargetDependencySection = this.hash.project.objects[pbxTargetDependency],\n      pbxContainerItemProxySection = this.hash.project.objects[pbxContainerItemProxy];\n\n  for (var index = 0; index < dependencyTargets.length; index++) {\n    var dependencyTargetUuid = dependencyTargets[index],\n        dependencyTargetCommentKey = f(\"%s_comment\", dependencyTargetUuid),\n        targetDependencyUuid = this.generateUuid(),\n        targetDependencyCommentKey = f(\"%s_comment\", targetDependencyUuid),\n        itemProxyUuid = this.generateUuid(),\n        itemProxyCommentKey = f(\"%s_comment\", itemProxyUuid),\n        itemProxy = {\n      isa: pbxContainerItemProxy,\n      containerPortal: this.hash.project['rootObject'],\n      containerPortal_comment: this.hash.project['rootObject_comment'],\n      proxyType: 1,\n      remoteGlobalIDString: dependencyTargetUuid,\n      remoteInfo: nativeTargets[dependencyTargetUuid].name\n    },\n        targetDependency = {\n      isa: pbxTargetDependency,\n      target: dependencyTargetUuid,\n      target_comment: nativeTargets[dependencyTargetCommentKey],\n      targetProxy: itemProxyUuid,\n      targetProxy_comment: pbxContainerItemProxy\n    };\n\n    if (pbxContainerItemProxySection && pbxTargetDependencySection) {\n      pbxContainerItemProxySection[itemProxyUuid] = itemProxy;\n      pbxContainerItemProxySection[itemProxyCommentKey] = pbxContainerItemProxy;\n      pbxTargetDependencySection[targetDependencyUuid] = targetDependency;\n      pbxTargetDependencySection[targetDependencyCommentKey] = pbxTargetDependency;\n      nativeTargets[target].dependencies.push({\n        value: targetDependencyUuid,\n        comment: pbxTargetDependency\n      });\n    }\n  }\n\n  return {\n    uuid: target,\n    target: nativeTargets[target]\n  };\n};\n\npbxProject.prototype.addBuildPhase = function (filePathsArray, buildPhaseType, comment, target, optionsOrFolderType, subfolderPath) {\n  var buildPhaseSection,\n      fileReferenceSection = this.pbxFileReferenceSection(),\n      buildFileSection = this.pbxBuildFileSection(),\n      buildPhaseUuid = this.generateUuid(),\n      buildPhaseTargetUuid = target || this.getFirstTarget().uuid,\n      commentKey = f(\"%s_comment\", buildPhaseUuid),\n      buildPhase = {\n    isa: buildPhaseType,\n    buildActionMask: 2147483647,\n    files: [],\n    runOnlyForDeploymentPostprocessing: 0\n  },\n      filePathToBuildFile = {};\n\n  if (buildPhaseType === 'PBXCopyFilesBuildPhase') {\n    buildPhase = pbxCopyFilesBuildPhaseObj(buildPhase, optionsOrFolderType, subfolderPath, comment);\n  } else if (buildPhaseType === 'PBXShellScriptBuildPhase') {\n    buildPhase = pbxShellScriptBuildPhaseObj(buildPhase, optionsOrFolderType, comment);\n  }\n\n  if (!this.hash.project.objects[buildPhaseType]) {\n    this.hash.project.objects[buildPhaseType] = new Object();\n  }\n\n  if (!this.hash.project.objects[buildPhaseType][buildPhaseUuid]) {\n    this.hash.project.objects[buildPhaseType][buildPhaseUuid] = buildPhase;\n    this.hash.project.objects[buildPhaseType][commentKey] = comment;\n  }\n\n  if (this.hash.project.objects['PBXNativeTarget'][buildPhaseTargetUuid]['buildPhases']) {\n    this.hash.project.objects['PBXNativeTarget'][buildPhaseTargetUuid]['buildPhases'].push({\n      value: buildPhaseUuid,\n      comment: comment\n    });\n  }\n\n  for (var key in buildFileSection) {\n    if (!COMMENT_KEY.test(key)) continue;\n    var buildFileKey = key.split(COMMENT_KEY)[0],\n        buildFile = buildFileSection[buildFileKey];\n    fileReference = fileReferenceSection[buildFile.fileRef];\n    if (!fileReference) continue;\n    var pbxFileObj = new pbxFile(fileReference.path);\n    filePathToBuildFile[fileReference.path] = {\n      uuid: buildFileKey,\n      basename: pbxFileObj.basename,\n      group: pbxFileObj.group\n    };\n  }\n\n  for (var index = 0; index < filePathsArray.length; index++) {\n    var filePath = filePathsArray[index],\n        filePathQuoted = \"\\\"\" + filePath + \"\\\"\",\n        file = new pbxFile(filePath);\n\n    if (filePathToBuildFile[filePath]) {\n      buildPhase.files.push(pbxBuildPhaseObj(filePathToBuildFile[filePath]));\n      continue;\n    } else if (filePathToBuildFile[filePathQuoted]) {\n      buildPhase.files.push(pbxBuildPhaseObj(filePathToBuildFile[filePathQuoted]));\n      continue;\n    }\n\n    file.uuid = this.generateUuid();\n    file.fileRef = this.generateUuid();\n    this.addToPbxFileReferenceSection(file);\n    this.addToPbxBuildFileSection(file);\n    buildPhase.files.push(pbxBuildPhaseObj(file));\n  }\n\n  if (buildPhaseSection) {\n    buildPhaseSection[buildPhaseUuid] = buildPhase;\n    buildPhaseSection[commentKey] = comment;\n  }\n\n  return {\n    uuid: buildPhaseUuid,\n    buildPhase: buildPhase\n  };\n};\n\npbxProject.prototype.pbxProjectSection = function () {\n  return this.hash.project.objects['PBXProject'];\n};\n\npbxProject.prototype.pbxBuildFileSection = function () {\n  return this.hash.project.objects['PBXBuildFile'];\n};\n\npbxProject.prototype.pbxXCBuildConfigurationSection = function () {\n  return this.hash.project.objects['XCBuildConfiguration'];\n};\n\npbxProject.prototype.pbxFileReferenceSection = function () {\n  return this.hash.project.objects['PBXFileReference'];\n};\n\npbxProject.prototype.pbxNativeTargetSection = function () {\n  return this.hash.project.objects['PBXNativeTarget'];\n};\n\npbxProject.prototype.xcVersionGroupSection = function () {\n  if (typeof this.hash.project.objects['XCVersionGroup'] !== 'object') {\n    this.hash.project.objects['XCVersionGroup'] = {};\n  }\n\n  return this.hash.project.objects['XCVersionGroup'];\n};\n\npbxProject.prototype.pbxXCConfigurationList = function () {\n  return this.hash.project.objects['XCConfigurationList'];\n};\n\npbxProject.prototype.pbxGroupByName = function (name) {\n  var groups = this.hash.project.objects['PBXGroup'],\n      key,\n      groupKey;\n\n  for (key in groups) {\n    if (!COMMENT_KEY.test(key)) continue;\n\n    if (groups[key] == name) {\n      groupKey = key.split(COMMENT_KEY)[0];\n      return groups[groupKey];\n    }\n  }\n\n  return null;\n};\n\npbxProject.prototype.pbxTargetByName = function (name) {\n  return this.pbxItemByComment(name, 'PBXNativeTarget');\n};\n\npbxProject.prototype.findTargetKey = function (name) {\n  var targets = this.hash.project.objects['PBXNativeTarget'];\n\n  for (var key in targets) {\n    if (COMMENT_KEY.test(key)) continue;\n    var target = targets[key];\n\n    if (target.name === name) {\n      return key;\n    }\n  }\n\n  return null;\n};\n\npbxProject.prototype.pbxItemByComment = function (name, pbxSectionName) {\n  var section = this.hash.project.objects[pbxSectionName],\n      key,\n      itemKey;\n\n  for (key in section) {\n    if (!COMMENT_KEY.test(key)) continue;\n\n    if (section[key] == name) {\n      itemKey = key.split(COMMENT_KEY)[0];\n      return section[itemKey];\n    }\n  }\n\n  return null;\n};\n\npbxProject.prototype.pbxSourcesBuildPhaseObj = function (target) {\n  return this.buildPhaseObject('PBXSourcesBuildPhase', 'Sources', target);\n};\n\npbxProject.prototype.pbxResourcesBuildPhaseObj = function (target) {\n  return this.buildPhaseObject('PBXResourcesBuildPhase', 'Resources', target);\n};\n\npbxProject.prototype.pbxFrameworksBuildPhaseObj = function (target) {\n  return this.buildPhaseObject('PBXFrameworksBuildPhase', 'Frameworks', target);\n};\n\npbxProject.prototype.pbxEmbedFrameworksBuildPhaseObj = function (target) {\n  return this.buildPhaseObject('PBXCopyFilesBuildPhase', 'Embed Frameworks', target);\n};\n\npbxProject.prototype.buildPhase = function (group, target) {\n  if (!target) return undefined;\n  var nativeTargets = this.pbxNativeTargetSection();\n  if (typeof nativeTargets[target] == \"undefined\") throw new Error(\"Invalid target: \" + target);\n  var nativeTarget = nativeTargets[target];\n  var buildPhases = nativeTarget.buildPhases;\n\n  for (var i in buildPhases) {\n    var buildPhase = buildPhases[i];\n    if (buildPhase.comment == group) return buildPhase.value + \"_comment\";\n  }\n};\n\npbxProject.prototype.buildPhaseObject = function (name, group, target) {\n  var section = this.hash.project.objects[name],\n      obj,\n      sectionKey,\n      key;\n  var buildPhase = this.buildPhase(group, target);\n\n  for (key in section) {\n    if (!COMMENT_KEY.test(key)) continue;\n    if (buildPhase && buildPhase != key) continue;\n\n    if (section[key] == group) {\n      sectionKey = key.split(COMMENT_KEY)[0];\n      return section[sectionKey];\n    }\n  }\n\n  return null;\n};\n\npbxProject.prototype.addBuildProperty = function (prop, value, build_name) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      key,\n      configuration;\n\n  for (key in configurations) {\n    configuration = configurations[key];\n\n    if (!build_name || configuration.name === build_name) {\n      configuration.buildSettings[prop] = value;\n    }\n  }\n};\n\npbxProject.prototype.removeBuildProperty = function (prop, build_name) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      key,\n      configuration;\n\n  for (key in configurations) {\n    configuration = configurations[key];\n\n    if (configuration.buildSettings[prop] && !build_name || configuration.name === build_name) {\n      delete configuration.buildSettings[prop];\n    }\n  }\n};\n\npbxProject.prototype.updateBuildProperty = function (prop, value, build, targetName) {\n  var validConfigs = [];\n\n  if (targetName) {\n    var target = this.pbxTargetByName(targetName);\n    var targetBuildConfigs = target && target.buildConfigurationList;\n    var xcConfigList = this.pbxXCConfigurationList();\n\n    for (var _configName in xcConfigList) {\n      if (!COMMENT_KEY.test(_configName) && targetBuildConfigs === _configName) {\n        var buildVariants = xcConfigList[_configName].buildConfigurations;\n\n        for (var _iterator = _createForOfIteratorHelperLoose(buildVariants), _step; !(_step = _iterator()).done;) {\n          var item = _step.value;\n          validConfigs.push(item.value);\n        }\n\n        break;\n      }\n    }\n  }\n\n  var configs = this.pbxXCBuildConfigurationSection();\n\n  for (var configName in configs) {\n    if (!COMMENT_KEY.test(configName)) {\n      if (targetName && !validConfigs.includes(configName)) continue;\n      var config = configs[configName];\n\n      if (build && config.name === build || !build) {\n        config.buildSettings[prop] = value;\n      }\n    }\n  }\n};\n\npbxProject.prototype.updateProductName = function (name) {\n  this.updateBuildProperty('PRODUCT_NAME', '\"' + name + '\"');\n};\n\npbxProject.prototype.removeFromFrameworkSearchPaths = function (file) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      INHERITED = '\"$(inherited)\"',\n      SEARCH_PATHS = 'FRAMEWORK_SEARCH_PATHS',\n      config,\n      buildSettings,\n      searchPaths;\n  var new_path = searchPathForFile(file, this);\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n    if (unquote(buildSettings['PRODUCT_NAME']) != this.productName) continue;\n    searchPaths = buildSettings[SEARCH_PATHS];\n\n    if (searchPaths && Array.isArray(searchPaths)) {\n      var matches = searchPaths.filter(function (p) {\n        return p.indexOf(new_path) > -1;\n      });\n      matches.forEach(function (m) {\n        var idx = searchPaths.indexOf(m);\n        searchPaths.splice(idx, 1);\n      });\n    }\n  }\n};\n\npbxProject.prototype.addToFrameworkSearchPaths = function (file) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      INHERITED = '\"$(inherited)\"',\n      config,\n      buildSettings,\n      searchPaths;\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n    if (unquote(buildSettings['PRODUCT_NAME']) != this.productName) continue;\n\n    if (!buildSettings['FRAMEWORK_SEARCH_PATHS'] || buildSettings['FRAMEWORK_SEARCH_PATHS'] === INHERITED) {\n      buildSettings['FRAMEWORK_SEARCH_PATHS'] = [INHERITED];\n    }\n\n    buildSettings['FRAMEWORK_SEARCH_PATHS'].push(searchPathForFile(file, this));\n  }\n};\n\npbxProject.prototype.removeFromLibrarySearchPaths = function (file) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      INHERITED = '\"$(inherited)\"',\n      SEARCH_PATHS = 'LIBRARY_SEARCH_PATHS',\n      config,\n      buildSettings,\n      searchPaths;\n  var new_path = searchPathForFile(file, this);\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n    if (unquote(buildSettings['PRODUCT_NAME']) != this.productName) continue;\n    searchPaths = buildSettings[SEARCH_PATHS];\n\n    if (searchPaths && Array.isArray(searchPaths)) {\n      var matches = searchPaths.filter(function (p) {\n        return p.indexOf(new_path) > -1;\n      });\n      matches.forEach(function (m) {\n        var idx = searchPaths.indexOf(m);\n        searchPaths.splice(idx, 1);\n      });\n    }\n  }\n};\n\npbxProject.prototype.addToLibrarySearchPaths = function (file) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      INHERITED = '\"$(inherited)\"',\n      config,\n      buildSettings,\n      searchPaths;\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n    if (unquote(buildSettings['PRODUCT_NAME']) != this.productName) continue;\n\n    if (!buildSettings['LIBRARY_SEARCH_PATHS'] || buildSettings['LIBRARY_SEARCH_PATHS'] === INHERITED) {\n      buildSettings['LIBRARY_SEARCH_PATHS'] = [INHERITED];\n    }\n\n    if (typeof file === 'string') {\n      buildSettings['LIBRARY_SEARCH_PATHS'].push(file);\n    } else {\n      buildSettings['LIBRARY_SEARCH_PATHS'].push(searchPathForFile(file, this));\n    }\n  }\n};\n\npbxProject.prototype.removeFromHeaderSearchPaths = function (file) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      INHERITED = '\"$(inherited)\"',\n      SEARCH_PATHS = 'HEADER_SEARCH_PATHS',\n      config,\n      buildSettings,\n      searchPaths;\n  var new_path = searchPathForFile(file, this);\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n    if (unquote(buildSettings['PRODUCT_NAME']) != this.productName) continue;\n\n    if (buildSettings[SEARCH_PATHS]) {\n      var matches = buildSettings[SEARCH_PATHS].filter(function (p) {\n        return p.indexOf(new_path) > -1;\n      });\n      matches.forEach(function (m) {\n        var idx = buildSettings[SEARCH_PATHS].indexOf(m);\n        buildSettings[SEARCH_PATHS].splice(idx, 1);\n      });\n    }\n  }\n};\n\npbxProject.prototype.addToHeaderSearchPaths = function (file) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      INHERITED = '\"$(inherited)\"',\n      config,\n      buildSettings,\n      searchPaths;\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n    if (unquote(buildSettings['PRODUCT_NAME']) != this.productName) continue;\n\n    if (!buildSettings['HEADER_SEARCH_PATHS']) {\n      buildSettings['HEADER_SEARCH_PATHS'] = [INHERITED];\n    }\n\n    if (typeof file === 'string') {\n      buildSettings['HEADER_SEARCH_PATHS'].push(file);\n    } else {\n      buildSettings['HEADER_SEARCH_PATHS'].push(searchPathForFile(file, this));\n    }\n  }\n};\n\npbxProject.prototype.addToOtherLinkerFlags = function (flag) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      INHERITED = '\"$(inherited)\"',\n      OTHER_LDFLAGS = 'OTHER_LDFLAGS',\n      config,\n      buildSettings;\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n    if (unquote(buildSettings['PRODUCT_NAME']) != this.productName) continue;\n\n    if (!buildSettings[OTHER_LDFLAGS] || buildSettings[OTHER_LDFLAGS] === INHERITED) {\n      buildSettings[OTHER_LDFLAGS] = [INHERITED];\n    }\n\n    buildSettings[OTHER_LDFLAGS].push(flag);\n  }\n};\n\npbxProject.prototype.removeFromOtherLinkerFlags = function (flag) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      OTHER_LDFLAGS = 'OTHER_LDFLAGS',\n      config,\n      buildSettings;\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n\n    if (unquote(buildSettings['PRODUCT_NAME']) != this.productName) {\n      continue;\n    }\n\n    if (buildSettings[OTHER_LDFLAGS]) {\n      var matches = buildSettings[OTHER_LDFLAGS].filter(function (p) {\n        return p.indexOf(flag) > -1;\n      });\n      matches.forEach(function (m) {\n        var idx = buildSettings[OTHER_LDFLAGS].indexOf(m);\n        buildSettings[OTHER_LDFLAGS].splice(idx, 1);\n      });\n    }\n  }\n};\n\npbxProject.prototype.addToBuildSettings = function (buildSetting, value) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      config,\n      buildSettings;\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n    buildSettings[buildSetting] = value;\n  }\n};\n\npbxProject.prototype.removeFromBuildSettings = function (buildSetting) {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      config,\n      buildSettings;\n\n  for (config in configurations) {\n    buildSettings = configurations[config].buildSettings;\n\n    if (buildSettings[buildSetting]) {\n      delete buildSettings[buildSetting];\n    }\n  }\n};\n\npbxProject.prototype.__defineGetter__(\"productName\", function () {\n  var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n      config,\n      productName;\n\n  for (config in configurations) {\n    productName = configurations[config].buildSettings['PRODUCT_NAME'];\n\n    if (productName) {\n      return unquote(productName);\n    }\n  }\n});\n\npbxProject.prototype.hasFile = function (filePath) {\n  var files = nonComments(this.pbxFileReferenceSection()),\n      file,\n      id;\n\n  for (id in files) {\n    file = files[id];\n\n    if (file.path == filePath || file.path == '\"' + filePath + '\"') {\n      return file;\n    }\n  }\n\n  return false;\n};\n\npbxProject.prototype.addTarget = function (name, type, subfolder, bundleId) {\n  var targetUuid = this.generateUuid(),\n      targetType = type,\n      targetSubfolder = subfolder || name,\n      targetName = name.trim(),\n      targetBundleId = bundleId;\n\n  if (!targetName) {\n    throw new Error(\"Target name missing.\");\n  }\n\n  if (!targetType) {\n    throw new Error(\"Target type missing.\");\n  }\n\n  if (!producttypeForTargettype(targetType)) {\n    throw new Error(\"Target type invalid: \" + targetType);\n  }\n\n  var buildConfigurationsList = [{\n    name: 'Debug',\n    isa: 'XCBuildConfiguration',\n    buildSettings: {\n      GCC_PREPROCESSOR_DEFINITIONS: ['\"DEBUG=1\"', '\"$(inherited)\"'],\n      INFOPLIST_FILE: '\"' + path.join(targetSubfolder, targetSubfolder + '-Info.plist' + '\"'),\n      LD_RUNPATH_SEARCH_PATHS: '\"$(inherited) @executable_path/Frameworks @executable_path/../../Frameworks\"',\n      PRODUCT_NAME: '\"' + targetName + '\"',\n      SKIP_INSTALL: 'YES'\n    }\n  }, {\n    name: 'Release',\n    isa: 'XCBuildConfiguration',\n    buildSettings: {\n      INFOPLIST_FILE: '\"' + path.join(targetSubfolder, targetSubfolder + '-Info.plist' + '\"'),\n      LD_RUNPATH_SEARCH_PATHS: '\"$(inherited) @executable_path/Frameworks @executable_path/../../Frameworks\"',\n      PRODUCT_NAME: '\"' + targetName + '\"',\n      SKIP_INSTALL: 'YES'\n    }\n  }];\n\n  if (targetBundleId) {\n    buildConfigurationsList = buildConfigurationsList.map(function (elem) {\n      elem.buildSettings.PRODUCT_BUNDLE_IDENTIFIER = '\"' + targetBundleId + '\"';\n      return elem;\n    });\n  }\n\n  var buildConfigurations = this.addXCConfigurationList(buildConfigurationsList, 'Release', 'Build configuration list for PBXNativeTarget \"' + targetName + '\"');\n  var productName = targetName,\n      productType = producttypeForTargettype(targetType),\n      productFileType = filetypeForProducttype(productType),\n      productFile = this.addProductFile(productName, {\n    group: 'Copy Files',\n    'target': targetUuid,\n    'explicitFileType': productFileType\n  }),\n      productFileName = productFile.basename;\n  this.addToPbxBuildFileSection(productFile);\n  var target = {\n    uuid: targetUuid,\n    pbxNativeTarget: {\n      isa: 'PBXNativeTarget',\n      name: '\"' + targetName + '\"',\n      productName: '\"' + targetName + '\"',\n      productReference: productFile.fileRef,\n      productType: '\"' + producttypeForTargettype(targetType) + '\"',\n      buildConfigurationList: buildConfigurations.uuid,\n      buildPhases: [],\n      buildRules: [],\n      dependencies: []\n    }\n  };\n  this.addToPbxNativeTargetSection(target);\n\n  if (targetType === 'app_extension') {\n    this.addBuildPhase([], 'PBXCopyFilesBuildPhase', 'Copy Files', this.getFirstTarget().uuid, targetType);\n    this.addToPbxCopyfilesBuildPhase(productFile);\n  } else if (targetType === 'watch2_app') {\n    this.addBuildPhase([targetName + '.app'], 'PBXCopyFilesBuildPhase', 'Embed Watch Content', this.getFirstTarget().uuid, targetType, '\"$(CONTENTS_FOLDER_PATH)/Watch\"');\n  } else if (targetType === 'watch2_extension') {\n    var watch2Target = this.getTarget(producttypeForTargettype('watch2_app'));\n\n    if (watch2Target) {\n      this.addBuildPhase([targetName + '.appex'], 'PBXCopyFilesBuildPhase', 'Embed App Extensions', watch2Target.uuid, targetType);\n    }\n  }\n\n  this.addToPbxProjectSection(target);\n\n  if (targetType === 'watch2_extension') {\n    var watch2Target = this.getTarget(producttypeForTargettype('watch2_app'));\n\n    if (watch2Target) {\n      this.addTargetDependency(watch2Target.uuid, [target.uuid]);\n    }\n  } else {\n    this.addTargetDependency(this.getFirstTarget().uuid, [target.uuid]);\n  }\n\n  return target;\n};\n\nfunction pbxBuildFileObj(file) {\n  var obj = Object.create(null);\n  obj.isa = 'PBXBuildFile';\n  obj.fileRef = file.fileRef;\n  obj.fileRef_comment = file.basename;\n  if (file.settings) obj.settings = file.settings;\n  return obj;\n}\n\nfunction pbxFileReferenceObj(file) {\n  var fileObject = {\n    isa: \"PBXFileReference\",\n    name: \"\\\"\" + file.basename + \"\\\"\",\n    path: \"\\\"\" + file.path.replace(/\\\\/g, '/') + \"\\\"\",\n    sourceTree: file.sourceTree,\n    fileEncoding: file.fileEncoding,\n    lastKnownFileType: file.lastKnownFileType,\n    explicitFileType: file.explicitFileType,\n    includeInIndex: file.includeInIndex\n  };\n  return fileObject;\n}\n\nfunction pbxGroupChild(file) {\n  var obj = Object.create(null);\n  obj.value = file.fileRef;\n  obj.comment = file.basename;\n  return obj;\n}\n\nfunction pbxBuildPhaseObj(file) {\n  var obj = Object.create(null);\n  obj.value = file.uuid;\n  obj.comment = longComment(file);\n  return obj;\n}\n\nfunction pbxCopyFilesBuildPhaseObj(obj, folderType, subfolderPath, phaseName) {\n  var DESTINATION_BY_TARGETTYPE = {\n    application: 'wrapper',\n    app_extension: 'plugins',\n    bundle: 'wrapper',\n    command_line_tool: 'wrapper',\n    dynamic_library: 'products_directory',\n    framework: 'shared_frameworks',\n    frameworks: 'frameworks',\n    static_library: 'products_directory',\n    unit_test_bundle: 'wrapper',\n    watch_app: 'wrapper',\n    watch2_app: 'products_directory',\n    watch_extension: 'plugins',\n    watch2_extension: 'plugins'\n  };\n  var SUBFOLDERSPEC_BY_DESTINATION = {\n    absolute_path: 0,\n    executables: 6,\n    frameworks: 10,\n    java_resources: 15,\n    plugins: 13,\n    products_directory: 16,\n    resources: 7,\n    shared_frameworks: 11,\n    shared_support: 12,\n    wrapper: 1,\n    xpc_services: 0\n  };\n  obj.name = '\"' + phaseName + '\"';\n  obj.dstPath = subfolderPath || '\"\"';\n  obj.dstSubfolderSpec = SUBFOLDERSPEC_BY_DESTINATION[DESTINATION_BY_TARGETTYPE[folderType]];\n  return obj;\n}\n\nfunction pbxShellScriptBuildPhaseObj(obj, options, phaseName) {\n  obj.name = '\"' + phaseName + '\"';\n  obj.inputPaths = options.inputPaths || [];\n  obj.outputPaths = options.outputPaths || [];\n  obj.shellPath = options.shellPath;\n  obj.shellScript = '\"' + options.shellScript.replace(/\"/g, '\\\\\"') + '\"';\n  return obj;\n}\n\nfunction pbxBuildFileComment(file) {\n  return longComment(file);\n}\n\nfunction pbxFileReferenceComment(file) {\n  return file.basename || path.basename(file.path);\n}\n\nfunction pbxNativeTargetComment(target) {\n  return target.name;\n}\n\nfunction longComment(file) {\n  return f(\"%s in %s\", file.basename, file.group);\n}\n\nfunction correctForPluginsPath(file, project) {\n  return correctForPath(file, project, 'Plugins');\n}\n\nfunction correctForResourcesPath(file, project) {\n  return correctForPath(file, project, 'Resources');\n}\n\nfunction correctForFrameworksPath(file, project) {\n  return correctForPath(file, project, 'Frameworks');\n}\n\nfunction correctForPath(file, project, group) {\n  var r_group_dir = new RegExp('^' + group + '[\\\\\\\\/]');\n  if (project.pbxGroupByName(group).path) file.path = file.path.replace(r_group_dir, '');\n  return file;\n}\n\nfunction searchPathForFile(file, proj) {\n  var plugins = proj.pbxGroupByName('Plugins'),\n      pluginsPath = plugins ? plugins.path : null,\n      fileDir = path.dirname(file.path);\n\n  if (fileDir == '.') {\n    fileDir = '';\n  } else {\n    fileDir = '/' + fileDir;\n  }\n\n  if (file.plugin && pluginsPath) {\n    return '\"\\\\\"$(SRCROOT)/' + unquote(pluginsPath) + '\\\\\"\"';\n  } else if (file.customFramework && file.dirname) {\n    return '\"\\\\\"' + file.dirname + '\\\\\"\"';\n  } else {\n    return '\"\\\\\"$(SRCROOT)/' + proj.productName + fileDir + '\\\\\"\"';\n  }\n}\n\nfunction nonComments(obj) {\n  var keys = Object.keys(obj),\n      newObj = {},\n      i = 0;\n\n  for (i; i < keys.length; i++) {\n    if (!COMMENT_KEY.test(keys[i])) {\n      newObj[keys[i]] = obj[keys[i]];\n    }\n  }\n\n  return newObj;\n}\n\nfunction unquote(str) {\n  if (str) return str.replace(/^\"(.*)\"$/, \"$1\");\n}\n\nfunction buildPhaseNameForIsa(isa) {\n  BUILDPHASENAME_BY_ISA = {\n    PBXCopyFilesBuildPhase: 'Copy Files',\n    PBXResourcesBuildPhase: 'Resources',\n    PBXSourcesBuildPhase: 'Sources',\n    PBXFrameworksBuildPhase: 'Frameworks'\n  };\n  return BUILDPHASENAME_BY_ISA[isa];\n}\n\nfunction producttypeForTargettype(targetType) {\n  PRODUCTTYPE_BY_TARGETTYPE = {\n    application: 'com.apple.product-type.application',\n    app_extension: 'com.apple.product-type.app-extension',\n    bundle: 'com.apple.product-type.bundle',\n    command_line_tool: 'com.apple.product-type.tool',\n    dynamic_library: 'com.apple.product-type.library.dynamic',\n    framework: 'com.apple.product-type.framework',\n    static_library: 'com.apple.product-type.library.static',\n    unit_test_bundle: 'com.apple.product-type.bundle.unit-test',\n    watch_app: 'com.apple.product-type.application.watchapp',\n    watch2_app: 'com.apple.product-type.application.watchapp2',\n    watch_extension: 'com.apple.product-type.watchkit-extension',\n    watch2_extension: 'com.apple.product-type.watchkit2-extension'\n  };\n  return PRODUCTTYPE_BY_TARGETTYPE[targetType];\n}\n\nfunction filetypeForProducttype(productType) {\n  FILETYPE_BY_PRODUCTTYPE = {\n    'com.apple.product-type.application': '\"wrapper.application\"',\n    'com.apple.product-type.app-extension': '\"wrapper.app-extension\"',\n    'com.apple.product-type.bundle': '\"wrapper.plug-in\"',\n    'com.apple.product-type.tool': '\"compiled.mach-o.dylib\"',\n    'com.apple.product-type.library.dynamic': '\"compiled.mach-o.dylib\"',\n    'com.apple.product-type.framework': '\"wrapper.framework\"',\n    'com.apple.product-type.library.static': '\"archive.ar\"',\n    'com.apple.product-type.bundle.unit-test': '\"wrapper.cfbundle\"',\n    'com.apple.product-type.application.watchapp': '\"wrapper.application\"',\n    'com.apple.product-type.application.watchapp2': '\"wrapper.application\"',\n    'com.apple.product-type.watchkit-extension': '\"wrapper.app-extension\"',\n    'com.apple.product-type.watchkit2-extension': '\"wrapper.app-extension\"'\n  };\n  return FILETYPE_BY_PRODUCTTYPE[productType];\n}\n\npbxProject.prototype.getFirstProject = function () {\n  var pbxProjectContainer = this.pbxProjectSection();\n  var firstProjectUuid = Object.keys(pbxProjectContainer)[0];\n  var firstProject = pbxProjectContainer[firstProjectUuid];\n  return {\n    uuid: firstProjectUuid,\n    firstProject: firstProject\n  };\n};\n\npbxProject.prototype.getFirstTarget = function () {\n  var firstTargetUuid = this.getFirstProject()['firstProject']['targets'][0].value;\n  var firstTarget = this.pbxNativeTargetSection()[firstTargetUuid];\n  return {\n    uuid: firstTargetUuid,\n    firstTarget: firstTarget\n  };\n};\n\npbxProject.prototype.getTarget = function (productType) {\n  var targets = this.getFirstProject()['firstProject']['targets'];\n  var nativeTargets = this.pbxNativeTargetSection();\n\n  for (var i = 0; i < targets.length; i++) {\n    var target = targets[i];\n    var targetUuid = target.value;\n\n    if (nativeTargets[targetUuid]['productType'] === '\"' + productType + '\"') {\n      var nativeTarget = this.pbxNativeTargetSection()[targetUuid];\n      return {\n        uuid: targetUuid,\n        target: nativeTarget\n      };\n    }\n  }\n\n  return null;\n};\n\npbxProject.prototype.addToPbxGroupType = function (file, groupKey, groupType) {\n  var group = this.getPBXGroupByKeyAndType(groupKey, groupType);\n\n  if (group && group.children !== undefined) {\n    if (typeof file === 'string') {\n      var childGroup = {\n        value: file\n      };\n\n      if (this.getPBXGroupByKey(file)) {\n        childGroup.comment = this.getPBXGroupByKey(file).name;\n      } else if (this.getPBXVariantGroupByKey(file)) {\n        childGroup.comment = this.getPBXVariantGroupByKey(file).name;\n      }\n\n      group.children.push(childGroup);\n    } else {\n      group.children.push(pbxGroupChild(file));\n    }\n  }\n};\n\npbxProject.prototype.addToPbxVariantGroup = function (file, groupKey) {\n  this.addToPbxGroupType(file, groupKey, 'PBXVariantGroup');\n};\n\npbxProject.prototype.addToPbxGroup = function (file, groupKey) {\n  this.addToPbxGroupType(file, groupKey, 'PBXGroup');\n};\n\npbxProject.prototype.pbxCreateGroupWithType = function (name, pathName, groupType) {\n  var model = {\n    isa: '\"' + groupType + '\"',\n    children: [],\n    name: name,\n    sourceTree: '\"<group>\"'\n  };\n  if (pathName) model.path = pathName;\n  var key = this.generateUuid();\n  var commendId = key + '_comment';\n  var groups = this.hash.project.objects[groupType];\n\n  if (!groups) {\n    groups = this.hash.project.objects[groupType] = new Object();\n  }\n\n  groups[commendId] = name;\n  groups[key] = model;\n  return key;\n};\n\npbxProject.prototype.pbxCreateVariantGroup = function (name) {\n  return this.pbxCreateGroupWithType(name, undefined, 'PBXVariantGroup');\n};\n\npbxProject.prototype.pbxCreateGroup = function (name, pathName) {\n  return this.pbxCreateGroupWithType(name, pathName, 'PBXGroup');\n};\n\npbxProject.prototype.removeFromPbxGroupAndType = function (file, groupKey, groupType) {\n  var group = this.getPBXGroupByKeyAndType(groupKey, groupType);\n\n  if (group) {\n    var groupChildren = group.children,\n        i;\n\n    for (i in groupChildren) {\n      if (pbxGroupChild(file).value == groupChildren[i].value && pbxGroupChild(file).comment == groupChildren[i].comment) {\n        groupChildren.splice(i, 1);\n        break;\n      }\n    }\n  }\n};\n\npbxProject.prototype.removeFromPbxGroup = function (file, groupKey) {\n  this.removeFromPbxGroupAndType(file, groupKey, 'PBXGroup');\n};\n\npbxProject.prototype.removeFromPbxVariantGroup = function (file, groupKey) {\n  this.removeFromPbxGroupAndType(file, groupKey, 'PBXVariantGroup');\n};\n\npbxProject.prototype.getPBXGroupByKeyAndType = function (key, groupType) {\n  return this.hash.project.objects[groupType][key];\n};\n\npbxProject.prototype.getPBXGroupByKey = function (key) {\n  return this.hash.project.objects['PBXGroup'][key];\n};\n\npbxProject.prototype.getPBXVariantGroupByKey = function (key) {\n  return this.hash.project.objects['PBXVariantGroup'][key];\n};\n\npbxProject.prototype.findPBXGroupKeyAndType = function (criteria, groupType) {\n  var groups = this.hash.project.objects[groupType];\n  var target;\n\n  for (var key in groups) {\n    if (COMMENT_KEY.test(key)) continue;\n    var group = groups[key];\n\n    if (criteria && criteria.path && criteria.name) {\n      if (criteria.path === group.path && criteria.name === group.name) {\n        target = key;\n        break;\n      }\n    } else if (criteria && criteria.path) {\n      if (criteria.path === group.path) {\n        target = key;\n        break;\n      }\n    } else if (criteria && criteria.name) {\n      if (criteria.name === group.name) {\n        target = key;\n        break;\n      }\n    }\n  }\n\n  return target;\n};\n\npbxProject.prototype.findPBXGroupKey = function (criteria) {\n  return this.findPBXGroupKeyAndType(criteria, 'PBXGroup');\n};\n\npbxProject.prototype.findPBXVariantGroupKey = function (criteria) {\n  return this.findPBXGroupKeyAndType(criteria, 'PBXVariantGroup');\n};\n\npbxProject.prototype.addLocalizationVariantGroup = function (name) {\n  var groupKey = this.pbxCreateVariantGroup(name);\n  var resourceGroupKey = this.findPBXGroupKey({\n    name: 'Resources'\n  });\n  this.addToPbxGroup(groupKey, resourceGroupKey);\n  var localizationVariantGroup = {\n    uuid: this.generateUuid(),\n    fileRef: groupKey,\n    basename: name\n  };\n  this.addToPbxBuildFileSection(localizationVariantGroup);\n  this.addToPbxResourcesBuildPhase(localizationVariantGroup);\n  return localizationVariantGroup;\n};\n\npbxProject.prototype.addKnownRegion = function (name) {\n  if (!this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions']) {\n    this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'] = [];\n  }\n\n  if (!this.hasKnownRegion(name)) {\n    this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'].push(name);\n  }\n};\n\npbxProject.prototype.removeKnownRegion = function (name) {\n  var regions = this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'];\n\n  if (regions) {\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i] === name) {\n        regions.splice(i, 1);\n        break;\n      }\n    }\n\n    this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'] = regions;\n  }\n};\n\npbxProject.prototype.hasKnownRegion = function (name) {\n  var regions = this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'];\n\n  if (regions) {\n    for (var i in regions) {\n      if (regions[i] === name) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\npbxProject.prototype.getPBXObject = function (name) {\n  return this.hash.project.objects[name];\n};\n\npbxProject.prototype.addFile = function (path, group, opt) {\n  var file = new pbxFile(path, opt);\n  if (this.hasFile(file.path)) return null;\n  file.fileRef = this.generateUuid();\n  this.addToPbxFileReferenceSection(file);\n\n  if (this.getPBXGroupByKey(group)) {\n    this.addToPbxGroup(file, group);\n  } else if (this.getPBXVariantGroupByKey(group)) {\n    this.addToPbxVariantGroup(file, group);\n  }\n\n  return file;\n};\n\npbxProject.prototype.removeFile = function (path, group, opt) {\n  var file = new pbxFile(path, opt);\n  this.removeFromPbxFileReferenceSection(file);\n\n  if (this.getPBXGroupByKey(group)) {\n    this.removeFromPbxGroup(file, group);\n  } else if (this.getPBXVariantGroupByKey(group)) {\n    this.removeFromPbxVariantGroup(file, group);\n  }\n\n  return file;\n};\n\npbxProject.prototype.getBuildProperty = function (prop, build, targetName) {\n  var target;\n  var validConfigs = [];\n\n  if (targetName) {\n    var _target = this.pbxTargetByName(targetName);\n\n    var targetBuildConfigs = _target && _target.buildConfigurationList;\n    var xcConfigList = this.pbxXCConfigurationList();\n\n    for (var _configName2 in xcConfigList) {\n      if (!COMMENT_KEY.test(_configName2) && targetBuildConfigs === _configName2) {\n        var buildVariants = xcConfigList[_configName2].buildConfigurations;\n\n        for (var _iterator2 = _createForOfIteratorHelperLoose(buildVariants), _step2; !(_step2 = _iterator2()).done;) {\n          var item = _step2.value;\n          validConfigs.push(item.value);\n        }\n\n        break;\n      }\n    }\n  }\n\n  var configs = this.pbxXCBuildConfigurationSection();\n\n  for (var configName in configs) {\n    if (!COMMENT_KEY.test(configName)) {\n      if (targetName && !validConfigs.includes(configName)) continue;\n      var config = configs[configName];\n\n      if (build && config.name === build || build === undefined) {\n        if (config.buildSettings[prop] !== undefined) {\n          target = config.buildSettings[prop];\n        }\n      }\n    }\n  }\n\n  return target;\n};\n\npbxProject.prototype.getBuildConfigByName = function (name) {\n  var target = {};\n  var configs = this.pbxXCBuildConfigurationSection();\n\n  for (var configName in configs) {\n    if (!COMMENT_KEY.test(configName)) {\n      var config = configs[configName];\n\n      if (config.name === name) {\n        target[configName] = config;\n      }\n    }\n  }\n\n  return target;\n};\n\npbxProject.prototype.addDataModelDocument = function (filePath, group, opt) {\n  if (!group) {\n    group = 'Resources';\n  }\n\n  if (!this.getPBXGroupByKey(group)) {\n    group = this.findPBXGroupKey({\n      name: group\n    });\n  }\n\n  var file = new pbxFile(filePath, opt);\n  if (!file || this.hasFile(file.path)) return null;\n  file.fileRef = this.generateUuid();\n  this.addToPbxGroup(file, group);\n  if (!file) return false;\n  file.target = opt ? opt.target : undefined;\n  file.uuid = this.generateUuid();\n  this.addToPbxBuildFileSection(file);\n  this.addToPbxSourcesBuildPhase(file);\n  file.models = [];\n  var currentVersionName;\n  var modelFiles = fs.readdirSync(file.path);\n\n  for (var index in modelFiles) {\n    var modelFileName = modelFiles[index];\n    var modelFilePath = path.join(filePath, modelFileName);\n\n    if (modelFileName == '.xccurrentversion') {\n      currentVersionName = plist.readFileSync(modelFilePath)._XCCurrentVersionName;\n      continue;\n    }\n\n    var modelFile = new pbxFile(modelFilePath);\n    modelFile.fileRef = this.generateUuid();\n    this.addToPbxFileReferenceSection(modelFile);\n    file.models.push(modelFile);\n\n    if (currentVersionName && currentVersionName === modelFileName) {\n      file.currentModel = modelFile;\n    }\n  }\n\n  if (!file.currentModel) {\n    file.currentModel = file.models[0];\n  }\n\n  this.addToXcVersionGroupSection(file);\n  return file;\n};\n\npbxProject.prototype.addTargetAttribute = function (prop, value, target) {\n  var attributes = this.getFirstProject()['firstProject']['attributes'];\n\n  if (attributes['TargetAttributes'] === undefined) {\n    attributes['TargetAttributes'] = {};\n  }\n\n  target = target || this.getFirstTarget();\n\n  if (attributes['TargetAttributes'][target.uuid] === undefined) {\n    attributes['TargetAttributes'][target.uuid] = {};\n  }\n\n  attributes['TargetAttributes'][target.uuid][prop] = value;\n};\n\npbxProject.prototype.removeTargetAttribute = function (prop, target) {\n  var attributes = this.getFirstProject()['firstProject']['attributes'];\n  target = target || this.getFirstTarget();\n\n  if (attributes['TargetAttributes'] && attributes['TargetAttributes'][target.uuid]) {\n    delete attributes['TargetAttributes'][target.uuid][prop];\n  }\n};\n\nmodule.exports = pbxProject;","map":{"version":3,"sources":["/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/@expo/configure-splash-screen/node_modules/xcode/lib/pbxProject.js"],"names":["util","require","f","format","EventEmitter","path","uuid","fork","pbxWriter","pbxFile","fs","parser","plist","COMMENT_KEY","pbxProject","filename","filepath","resolve","inherits","prototype","parse","cb","worker","__dirname","on","msg","name","code","emit","hash","bind","parseSync","file_contents","readFileSync","writeSync","options","writer","allUuids","sections","project","objects","uuids","section","key","concat","Object","keys","filter","str","test","length","generateUuid","id","v4","replace","substr","toUpperCase","indexOf","addPluginFile","opt","file","plugin","correctForPluginsPath","hasFile","fileRef","addToPbxFileReferenceSection","addToPluginsPbxGroup","removePluginFile","removeFromPbxFileReferenceSection","removeFromPluginsPbxGroup","addProductFile","targetPath","includeInIndex","target","undefined","group","basename","addToProductsPbxGroup","removeProductFile","removeFromProductsPbxGroup","addSourceFile","addFile","addToPbxBuildFileSection","addToPbxSourcesBuildPhase","removeSourceFile","removeFile","removeFromPbxBuildFileSection","removeFromPbxSourcesBuildPhase","addHeaderFile","removeHeaderFile","addResourceFile","correctForResourcesPath","variantGroup","addToPbxResourcesBuildPhase","getPBXGroupByKey","addToPbxGroup","getPBXVariantGroupByKey","addToPbxVariantGroup","addToResourcesPbxGroup","removeResourceFile","removeFromPbxGroup","removeFromPbxVariantGroup","removeFromResourcesPbxGroup","removeFromPbxResourcesBuildPhase","addFramework","fpath","customFramework","link","embed","addToFrameworksPbxGroup","addToPbxFrameworksBuildPhase","addToFrameworkSearchPaths","embeddedFile","addToPbxEmbedFrameworksBuildPhase","removeFramework","removeFromFrameworksPbxGroup","removeFromPbxFrameworksBuildPhase","removeFromFrameworkSearchPaths","removeFromPbxEmbedFrameworksBuildPhase","addCopyfile","addToPbxCopyfilesBuildPhase","pbxCopyfilesBuildPhaseObj","buildPhaseObject","sources","files","push","pbxBuildPhaseObj","removeCopyfile","removeFromPbxCopyfilesBuildPhase","i","comment","longComment","splice","addStaticLibrary","addToLibrarySearchPaths","commentKey","pbxBuildFileSection","pbxBuildFileObj","pbxBuildFileComment","fileRef_comment","addPbxGroup","filePathsArray","sourceTree","groups","pbxGroupUuid","pbxGroup","isa","children","fileReferenceSection","pbxFileReferenceSection","filePathToReference","fileReferenceKey","split","fileReference","index","filePath","filePathQuoted","pbxGroupChild","removePbxGroup","groupName","itemKey","addToPbxProjectSection","newTarget","value","pbxNativeTargetComment","pbxNativeTarget","pbxProjectSection","getFirstProject","addToPbxNativeTargetSection","pbxNativeTargetSection","pbxFileReferenceObj","pbxFileReferenceComment","refObj","addToXcVersionGroupSection","models","currentModel","Error","xcVersionGroupSection","map","el","currentVersion","versionGroupType","pluginsGroup","pbxGroupByName","pluginsGroupChildren","pbxEmbedFrameworksBuildPhaseObj","productsGroup","productsGroupChildren","pbxSourcesBuildPhaseObj","pbxResourcesBuildPhaseObj","pbxFrameworksBuildPhaseObj","addXCConfigurationList","configurationObjectsArray","defaultConfigurationName","pbxBuildConfigurationSection","pbxXCBuildConfigurationSection","pbxXCConfigurationListSection","pbxXCConfigurationList","xcConfigurationListUuid","xcConfigurationList","buildConfigurations","defaultConfigurationIsVisible","configuration","configurationUuid","configurationCommentKey","addTargetDependency","dependencyTargets","nativeTargets","dependencyTarget","pbxTargetDependency","pbxContainerItemProxy","pbxTargetDependencySection","pbxContainerItemProxySection","dependencyTargetUuid","dependencyTargetCommentKey","targetDependencyUuid","targetDependencyCommentKey","itemProxyUuid","itemProxyCommentKey","itemProxy","containerPortal","containerPortal_comment","proxyType","remoteGlobalIDString","remoteInfo","targetDependency","target_comment","targetProxy","targetProxy_comment","dependencies","addBuildPhase","buildPhaseType","optionsOrFolderType","subfolderPath","buildPhaseSection","buildFileSection","buildPhaseUuid","buildPhaseTargetUuid","getFirstTarget","buildPhase","buildActionMask","runOnlyForDeploymentPostprocessing","filePathToBuildFile","pbxCopyFilesBuildPhaseObj","pbxShellScriptBuildPhaseObj","buildFileKey","buildFile","pbxFileObj","groupKey","pbxTargetByName","pbxItemByComment","findTargetKey","targets","pbxSectionName","nativeTarget","buildPhases","obj","sectionKey","addBuildProperty","prop","build_name","configurations","nonComments","buildSettings","removeBuildProperty","updateBuildProperty","build","targetName","validConfigs","targetBuildConfigs","buildConfigurationList","xcConfigList","configName","buildVariants","item","configs","includes","config","updateProductName","INHERITED","SEARCH_PATHS","searchPaths","new_path","searchPathForFile","unquote","productName","Array","isArray","matches","p","forEach","m","idx","removeFromLibrarySearchPaths","removeFromHeaderSearchPaths","addToHeaderSearchPaths","addToOtherLinkerFlags","flag","OTHER_LDFLAGS","removeFromOtherLinkerFlags","addToBuildSettings","buildSetting","removeFromBuildSettings","__defineGetter__","addTarget","type","subfolder","bundleId","targetUuid","targetType","targetSubfolder","trim","targetBundleId","producttypeForTargettype","buildConfigurationsList","GCC_PREPROCESSOR_DEFINITIONS","INFOPLIST_FILE","join","LD_RUNPATH_SEARCH_PATHS","PRODUCT_NAME","SKIP_INSTALL","elem","PRODUCT_BUNDLE_IDENTIFIER","productType","productFileType","filetypeForProducttype","productFile","productFileName","productReference","buildRules","watch2Target","getTarget","create","settings","fileObject","fileEncoding","lastKnownFileType","explicitFileType","folderType","phaseName","DESTINATION_BY_TARGETTYPE","application","app_extension","bundle","command_line_tool","dynamic_library","framework","frameworks","static_library","unit_test_bundle","watch_app","watch2_app","watch_extension","watch2_extension","SUBFOLDERSPEC_BY_DESTINATION","absolute_path","executables","java_resources","plugins","products_directory","resources","shared_frameworks","shared_support","wrapper","xpc_services","dstPath","dstSubfolderSpec","inputPaths","outputPaths","shellPath","shellScript","correctForPath","correctForFrameworksPath","r_group_dir","RegExp","proj","pluginsPath","fileDir","dirname","newObj","buildPhaseNameForIsa","BUILDPHASENAME_BY_ISA","PBXCopyFilesBuildPhase","PBXResourcesBuildPhase","PBXSourcesBuildPhase","PBXFrameworksBuildPhase","PRODUCTTYPE_BY_TARGETTYPE","FILETYPE_BY_PRODUCTTYPE","pbxProjectContainer","firstProjectUuid","firstProject","firstTargetUuid","firstTarget","addToPbxGroupType","groupType","getPBXGroupByKeyAndType","childGroup","pbxCreateGroupWithType","pathName","model","commendId","pbxCreateVariantGroup","pbxCreateGroup","removeFromPbxGroupAndType","groupChildren","findPBXGroupKeyAndType","criteria","findPBXGroupKey","findPBXVariantGroupKey","addLocalizationVariantGroup","resourceGroupKey","localizationVariantGroup","addKnownRegion","hasKnownRegion","removeKnownRegion","regions","getPBXObject","getBuildProperty","getBuildConfigByName","addDataModelDocument","currentVersionName","modelFiles","readdirSync","modelFileName","modelFilePath","_XCCurrentVersionName","modelFile","addTargetAttribute","attributes","removeTargetAttribute","module","exports"],"mappings":"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","sourcesContent":["/**\n Licensed to the Apache Software Foundation (ASF) under one\n or more contributor license agreements.  See the NOTICE file\n distributed with this work for additional information\n regarding copyright ownership.  The ASF licenses this file\n to you under the Apache License, Version 2.0 (the\n 'License'); you may not use this file except in compliance\n with the License.  You may obtain a copy of the License at\n http://www.apache.org/licenses/LICENSE-2.0\n Unless required by applicable law or agreed to in writing,\n software distributed under the License is distributed on an\n 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n KIND, either express or implied.  See the License for the\n specific language governing permissions and limitations\n under the License.\n */\n\nvar util = require('util'),\n    f = util.format,\n    EventEmitter = require('events').EventEmitter,\n    path = require('path'),\n    uuid = require('uuid'),\n    fork = require('child_process').fork,\n    pbxWriter = require('./pbxWriter'),\n    pbxFile = require('./pbxFile'),\n    fs = require('fs'),\n    parser = require('./parser/pbxproj'),\n    plist = require('simple-plist'),\n    COMMENT_KEY = /_comment$/\n\nfunction pbxProject(filename) {\n    if (!(this instanceof pbxProject))\n        return new pbxProject(filename);\n\n    this.filepath = path.resolve(filename)\n}\n\nutil.inherits(pbxProject, EventEmitter)\n\npbxProject.prototype.parse = function(cb) {\n    var worker = fork(__dirname + '/parseJob.js', [this.filepath])\n\n    worker.on('message', function(msg) {\n        if (msg.name == 'SyntaxError' || msg.code) {\n            this.emit('error', msg);\n        } else {\n            this.hash = msg;\n            this.emit('end', null, msg)\n        }\n    }.bind(this));\n\n    if (cb) {\n        this.on('error', cb);\n        this.on('end', cb);\n    }\n\n    return this;\n}\n\npbxProject.prototype.parseSync = function() {\n    var file_contents = fs.readFileSync(this.filepath, 'utf-8');\n\n    this.hash = parser.parse(file_contents);\n    return this;\n}\n\npbxProject.prototype.writeSync = function(options) {\n    this.writer = new pbxWriter(this.hash, options);\n    return this.writer.writeSync();\n}\n\npbxProject.prototype.allUuids = function() {\n    var sections = this.hash.project.objects,\n        uuids = [],\n        section;\n\n    for (key in sections) {\n        section = sections[key]\n        uuids = uuids.concat(Object.keys(section))\n    }\n\n    uuids = uuids.filter(function(str) {\n        return !COMMENT_KEY.test(str) && str.length == 24;\n    });\n\n    return uuids;\n}\n\npbxProject.prototype.generateUuid = function() {\n    var id = uuid.v4()\n        .replace(/-/g, '')\n        .substr(0, 24)\n        .toUpperCase()\n\n    if (this.allUuids().indexOf(id) >= 0) {\n        return this.generateUuid();\n    } else {\n        return id;\n    }\n}\n\npbxProject.prototype.addPluginFile = function(path, opt) {\n    var file = new pbxFile(path, opt);\n\n    file.plugin = true; // durr\n    correctForPluginsPath(file, this);\n\n    // null is better for early errors\n    if (this.hasFile(file.path)) return null;\n\n    file.fileRef = this.generateUuid();\n\n    this.addToPbxFileReferenceSection(file);    // PBXFileReference\n    this.addToPluginsPbxGroup(file);            // PBXGroup\n\n    return file;\n}\n\npbxProject.prototype.removePluginFile = function(path, opt) {\n    var file = new pbxFile(path, opt);\n    correctForPluginsPath(file, this);\n\n    this.removeFromPbxFileReferenceSection(file);    // PBXFileReference\n    this.removeFromPluginsPbxGroup(file);            // PBXGroup\n\n    return file;\n}\n\npbxProject.prototype.addProductFile = function(targetPath, opt) {\n    var file = new pbxFile(targetPath, opt);\n\n    file.includeInIndex = 0;\n    file.fileRef = this.generateUuid();\n    file.target = opt ? opt.target : undefined;\n    file.group = opt ? opt.group : undefined;\n    file.uuid = this.generateUuid();\n    file.path = file.basename;\n\n    this.addToPbxFileReferenceSection(file);\n    this.addToProductsPbxGroup(file);                // PBXGroup\n\n    return file;\n}\n\npbxProject.prototype.removeProductFile = function(path, opt) {\n    var file = new pbxFile(path, opt);\n\n    this.removeFromProductsPbxGroup(file);           // PBXGroup\n\n    return file;\n}\n\n/**\n *\n * @param path {String}\n * @param opt {Object} see pbxFile for avail options\n * @param group {String} group key\n * @returns {Object} file; see pbxFile\n */\npbxProject.prototype.addSourceFile = function (path, opt, group) {\n    var file;\n    if (group) {\n        file = this.addFile(path, group, opt);\n    }\n    else {\n        file = this.addPluginFile(path, opt);\n    }\n\n    if (!file) return false;\n\n    file.target = opt ? opt.target : undefined;\n    file.uuid = this.generateUuid();\n\n    this.addToPbxBuildFileSection(file);        // PBXBuildFile\n    this.addToPbxSourcesBuildPhase(file);       // PBXSourcesBuildPhase\n\n    return file;\n}\n\n/**\n *\n * @param path {String}\n * @param opt {Object} see pbxFile for avail options\n * @param group {String} group key\n * @returns {Object} file; see pbxFile\n */\npbxProject.prototype.removeSourceFile = function (path, opt, group) {\n    var file;\n    if (group) {\n        file = this.removeFile(path, group, opt);\n    }\n    else {\n        file = this.removePluginFile(path, opt);\n    }\n    file.target = opt ? opt.target : undefined;\n    this.removeFromPbxBuildFileSection(file);        // PBXBuildFile\n    this.removeFromPbxSourcesBuildPhase(file);       // PBXSourcesBuildPhase\n\n    return file;\n}\n\n/**\n *\n * @param path {String}\n * @param opt {Object} see pbxFile for avail options\n * @param group {String} group key\n * @returns {Object} file; see pbxFile\n */\npbxProject.prototype.addHeaderFile = function (path, opt, group) {\n    if (group) {\n        return this.addFile(path, group, opt);\n    }\n    else {\n        return this.addPluginFile(path, opt);\n    }\n}\n\n/**\n *\n * @param path {String}\n * @param opt {Object} see pbxFile for avail options\n * @param group {String} group key\n * @returns {Object} file; see pbxFile\n */\npbxProject.prototype.removeHeaderFile = function (path, opt, group) {\n    if (group) {\n        return this.removeFile(path, group, opt);\n    }\n    else {\n        return this.removePluginFile(path, opt);\n    }\n}\n\n/**\n *\n * @param path {String}\n * @param opt {Object} see pbxFile for avail options\n * @param group {String} group key\n * @returns {Object} file; see pbxFile\n */\npbxProject.prototype.addResourceFile = function(path, opt, group) {\n    opt = opt || {};\n\n    var file;\n\n    if (opt.plugin) {\n        file = this.addPluginFile(path, opt);\n        if (!file) return false;\n    } else {\n        file = new pbxFile(path, opt);\n        if (this.hasFile(file.path)) return false;\n    }\n\n    file.uuid = this.generateUuid();\n    file.target = opt ? opt.target : undefined;\n\n    if (!opt.plugin) {\n        correctForResourcesPath(file, this);\n        file.fileRef = this.generateUuid();\n    }\n\n    if (!opt.variantGroup) {\n        this.addToPbxBuildFileSection(file);        // PBXBuildFile\n        this.addToPbxResourcesBuildPhase(file);     // PBXResourcesBuildPhase\n    }\n\n    if (!opt.plugin) {\n        this.addToPbxFileReferenceSection(file);    // PBXFileReference\n        if (group) {\n            if (this.getPBXGroupByKey(group)) {\n                this.addToPbxGroup(file, group);        //Group other than Resources (i.e. 'splash')\n            }\n            else if (this.getPBXVariantGroupByKey(group)) {\n                this.addToPbxVariantGroup(file, group);  // PBXVariantGroup\n            }\n        }\n        else {\n            this.addToResourcesPbxGroup(file);          // PBXGroup\n        }\n\n    }\n\n    return file;\n}\n\n/**\n *\n * @param path {String}\n * @param opt {Object} see pbxFile for avail options\n * @param group {String} group key\n * @returns {Object} file; see pbxFile\n */\npbxProject.prototype.removeResourceFile = function(path, opt, group) {\n    var file = new pbxFile(path, opt);\n    file.target = opt ? opt.target : undefined;\n\n    correctForResourcesPath(file, this);\n\n    this.removeFromPbxBuildFileSection(file);        // PBXBuildFile\n    this.removeFromPbxFileReferenceSection(file);    // PBXFileReference\n    if (group) {\n        if (this.getPBXGroupByKey(group)) {\n            this.removeFromPbxGroup(file, group);        //Group other than Resources (i.e. 'splash')\n        }\n        else if (this.getPBXVariantGroupByKey(group)) {\n            this.removeFromPbxVariantGroup(file, group);  // PBXVariantGroup\n        }\n    }\n    else {\n        this.removeFromResourcesPbxGroup(file);          // PBXGroup\n    }\n    this.removeFromPbxResourcesBuildPhase(file);     // PBXResourcesBuildPhase\n\n    return file;\n}\n\npbxProject.prototype.addFramework = function(fpath, opt) {\n    var customFramework = opt && opt.customFramework == true;\n    var link = !opt || (opt.link == undefined || opt.link);    //defaults to true if not specified\n    var embed = opt && opt.embed;                              //defaults to false if not specified\n\n    if (opt) {\n      delete opt.embed;\n    }\n\n    var file = new pbxFile(fpath, opt);\n\n    file.uuid = this.generateUuid();\n    file.fileRef = this.generateUuid();\n    file.target = opt ? opt.target : undefined;\n\n    if (this.hasFile(file.path)) return false;\n\n    this.addToPbxBuildFileSection(file);        // PBXBuildFile\n    this.addToPbxFileReferenceSection(file);    // PBXFileReference\n    this.addToFrameworksPbxGroup(file);         // PBXGroup\n\n    if (link) {\n      this.addToPbxFrameworksBuildPhase(file);    // PBXFrameworksBuildPhase\n    }\n\n    if (customFramework) {\n        this.addToFrameworkSearchPaths(file);\n\n        if (embed) {\n          opt.embed = embed;\n          var embeddedFile = new pbxFile(fpath, opt);\n\n          embeddedFile.uuid = this.generateUuid();\n          embeddedFile.fileRef = file.fileRef;\n\n          //keeping a separate PBXBuildFile entry for Embed Frameworks\n          this.addToPbxBuildFileSection(embeddedFile);        // PBXBuildFile\n\n          this.addToPbxEmbedFrameworksBuildPhase(embeddedFile); // PBXCopyFilesBuildPhase\n\n          return embeddedFile;\n        }\n    }\n\n    return file;\n}\n\npbxProject.prototype.removeFramework = function(fpath, opt) {\n    var embed = opt && opt.embed;\n\n    if (opt) {\n      delete opt.embed;\n    }\n\n    var file = new pbxFile(fpath, opt);\n    file.target = opt ? opt.target : undefined;\n\n    this.removeFromPbxBuildFileSection(file);          // PBXBuildFile\n    this.removeFromPbxFileReferenceSection(file);      // PBXFileReference\n    this.removeFromFrameworksPbxGroup(file);           // PBXGroup\n    this.removeFromPbxFrameworksBuildPhase(file);      // PBXFrameworksBuildPhase\n\n    if (opt && opt.customFramework) {\n        this.removeFromFrameworkSearchPaths(file);\n    }\n\n    opt = opt || {};\n    opt.embed = true;\n    var embeddedFile = new pbxFile(fpath, opt);\n\n    embeddedFile.fileRef = file.fileRef;\n\n    this.removeFromPbxBuildFileSection(embeddedFile);          // PBXBuildFile\n    this.removeFromPbxEmbedFrameworksBuildPhase(embeddedFile); // PBXCopyFilesBuildPhase\n\n    return file;\n}\n\n\npbxProject.prototype.addCopyfile = function(fpath, opt) {\n    var file = new pbxFile(fpath, opt);\n\n    // catch duplicates\n    if (this.hasFile(file.path)) {\n        file = this.hasFile(file.path);\n    }\n\n    file.fileRef = file.uuid = this.generateUuid();\n    file.target = opt ? opt.target : undefined;\n\n    this.addToPbxBuildFileSection(file);        // PBXBuildFile\n    this.addToPbxFileReferenceSection(file);    // PBXFileReference\n    this.addToPbxCopyfilesBuildPhase(file);     // PBXCopyFilesBuildPhase\n\n    return file;\n}\n\npbxProject.prototype.pbxCopyfilesBuildPhaseObj = function(target) {\n    return this.buildPhaseObject('PBXCopyFilesBuildPhase', 'Copy Files', target);\n}\n\npbxProject.prototype.addToPbxCopyfilesBuildPhase = function(file) {\n    var sources = this.buildPhaseObject('PBXCopyFilesBuildPhase', 'Copy Files', file.target);\n    sources.files.push(pbxBuildPhaseObj(file));\n}\n\npbxProject.prototype.removeCopyfile = function(fpath, opt) {\n    var file = new pbxFile(fpath, opt);\n    file.target = opt ? opt.target : undefined;\n\n    this.removeFromPbxBuildFileSection(file);        // PBXBuildFile\n    this.removeFromPbxFileReferenceSection(file);    // PBXFileReference\n    this.removeFromPbxCopyfilesBuildPhase(file);    // PBXFrameworksBuildPhase\n\n    return file;\n}\n\npbxProject.prototype.removeFromPbxCopyfilesBuildPhase = function(file) {\n    var sources = this.pbxCopyfilesBuildPhaseObj(file.target);\n    for (i in sources.files) {\n        if (sources.files[i].comment == longComment(file)) {\n            sources.files.splice(i, 1);\n            break;\n        }\n    }\n}\n\npbxProject.prototype.addStaticLibrary = function(path, opt) {\n    opt = opt || {};\n\n    var file;\n\n    if (opt.plugin) {\n        file = this.addPluginFile(path, opt);\n        if (!file) return false;\n    } else {\n        file = new pbxFile(path, opt);\n        if (this.hasFile(file.path)) return false;\n    }\n\n    file.uuid = this.generateUuid();\n    file.target = opt ? opt.target : undefined;\n\n    if (!opt.plugin) {\n        file.fileRef = this.generateUuid();\n        this.addToPbxFileReferenceSection(file);    // PBXFileReference\n    }\n\n    this.addToPbxBuildFileSection(file);        // PBXBuildFile\n    this.addToPbxFrameworksBuildPhase(file);    // PBXFrameworksBuildPhase\n    this.addToLibrarySearchPaths(file);        // make sure it gets built!\n\n    return file;\n}\n\n// helper addition functions\npbxProject.prototype.addToPbxBuildFileSection = function(file) {\n    var commentKey = f(\"%s_comment\", file.uuid);\n\n    this.pbxBuildFileSection()[file.uuid] = pbxBuildFileObj(file);\n    this.pbxBuildFileSection()[commentKey] = pbxBuildFileComment(file);\n}\n\npbxProject.prototype.removeFromPbxBuildFileSection = function(file) {\n    var uuid;\n\n    for (uuid in this.pbxBuildFileSection()) {\n        if (this.pbxBuildFileSection()[uuid].fileRef_comment == file.basename) {\n            file.uuid = uuid;\n            delete this.pbxBuildFileSection()[uuid];\n\n            var commentKey = f(\"%s_comment\", uuid);\n            delete this.pbxBuildFileSection()[commentKey];\n        }\n    }\n}\n\npbxProject.prototype.addPbxGroup = function(filePathsArray, name, path, sourceTree) {\n    var groups = this.hash.project.objects['PBXGroup'],\n        pbxGroupUuid = this.generateUuid(),\n        commentKey = f(\"%s_comment\", pbxGroupUuid),\n        pbxGroup = {\n            isa: 'PBXGroup',\n            children: [],\n            name: name,\n            path: path,\n            sourceTree: sourceTree ? sourceTree : '\"<group>\"'\n        },\n        fileReferenceSection = this.pbxFileReferenceSection(),\n        filePathToReference = {};\n\n    for (var key in fileReferenceSection) {\n        // only look for comments\n        if (!COMMENT_KEY.test(key)) continue;\n\n        var fileReferenceKey = key.split(COMMENT_KEY)[0],\n            fileReference = fileReferenceSection[fileReferenceKey];\n\n        filePathToReference[fileReference.path] = { fileRef: fileReferenceKey, basename: fileReferenceSection[key] };\n    }\n\n    for (var index = 0; index < filePathsArray.length; index++) {\n        var filePath = filePathsArray[index],\n            filePathQuoted = \"\\\"\" + filePath + \"\\\"\";\n        if (filePathToReference[filePath]) {\n            pbxGroup.children.push(pbxGroupChild(filePathToReference[filePath]));\n            continue;\n        } else if (filePathToReference[filePathQuoted]) {\n            pbxGroup.children.push(pbxGroupChild(filePathToReference[filePathQuoted]));\n            continue;\n        }\n\n        var file = new pbxFile(filePath);\n        file.uuid = this.generateUuid();\n        file.fileRef = this.generateUuid();\n        this.addToPbxFileReferenceSection(file);    // PBXFileReference\n        this.addToPbxBuildFileSection(file);        // PBXBuildFile\n        pbxGroup.children.push(pbxGroupChild(file));\n    }\n\n    if (groups) {\n        groups[pbxGroupUuid] = pbxGroup;\n        groups[commentKey] = name;\n    }\n\n    return { uuid: pbxGroupUuid, pbxGroup: pbxGroup };\n}\n\npbxProject.prototype.removePbxGroup = function (groupName) {\n    var section = this.hash.project.objects['PBXGroup'],\n        key, itemKey;\n\n    for (key in section) {\n        // only look for comments\n        if (!COMMENT_KEY.test(key)) continue;\n\n        if (section[key] == groupName) {\n            itemKey = key.split(COMMENT_KEY)[0];\n            delete section[itemKey];\n        }\n    }\n}\n\npbxProject.prototype.addToPbxProjectSection = function(target) {\n\n    var newTarget = {\n            value: target.uuid,\n            comment: pbxNativeTargetComment(target.pbxNativeTarget)\n        };\n\n    this.pbxProjectSection()[this.getFirstProject()['uuid']]['targets'].push(newTarget);\n}\n\npbxProject.prototype.addToPbxNativeTargetSection = function(target) {\n    var commentKey = f(\"%s_comment\", target.uuid);\n\n    this.pbxNativeTargetSection()[target.uuid] = target.pbxNativeTarget;\n    this.pbxNativeTargetSection()[commentKey] = target.pbxNativeTarget.name;\n}\n\npbxProject.prototype.addToPbxFileReferenceSection = function(file) {\n    var commentKey = f(\"%s_comment\", file.fileRef);\n\n    this.pbxFileReferenceSection()[file.fileRef] = pbxFileReferenceObj(file);\n    this.pbxFileReferenceSection()[commentKey] = pbxFileReferenceComment(file);\n}\n\npbxProject.prototype.removeFromPbxFileReferenceSection = function(file) {\n\n    var i;\n    var refObj = pbxFileReferenceObj(file);\n    for (i in this.pbxFileReferenceSection()) {\n        if (this.pbxFileReferenceSection()[i].name == refObj.name ||\n            ('\"' + this.pbxFileReferenceSection()[i].name + '\"') == refObj.name ||\n            this.pbxFileReferenceSection()[i].path == refObj.path ||\n            ('\"' + this.pbxFileReferenceSection()[i].path + '\"') == refObj.path) {\n            file.fileRef = file.uuid = i;\n            delete this.pbxFileReferenceSection()[i];\n            break;\n        }\n    }\n    var commentKey = f(\"%s_comment\", file.fileRef);\n    if (this.pbxFileReferenceSection()[commentKey] != undefined) {\n        delete this.pbxFileReferenceSection()[commentKey];\n    }\n\n    return file;\n}\n\npbxProject.prototype.addToXcVersionGroupSection = function(file) {\n    if (!file.models || !file.currentModel) {\n        throw new Error(\"Cannot create a XCVersionGroup section from not a data model document file\");\n    }\n\n    var commentKey = f(\"%s_comment\", file.fileRef);\n\n    if (!this.xcVersionGroupSection()[file.fileRef]) {\n        this.xcVersionGroupSection()[file.fileRef] = {\n            isa: 'XCVersionGroup',\n            children: file.models.map(function (el) { return el.fileRef; }),\n            currentVersion: file.currentModel.fileRef,\n            name: path.basename(file.path),\n            path: file.path,\n            sourceTree: '\"<group>\"',\n            versionGroupType: 'wrapper.xcdatamodel'\n        };\n        this.xcVersionGroupSection()[commentKey] = path.basename(file.path);\n    }\n}\n\npbxProject.prototype.addToPluginsPbxGroup = function(file) {\n    var pluginsGroup = this.pbxGroupByName('Plugins');\n    if (!pluginsGroup) {\n        this.addPbxGroup([file.path], 'Plugins');\n    } else {\n        pluginsGroup.children.push(pbxGroupChild(file));\n    }\n}\n\npbxProject.prototype.removeFromPluginsPbxGroup = function(file) {\n    if (!this.pbxGroupByName('Plugins')) {\n        return null;\n    }\n    var pluginsGroupChildren = this.pbxGroupByName('Plugins').children, i;\n    for (i in pluginsGroupChildren) {\n        if (pbxGroupChild(file).value == pluginsGroupChildren[i].value &&\n            pbxGroupChild(file).comment == pluginsGroupChildren[i].comment) {\n            pluginsGroupChildren.splice(i, 1);\n            break;\n        }\n    }\n}\n\npbxProject.prototype.addToResourcesPbxGroup = function(file) {\n    var pluginsGroup = this.pbxGroupByName('Resources');\n    if (!pluginsGroup) {\n        this.addPbxGroup([file.path], 'Resources');\n    } else {\n        pluginsGroup.children.push(pbxGroupChild(file));\n    }\n}\n\npbxProject.prototype.removeFromResourcesPbxGroup = function(file) {\n    if (!this.pbxGroupByName('Resources')) {\n        return null;\n    }\n    var pluginsGroupChildren = this.pbxGroupByName('Resources').children, i;\n    for (i in pluginsGroupChildren) {\n        if (pbxGroupChild(file).value == pluginsGroupChildren[i].value &&\n            pbxGroupChild(file).comment == pluginsGroupChildren[i].comment) {\n            pluginsGroupChildren.splice(i, 1);\n            break;\n        }\n    }\n}\n\npbxProject.prototype.addToFrameworksPbxGroup = function(file) {\n    var pluginsGroup = this.pbxGroupByName('Frameworks');\n    if (!pluginsGroup) {\n        this.addPbxGroup([file.path], 'Frameworks');\n    } else {\n        pluginsGroup.children.push(pbxGroupChild(file));\n    }\n}\n\npbxProject.prototype.removeFromFrameworksPbxGroup = function(file) {\n    if (!this.pbxGroupByName('Frameworks')) {\n        return null;\n    }\n    var pluginsGroupChildren = this.pbxGroupByName('Frameworks').children;\n\n    for (i in pluginsGroupChildren) {\n        if (pbxGroupChild(file).value == pluginsGroupChildren[i].value &&\n            pbxGroupChild(file).comment == pluginsGroupChildren[i].comment) {\n            pluginsGroupChildren.splice(i, 1);\n            break;\n        }\n    }\n}\n\npbxProject.prototype.addToPbxEmbedFrameworksBuildPhase = function (file) {\n    var sources = this.pbxEmbedFrameworksBuildPhaseObj(file.target);\n    if (sources) {\n        sources.files.push(pbxBuildPhaseObj(file));\n    }\n}\n\npbxProject.prototype.removeFromPbxEmbedFrameworksBuildPhase = function (file) {\n    var sources = this.pbxEmbedFrameworksBuildPhaseObj(file.target);\n    if (sources) {\n        var files = [];\n        for (i in sources.files) {\n            if (sources.files[i].comment != longComment(file)) {\n                files.push(sources.files[i]);\n            }\n        }\n        sources.files = files;\n    }\n}\n\npbxProject.prototype.addToProductsPbxGroup = function(file) {\n    var productsGroup = this.pbxGroupByName('Products');\n    if (!productsGroup) {\n        this.addPbxGroup([file.path], 'Products');\n    } else {\n        productsGroup.children.push(pbxGroupChild(file));\n    }\n}\n\npbxProject.prototype.removeFromProductsPbxGroup = function(file) {\n    if (!this.pbxGroupByName('Products')) {\n        return null;\n    }\n    var productsGroupChildren = this.pbxGroupByName('Products').children, i;\n    for (i in productsGroupChildren) {\n        if (pbxGroupChild(file).value == productsGroupChildren[i].value &&\n            pbxGroupChild(file).comment == productsGroupChildren[i].comment) {\n            productsGroupChildren.splice(i, 1);\n            break;\n        }\n    }\n}\n\npbxProject.prototype.addToPbxSourcesBuildPhase = function(file) {\n    var sources = this.pbxSourcesBuildPhaseObj(file.target);\n    sources.files.push(pbxBuildPhaseObj(file));\n}\n\npbxProject.prototype.removeFromPbxSourcesBuildPhase = function(file) {\n\n    var sources = this.pbxSourcesBuildPhaseObj(file.target), i;\n    for (i in sources.files) {\n        if (sources.files[i].comment == longComment(file)) {\n            sources.files.splice(i, 1);\n            break;\n        }\n    }\n}\n\npbxProject.prototype.addToPbxResourcesBuildPhase = function(file) {\n    var sources = this.pbxResourcesBuildPhaseObj(file.target);\n    sources.files.push(pbxBuildPhaseObj(file));\n}\n\npbxProject.prototype.removeFromPbxResourcesBuildPhase = function(file) {\n    var sources = this.pbxResourcesBuildPhaseObj(file.target), i;\n\n    for (i in sources.files) {\n        if (sources.files[i].comment == longComment(file)) {\n            sources.files.splice(i, 1);\n            break;\n        }\n    }\n}\n\npbxProject.prototype.addToPbxFrameworksBuildPhase = function(file) {\n    var sources = this.pbxFrameworksBuildPhaseObj(file.target);\n    sources.files.push(pbxBuildPhaseObj(file));\n}\n\npbxProject.prototype.removeFromPbxFrameworksBuildPhase = function(file) {\n    var sources = this.pbxFrameworksBuildPhaseObj(file.target);\n    for (i in sources.files) {\n        if (sources.files[i].comment == longComment(file)) {\n            sources.files.splice(i, 1);\n            break;\n        }\n    }\n}\n\npbxProject.prototype.addXCConfigurationList = function(configurationObjectsArray, defaultConfigurationName, comment) {\n    var pbxBuildConfigurationSection = this.pbxXCBuildConfigurationSection(),\n        pbxXCConfigurationListSection = this.pbxXCConfigurationList(),\n        xcConfigurationListUuid = this.generateUuid(),\n        commentKey = f(\"%s_comment\", xcConfigurationListUuid),\n        xcConfigurationList = {\n            isa: 'XCConfigurationList',\n            buildConfigurations: [],\n            defaultConfigurationIsVisible: 0,\n            defaultConfigurationName: defaultConfigurationName\n        };\n\n    for (var index = 0; index < configurationObjectsArray.length; index++) {\n        var configuration = configurationObjectsArray[index],\n            configurationUuid = this.generateUuid(),\n            configurationCommentKey = f(\"%s_comment\", configurationUuid);\n\n        pbxBuildConfigurationSection[configurationUuid] = configuration;\n        pbxBuildConfigurationSection[configurationCommentKey] = configuration.name;\n        xcConfigurationList.buildConfigurations.push({ value: configurationUuid, comment: configuration.name });\n    }\n\n    if (pbxXCConfigurationListSection) {\n        pbxXCConfigurationListSection[xcConfigurationListUuid] = xcConfigurationList;\n        pbxXCConfigurationListSection[commentKey] = comment;\n    }\n\n    return { uuid: xcConfigurationListUuid, xcConfigurationList: xcConfigurationList };\n}\n\npbxProject.prototype.addTargetDependency = function(target, dependencyTargets) {\n    if (!target)\n        return undefined;\n\n    var nativeTargets = this.pbxNativeTargetSection();\n\n    if (typeof nativeTargets[target] == \"undefined\")\n        throw new Error(\"Invalid target: \" + target);\n\n    for (var index = 0; index < dependencyTargets.length; index++) {\n        var dependencyTarget = dependencyTargets[index];\n        if (typeof nativeTargets[dependencyTarget] == \"undefined\")\n            throw new Error(\"Invalid target: \" + dependencyTarget);\n        }\n\n    var pbxTargetDependency = 'PBXTargetDependency',\n        pbxContainerItemProxy = 'PBXContainerItemProxy',\n        pbxTargetDependencySection = this.hash.project.objects[pbxTargetDependency],\n        pbxContainerItemProxySection = this.hash.project.objects[pbxContainerItemProxy];\n\n    for (var index = 0; index < dependencyTargets.length; index++) {\n        var dependencyTargetUuid = dependencyTargets[index],\n            dependencyTargetCommentKey = f(\"%s_comment\", dependencyTargetUuid),\n            targetDependencyUuid = this.generateUuid(),\n            targetDependencyCommentKey = f(\"%s_comment\", targetDependencyUuid),\n            itemProxyUuid = this.generateUuid(),\n            itemProxyCommentKey = f(\"%s_comment\", itemProxyUuid),\n            itemProxy = {\n                isa: pbxContainerItemProxy,\n                containerPortal: this.hash.project['rootObject'],\n                containerPortal_comment: this.hash.project['rootObject_comment'],\n                proxyType: 1,\n                remoteGlobalIDString: dependencyTargetUuid,\n                remoteInfo: nativeTargets[dependencyTargetUuid].name\n            },\n            targetDependency = {\n                isa: pbxTargetDependency,\n                target: dependencyTargetUuid,\n                target_comment: nativeTargets[dependencyTargetCommentKey],\n                targetProxy: itemProxyUuid,\n                targetProxy_comment: pbxContainerItemProxy\n            };\n\n        if (pbxContainerItemProxySection && pbxTargetDependencySection) {\n            pbxContainerItemProxySection[itemProxyUuid] = itemProxy;\n            pbxContainerItemProxySection[itemProxyCommentKey] = pbxContainerItemProxy;\n            pbxTargetDependencySection[targetDependencyUuid] = targetDependency;\n            pbxTargetDependencySection[targetDependencyCommentKey] = pbxTargetDependency;\n            nativeTargets[target].dependencies.push({ value: targetDependencyUuid, comment: pbxTargetDependency })\n        }\n    }\n\n    return { uuid: target, target: nativeTargets[target] };\n}\n\npbxProject.prototype.addBuildPhase = function(filePathsArray, buildPhaseType, comment, target, optionsOrFolderType, subfolderPath) {\n    var buildPhaseSection,\n        fileReferenceSection = this.pbxFileReferenceSection(),\n        buildFileSection = this.pbxBuildFileSection(),\n        buildPhaseUuid = this.generateUuid(),\n        buildPhaseTargetUuid = target || this.getFirstTarget().uuid,\n        commentKey = f(\"%s_comment\", buildPhaseUuid),\n        buildPhase = {\n            isa: buildPhaseType,\n            buildActionMask: 2147483647,\n            files: [],\n            runOnlyForDeploymentPostprocessing: 0\n        },\n        filePathToBuildFile = {};\n\n    if (buildPhaseType === 'PBXCopyFilesBuildPhase') {\n        buildPhase = pbxCopyFilesBuildPhaseObj(buildPhase, optionsOrFolderType, subfolderPath, comment);\n    } else if (buildPhaseType === 'PBXShellScriptBuildPhase') {\n        buildPhase = pbxShellScriptBuildPhaseObj(buildPhase, optionsOrFolderType, comment)\n    }\n\n    if (!this.hash.project.objects[buildPhaseType]) {\n        this.hash.project.objects[buildPhaseType] = new Object();\n    }\n\n    if (!this.hash.project.objects[buildPhaseType][buildPhaseUuid]) {\n        this.hash.project.objects[buildPhaseType][buildPhaseUuid] = buildPhase;\n        this.hash.project.objects[buildPhaseType][commentKey] = comment;\n    }\n\n    if (this.hash.project.objects['PBXNativeTarget'][buildPhaseTargetUuid]['buildPhases']) {\n        this.hash.project.objects['PBXNativeTarget'][buildPhaseTargetUuid]['buildPhases'].push({\n            value: buildPhaseUuid,\n            comment: comment\n        })\n\n    }\n\n\n    for (var key in buildFileSection) {\n        // only look for comments\n        if (!COMMENT_KEY.test(key)) continue;\n\n        var buildFileKey = key.split(COMMENT_KEY)[0],\n            buildFile = buildFileSection[buildFileKey];\n        fileReference = fileReferenceSection[buildFile.fileRef];\n\n        if (!fileReference) continue;\n\n        var pbxFileObj = new pbxFile(fileReference.path);\n\n        filePathToBuildFile[fileReference.path] = { uuid: buildFileKey, basename: pbxFileObj.basename, group: pbxFileObj.group };\n    }\n\n    for (var index = 0; index < filePathsArray.length; index++) {\n        var filePath = filePathsArray[index],\n            filePathQuoted = \"\\\"\" + filePath + \"\\\"\",\n            file = new pbxFile(filePath);\n\n        if (filePathToBuildFile[filePath]) {\n            buildPhase.files.push(pbxBuildPhaseObj(filePathToBuildFile[filePath]));\n            continue;\n        } else if (filePathToBuildFile[filePathQuoted]) {\n            buildPhase.files.push(pbxBuildPhaseObj(filePathToBuildFile[filePathQuoted]));\n            continue;\n        }\n\n        file.uuid = this.generateUuid();\n        file.fileRef = this.generateUuid();\n        this.addToPbxFileReferenceSection(file);    // PBXFileReference\n        this.addToPbxBuildFileSection(file);        // PBXBuildFile\n        buildPhase.files.push(pbxBuildPhaseObj(file));\n    }\n\n    if (buildPhaseSection) {\n        buildPhaseSection[buildPhaseUuid] = buildPhase;\n        buildPhaseSection[commentKey] = comment;\n    }\n\n    return { uuid: buildPhaseUuid, buildPhase: buildPhase };\n}\n\n// helper access functions\npbxProject.prototype.pbxProjectSection = function() {\n    return this.hash.project.objects['PBXProject'];\n}\npbxProject.prototype.pbxBuildFileSection = function() {\n    return this.hash.project.objects['PBXBuildFile'];\n}\n\npbxProject.prototype.pbxXCBuildConfigurationSection = function() {\n    return this.hash.project.objects['XCBuildConfiguration'];\n}\n\npbxProject.prototype.pbxFileReferenceSection = function() {\n    return this.hash.project.objects['PBXFileReference'];\n}\n\npbxProject.prototype.pbxNativeTargetSection = function() {\n    return this.hash.project.objects['PBXNativeTarget'];\n}\n\npbxProject.prototype.xcVersionGroupSection = function () {\n    if (typeof this.hash.project.objects['XCVersionGroup'] !== 'object') {\n        this.hash.project.objects['XCVersionGroup'] = {};\n    }\n\n    return this.hash.project.objects['XCVersionGroup'];\n}\n\npbxProject.prototype.pbxXCConfigurationList = function() {\n    return this.hash.project.objects['XCConfigurationList'];\n}\n\npbxProject.prototype.pbxGroupByName = function(name) {\n    var groups = this.hash.project.objects['PBXGroup'],\n        key, groupKey;\n\n    for (key in groups) {\n        // only look for comments\n        if (!COMMENT_KEY.test(key)) continue;\n\n        if (groups[key] == name) {\n            groupKey = key.split(COMMENT_KEY)[0];\n            return groups[groupKey];\n        }\n    }\n\n    return null;\n}\n\npbxProject.prototype.pbxTargetByName = function(name) {\n    return this.pbxItemByComment(name, 'PBXNativeTarget');\n}\n\npbxProject.prototype.findTargetKey = function(name) {\n    var targets = this.hash.project.objects['PBXNativeTarget'];\n\n    for (var key in targets) {\n        // only look for comments\n        if (COMMENT_KEY.test(key)) continue;\n\n        var target = targets[key];\n        if (target.name === name) {\n            return key;\n        }\n    }\n\n    return null;\n}\n\npbxProject.prototype.pbxItemByComment = function(name, pbxSectionName) {\n    var section = this.hash.project.objects[pbxSectionName],\n        key, itemKey;\n\n    for (key in section) {\n        // only look for comments\n        if (!COMMENT_KEY.test(key)) continue;\n\n        if (section[key] == name) {\n            itemKey = key.split(COMMENT_KEY)[0];\n            return section[itemKey];\n        }\n    }\n\n    return null;\n}\n\npbxProject.prototype.pbxSourcesBuildPhaseObj = function(target) {\n    return this.buildPhaseObject('PBXSourcesBuildPhase', 'Sources', target);\n}\n\npbxProject.prototype.pbxResourcesBuildPhaseObj = function(target) {\n    return this.buildPhaseObject('PBXResourcesBuildPhase', 'Resources', target);\n}\n\npbxProject.prototype.pbxFrameworksBuildPhaseObj = function(target) {\n    return this.buildPhaseObject('PBXFrameworksBuildPhase', 'Frameworks', target);\n}\n\npbxProject.prototype.pbxEmbedFrameworksBuildPhaseObj = function (target) {\n    return this.buildPhaseObject('PBXCopyFilesBuildPhase', 'Embed Frameworks', target);\n};\n\n// Find Build Phase from group/target\npbxProject.prototype.buildPhase = function(group, target) {\n\n    if (!target)\n        return undefined;\n\n    var nativeTargets = this.pbxNativeTargetSection();\n     if (typeof nativeTargets[target] == \"undefined\")\n        throw new Error(\"Invalid target: \" + target);\n\n    var nativeTarget = nativeTargets[target];\n    var buildPhases = nativeTarget.buildPhases;\n     for(var i in buildPhases)\n     {\n        var buildPhase = buildPhases[i];\n        if (buildPhase.comment==group)\n            return buildPhase.value + \"_comment\";\n        }\n    }\n\npbxProject.prototype.buildPhaseObject = function(name, group, target) {\n    var section = this.hash.project.objects[name],\n        obj, sectionKey, key;\n    var buildPhase = this.buildPhase(group, target);\n\n    for (key in section) {\n\n        // only look for comments\n        if (!COMMENT_KEY.test(key)) continue;\n\n        // select the proper buildPhase\n        if (buildPhase && buildPhase!=key)\n            continue;\n        if (section[key] == group) {\n            sectionKey = key.split(COMMENT_KEY)[0];\n            return section[sectionKey];\n        }\n    }\n    return null;\n}\n\npbxProject.prototype.addBuildProperty = function(prop, value, build_name) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        key, configuration;\n\n    for (key in configurations){\n        configuration = configurations[key];\n        if (!build_name || configuration.name === build_name){\n            configuration.buildSettings[prop] = value;\n        }\n    }\n}\n\npbxProject.prototype.removeBuildProperty = function(prop, build_name) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        key, configuration;\n\n    for (key in configurations){\n        configuration = configurations[key];\n        if (configuration.buildSettings[prop] &&\n            !build_name || configuration.name === build_name){\n            delete configuration.buildSettings[prop];\n        }\n    }\n}\n\n/**\n *\n * @param prop {String}\n * @param value {String|Array|Object|Number|Boolean}\n * @param build {String} Release or Debug\n * @param targetName {String} the target which will be updated\n */\npbxProject.prototype.updateBuildProperty = function(prop, value, build, targetName) {\n    let validConfigs = [];\n\n    if(targetName) {\n        const target = this.pbxTargetByName(targetName);\n        const targetBuildConfigs = target && target.buildConfigurationList;\n\n        const xcConfigList = this.pbxXCConfigurationList();\n\n        // Collect the UUID's from the configuration of our target\n        for (const configName in xcConfigList) {\n            if (!COMMENT_KEY.test(configName) && targetBuildConfigs === configName) {\n                const buildVariants = xcConfigList[configName].buildConfigurations;\n\n                for (const item of buildVariants) {\n                    validConfigs.push(item.value);\n                }\n\n                break;\n            }\n        }\n    }\n    \n    var configs = this.pbxXCBuildConfigurationSection();\n    for (var configName in configs) {\n        if (!COMMENT_KEY.test(configName)) {\n            if (targetName && !validConfigs.includes(configName)) continue;\n\n            var config = configs[configName];\n            if ( (build && config.name === build) || (!build) ) {\n                config.buildSettings[prop] = value;\n            }\n        }\n    }\n}\n\npbxProject.prototype.updateProductName = function(name) {\n    this.updateBuildProperty('PRODUCT_NAME', '\"' + name + '\"');\n}\n\npbxProject.prototype.removeFromFrameworkSearchPaths = function(file) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        INHERITED = '\"$(inherited)\"',\n        SEARCH_PATHS = 'FRAMEWORK_SEARCH_PATHS',\n        config, buildSettings, searchPaths;\n    var new_path = searchPathForFile(file, this);\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        if (unquote(buildSettings['PRODUCT_NAME']) != this.productName)\n            continue;\n\n        searchPaths = buildSettings[SEARCH_PATHS];\n\n        if (searchPaths && Array.isArray(searchPaths)) {\n            var matches = searchPaths.filter(function(p) {\n                return p.indexOf(new_path) > -1;\n            });\n            matches.forEach(function(m) {\n                var idx = searchPaths.indexOf(m);\n                searchPaths.splice(idx, 1);\n            });\n        }\n    }\n}\n\npbxProject.prototype.addToFrameworkSearchPaths = function(file) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        INHERITED = '\"$(inherited)\"',\n        config, buildSettings, searchPaths;\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        if (unquote(buildSettings['PRODUCT_NAME']) != this.productName)\n            continue;\n\n        if (!buildSettings['FRAMEWORK_SEARCH_PATHS']\n            || buildSettings['FRAMEWORK_SEARCH_PATHS'] === INHERITED) {\n            buildSettings['FRAMEWORK_SEARCH_PATHS'] = [INHERITED];\n        }\n\n        buildSettings['FRAMEWORK_SEARCH_PATHS'].push(searchPathForFile(file, this));\n    }\n}\n\npbxProject.prototype.removeFromLibrarySearchPaths = function(file) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        INHERITED = '\"$(inherited)\"',\n        SEARCH_PATHS = 'LIBRARY_SEARCH_PATHS',\n        config, buildSettings, searchPaths;\n    var new_path = searchPathForFile(file, this);\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        if (unquote(buildSettings['PRODUCT_NAME']) != this.productName)\n            continue;\n\n        searchPaths = buildSettings[SEARCH_PATHS];\n\n        if (searchPaths && Array.isArray(searchPaths)) {\n            var matches = searchPaths.filter(function(p) {\n                return p.indexOf(new_path) > -1;\n            });\n            matches.forEach(function(m) {\n                var idx = searchPaths.indexOf(m);\n                searchPaths.splice(idx, 1);\n            });\n        }\n\n    }\n}\n\npbxProject.prototype.addToLibrarySearchPaths = function(file) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        INHERITED = '\"$(inherited)\"',\n        config, buildSettings, searchPaths;\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        if (unquote(buildSettings['PRODUCT_NAME']) != this.productName)\n            continue;\n\n        if (!buildSettings['LIBRARY_SEARCH_PATHS']\n            || buildSettings['LIBRARY_SEARCH_PATHS'] === INHERITED) {\n            buildSettings['LIBRARY_SEARCH_PATHS'] = [INHERITED];\n        }\n\n        if (typeof file === 'string') {\n            buildSettings['LIBRARY_SEARCH_PATHS'].push(file);\n        } else {\n            buildSettings['LIBRARY_SEARCH_PATHS'].push(searchPathForFile(file, this));\n        }\n    }\n}\n\npbxProject.prototype.removeFromHeaderSearchPaths = function(file) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        INHERITED = '\"$(inherited)\"',\n        SEARCH_PATHS = 'HEADER_SEARCH_PATHS',\n        config, buildSettings, searchPaths;\n    var new_path = searchPathForFile(file, this);\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        if (unquote(buildSettings['PRODUCT_NAME']) != this.productName)\n            continue;\n\n        if (buildSettings[SEARCH_PATHS]) {\n            var matches = buildSettings[SEARCH_PATHS].filter(function(p) {\n                return p.indexOf(new_path) > -1;\n            });\n            matches.forEach(function(m) {\n                var idx = buildSettings[SEARCH_PATHS].indexOf(m);\n                buildSettings[SEARCH_PATHS].splice(idx, 1);\n            });\n        }\n\n    }\n}\npbxProject.prototype.addToHeaderSearchPaths = function(file) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        INHERITED = '\"$(inherited)\"',\n        config, buildSettings, searchPaths;\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        if (unquote(buildSettings['PRODUCT_NAME']) != this.productName)\n            continue;\n\n        if (!buildSettings['HEADER_SEARCH_PATHS']) {\n            buildSettings['HEADER_SEARCH_PATHS'] = [INHERITED];\n        }\n\n        if (typeof file === 'string') {\n            buildSettings['HEADER_SEARCH_PATHS'].push(file);\n        } else {\n            buildSettings['HEADER_SEARCH_PATHS'].push(searchPathForFile(file, this));\n        }\n    }\n}\n\npbxProject.prototype.addToOtherLinkerFlags = function (flag) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        INHERITED = '\"$(inherited)\"',\n        OTHER_LDFLAGS = 'OTHER_LDFLAGS',\n        config, buildSettings;\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        if (unquote(buildSettings['PRODUCT_NAME']) != this.productName)\n            continue;\n\n        if (!buildSettings[OTHER_LDFLAGS]\n                || buildSettings[OTHER_LDFLAGS] === INHERITED) {\n            buildSettings[OTHER_LDFLAGS] = [INHERITED];\n        }\n\n        buildSettings[OTHER_LDFLAGS].push(flag);\n    }\n}\n\npbxProject.prototype.removeFromOtherLinkerFlags = function (flag) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        OTHER_LDFLAGS = 'OTHER_LDFLAGS',\n        config, buildSettings;\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        if (unquote(buildSettings['PRODUCT_NAME']) != this.productName) {\n            continue;\n        }\n\n        if (buildSettings[OTHER_LDFLAGS]) {\n            var matches = buildSettings[OTHER_LDFLAGS].filter(function (p) {\n                return p.indexOf(flag) > -1;\n            });\n            matches.forEach(function (m) {\n                var idx = buildSettings[OTHER_LDFLAGS].indexOf(m);\n                buildSettings[OTHER_LDFLAGS].splice(idx, 1);\n            });\n        }\n    }\n}\n\npbxProject.prototype.addToBuildSettings = function (buildSetting, value) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        config, buildSettings;\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        buildSettings[buildSetting] = value;\n    }\n}\n\npbxProject.prototype.removeFromBuildSettings = function (buildSetting) {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        config, buildSettings;\n\n    for (config in configurations) {\n        buildSettings = configurations[config].buildSettings;\n\n        if (buildSettings[buildSetting]) {\n            delete buildSettings[buildSetting];\n        }\n    }\n}\n\n// a JS getter. hmmm\npbxProject.prototype.__defineGetter__(\"productName\", function() {\n    var configurations = nonComments(this.pbxXCBuildConfigurationSection()),\n        config, productName;\n\n    for (config in configurations) {\n        productName = configurations[config].buildSettings['PRODUCT_NAME'];\n\n        if (productName) {\n            return unquote(productName);\n        }\n    }\n});\n\n// check if file is present\npbxProject.prototype.hasFile = function(filePath) {\n    var files = nonComments(this.pbxFileReferenceSection()),\n        file, id;\n    for (id in files) {\n        file = files[id];\n        if (file.path == filePath || file.path == ('\"' + filePath + '\"')) {\n            return file;\n        }\n    }\n\n    return false;\n}\n\npbxProject.prototype.addTarget = function(name, type, subfolder, bundleId) {\n\n    // Setup uuid and name of new target\n    var targetUuid = this.generateUuid(),\n        targetType = type,\n        targetSubfolder = subfolder || name,\n        targetName = name.trim(),\n        targetBundleId = bundleId;\n\n    // Check type against list of allowed target types\n    if (!targetName) {\n        throw new Error(\"Target name missing.\");\n    }\n\n    // Check type against list of allowed target types\n    if (!targetType) {\n        throw new Error(\"Target type missing.\");\n    }\n\n    // Check type against list of allowed target types\n    if (!producttypeForTargettype(targetType)) {\n        throw new Error(\"Target type invalid: \" + targetType);\n    }\n\n    // Build Configuration: Create\n    var buildConfigurationsList = [\n        {\n            name: 'Debug',\n            isa: 'XCBuildConfiguration',\n            buildSettings: {\n                GCC_PREPROCESSOR_DEFINITIONS: ['\"DEBUG=1\"', '\"$(inherited)\"'],\n                INFOPLIST_FILE: '\"' + path.join(targetSubfolder, targetSubfolder + '-Info.plist' + '\"'),\n                LD_RUNPATH_SEARCH_PATHS: '\"$(inherited) @executable_path/Frameworks @executable_path/../../Frameworks\"',\n                PRODUCT_NAME: '\"' + targetName + '\"',\n                SKIP_INSTALL: 'YES'\n            }\n        },\n        {\n            name: 'Release',\n            isa: 'XCBuildConfiguration',\n            buildSettings: {\n                INFOPLIST_FILE: '\"' + path.join(targetSubfolder, targetSubfolder + '-Info.plist' + '\"'),\n                LD_RUNPATH_SEARCH_PATHS: '\"$(inherited) @executable_path/Frameworks @executable_path/../../Frameworks\"',\n                PRODUCT_NAME: '\"' + targetName + '\"',\n                SKIP_INSTALL: 'YES'\n            }\n        }\n    ];\n\n    // Add optional bundleId to build configuration\n    if (targetBundleId) {\n        buildConfigurationsList = buildConfigurationsList.map((elem) => {\n            elem.buildSettings.PRODUCT_BUNDLE_IDENTIFIER = '\"' + targetBundleId + '\"';\n            return elem;\n        });\n    }\n\n    // Build Configuration: Add\n    var buildConfigurations = this.addXCConfigurationList(buildConfigurationsList, 'Release', 'Build configuration list for PBXNativeTarget \"' + targetName +'\"');\n\n    // Product: Create\n    var productName = targetName,\n        productType = producttypeForTargettype(targetType),\n        productFileType = filetypeForProducttype(productType),\n        productFile = this.addProductFile(productName, { group: 'Copy Files', 'target': targetUuid, 'explicitFileType': productFileType}),\n        productFileName = productFile.basename;\n\n\n    // Product: Add to build file list\n    this.addToPbxBuildFileSection(productFile);\n\n    // Target: Create\n    var target = {\n            uuid: targetUuid,\n            pbxNativeTarget: {\n                isa: 'PBXNativeTarget',\n                name: '\"' + targetName + '\"',\n                productName: '\"' + targetName + '\"',\n                productReference: productFile.fileRef,\n                productType: '\"' + producttypeForTargettype(targetType) + '\"',\n                buildConfigurationList: buildConfigurations.uuid,\n                buildPhases: [],\n                buildRules: [],\n                dependencies: []\n            }\n    };\n\n    // Target: Add to PBXNativeTarget section\n    this.addToPbxNativeTargetSection(target)\n\n    // Product: Embed (only for \"extension\"-type targets)\n    if (targetType === 'app_extension') {\n\n        // Create CopyFiles phase in first target\n        this.addBuildPhase([], 'PBXCopyFilesBuildPhase', 'Copy Files', this.getFirstTarget().uuid,  targetType)\n\n        // Add product to CopyFiles phase\n        this.addToPbxCopyfilesBuildPhase(productFile)\n\n       // this.addBuildPhaseToTarget(newPhase.buildPhase, this.getFirstTarget().uuid)\n    } else if (targetType === 'watch2_app') {\n        // Create CopyFiles phase in first target\n        this.addBuildPhase(\n            [targetName + '.app'],\n            'PBXCopyFilesBuildPhase',\n            'Embed Watch Content',\n            this.getFirstTarget().uuid,\n            targetType,\n            '\"$(CONTENTS_FOLDER_PATH)/Watch\"'\n        );\n    } else if (targetType === 'watch2_extension') {\n        // Create CopyFiles phase in watch target (if exists)\n        var watch2Target = this.getTarget(producttypeForTargettype('watch2_app'));\n        if (watch2Target) {\n            this.addBuildPhase(\n                [targetName + '.appex'],\n                'PBXCopyFilesBuildPhase',\n                'Embed App Extensions',\n                watch2Target.uuid,\n                targetType\n            );\n        }\n    }\n\n    // Target: Add uuid to root project\n    this.addToPbxProjectSection(target);\n\n    // Target: Add dependency for this target to other targets\n    if (targetType === 'watch2_extension') {\n        var watch2Target = this.getTarget(producttypeForTargettype('watch2_app'));\n        if (watch2Target) {\n            this.addTargetDependency(watch2Target.uuid, [target.uuid]);\n        }\n    } else {\n        this.addTargetDependency(this.getFirstTarget().uuid, [target.uuid]);\n    }\n\n\n    // Return target on success\n    return target;\n\n};\n\n// helper object creation functions\nfunction pbxBuildFileObj(file) {\n    var obj = Object.create(null);\n\n    obj.isa = 'PBXBuildFile';\n    obj.fileRef = file.fileRef;\n    obj.fileRef_comment = file.basename;\n    if (file.settings) obj.settings = file.settings;\n\n    return obj;\n}\n\nfunction pbxFileReferenceObj(file) {\n    var fileObject = {\n        isa: \"PBXFileReference\",\n        name: \"\\\"\" + file.basename + \"\\\"\",\n        path: \"\\\"\" + file.path.replace(/\\\\/g, '/') + \"\\\"\",\n        sourceTree: file.sourceTree,\n        fileEncoding: file.fileEncoding,\n        lastKnownFileType: file.lastKnownFileType,\n        explicitFileType: file.explicitFileType,\n        includeInIndex: file.includeInIndex\n    };\n\n    return fileObject;\n}\n\nfunction pbxGroupChild(file) {\n    var obj = Object.create(null);\n\n    obj.value = file.fileRef;\n    obj.comment = file.basename;\n\n    return obj;\n}\n\nfunction pbxBuildPhaseObj(file) {\n    var obj = Object.create(null);\n\n    obj.value = file.uuid;\n    obj.comment = longComment(file);\n\n    return obj;\n}\n\nfunction pbxCopyFilesBuildPhaseObj(obj, folderType, subfolderPath, phaseName) {\n\n     // Add additional properties for 'CopyFiles' build phase\n    var DESTINATION_BY_TARGETTYPE = {\n        application: 'wrapper',\n        app_extension: 'plugins',\n        bundle: 'wrapper',\n        command_line_tool: 'wrapper',\n        dynamic_library: 'products_directory',\n        framework: 'shared_frameworks',\n        frameworks: 'frameworks',\n        static_library: 'products_directory',\n        unit_test_bundle: 'wrapper',\n        watch_app: 'wrapper',\n        watch2_app: 'products_directory',\n        watch_extension: 'plugins',\n        watch2_extension: 'plugins'\n    }\n    var SUBFOLDERSPEC_BY_DESTINATION = {\n        absolute_path: 0,\n        executables: 6,\n        frameworks: 10,\n        java_resources: 15,\n        plugins: 13,\n        products_directory: 16,\n        resources: 7,\n        shared_frameworks: 11,\n        shared_support: 12,\n        wrapper: 1,\n        xpc_services: 0\n    }\n\n    obj.name = '\"' + phaseName + '\"';\n    obj.dstPath = subfolderPath || '\"\"';\n    obj.dstSubfolderSpec = SUBFOLDERSPEC_BY_DESTINATION[DESTINATION_BY_TARGETTYPE[folderType]];\n\n    return obj;\n}\n\nfunction pbxShellScriptBuildPhaseObj(obj, options, phaseName) {\n    obj.name = '\"' + phaseName + '\"';\n    obj.inputPaths = options.inputPaths || [];\n    obj.outputPaths = options.outputPaths || [];\n    obj.shellPath = options.shellPath;\n    obj.shellScript = '\"' + options.shellScript.replace(/\"/g, '\\\\\"') + '\"';\n\n    return obj;\n}\n\nfunction pbxBuildFileComment(file) {\n    return longComment(file);\n}\n\nfunction pbxFileReferenceComment(file) {\n    return file.basename || path.basename(file.path);\n}\n\nfunction pbxNativeTargetComment(target) {\n    return target.name;\n}\n\nfunction longComment(file) {\n    return f(\"%s in %s\", file.basename, file.group);\n}\n\n// respect <group> path\nfunction correctForPluginsPath(file, project) {\n    return correctForPath(file, project, 'Plugins');\n}\n\nfunction correctForResourcesPath(file, project) {\n    return correctForPath(file, project, 'Resources');\n}\n\nfunction correctForFrameworksPath(file, project) {\n    return correctForPath(file, project, 'Frameworks');\n}\n\nfunction correctForPath(file, project, group) {\n    var r_group_dir = new RegExp('^' + group + '[\\\\\\\\/]');\n\n    if (project.pbxGroupByName(group).path)\n        file.path = file.path.replace(r_group_dir, '');\n\n    return file;\n}\n\nfunction searchPathForFile(file, proj) {\n    var plugins = proj.pbxGroupByName('Plugins'),\n        pluginsPath = plugins ? plugins.path : null,\n        fileDir = path.dirname(file.path);\n\n    if (fileDir == '.') {\n        fileDir = '';\n    } else {\n        fileDir = '/' + fileDir;\n    }\n\n    if (file.plugin && pluginsPath) {\n        return '\"\\\\\"$(SRCROOT)/' + unquote(pluginsPath) + '\\\\\"\"';\n    } else if (file.customFramework && file.dirname) {\n        return '\"\\\\\"' + file.dirname + '\\\\\"\"';\n    } else {\n        return '\"\\\\\"$(SRCROOT)/' + proj.productName + fileDir + '\\\\\"\"';\n    }\n}\n\nfunction nonComments(obj) {\n    var keys = Object.keys(obj),\n        newObj = {}, i = 0;\n\n    for (i; i < keys.length; i++) {\n        if (!COMMENT_KEY.test(keys[i])) {\n            newObj[keys[i]] = obj[keys[i]];\n        }\n    }\n\n    return newObj;\n}\n\nfunction unquote(str) {\n    if (str) return str.replace(/^\"(.*)\"$/, \"$1\");\n}\n\n\nfunction buildPhaseNameForIsa (isa) {\n\n    BUILDPHASENAME_BY_ISA = {\n        PBXCopyFilesBuildPhase: 'Copy Files',\n        PBXResourcesBuildPhase: 'Resources',\n        PBXSourcesBuildPhase: 'Sources',\n        PBXFrameworksBuildPhase: 'Frameworks'\n    }\n\n    return BUILDPHASENAME_BY_ISA[isa]\n}\n\nfunction producttypeForTargettype (targetType) {\n\n    PRODUCTTYPE_BY_TARGETTYPE = {\n            application: 'com.apple.product-type.application',\n            app_extension: 'com.apple.product-type.app-extension',\n            bundle: 'com.apple.product-type.bundle',\n            command_line_tool: 'com.apple.product-type.tool',\n            dynamic_library: 'com.apple.product-type.library.dynamic',\n            framework: 'com.apple.product-type.framework',\n            static_library: 'com.apple.product-type.library.static',\n            unit_test_bundle: 'com.apple.product-type.bundle.unit-test',\n            watch_app: 'com.apple.product-type.application.watchapp',\n            watch2_app: 'com.apple.product-type.application.watchapp2',\n            watch_extension: 'com.apple.product-type.watchkit-extension',\n            watch2_extension: 'com.apple.product-type.watchkit2-extension'\n        };\n\n    return PRODUCTTYPE_BY_TARGETTYPE[targetType]\n}\n\nfunction filetypeForProducttype (productType) {\n\n    FILETYPE_BY_PRODUCTTYPE = {\n            'com.apple.product-type.application': '\"wrapper.application\"',\n            'com.apple.product-type.app-extension': '\"wrapper.app-extension\"',\n            'com.apple.product-type.bundle': '\"wrapper.plug-in\"',\n            'com.apple.product-type.tool': '\"compiled.mach-o.dylib\"',\n            'com.apple.product-type.library.dynamic': '\"compiled.mach-o.dylib\"',\n            'com.apple.product-type.framework': '\"wrapper.framework\"',\n            'com.apple.product-type.library.static': '\"archive.ar\"',\n            'com.apple.product-type.bundle.unit-test': '\"wrapper.cfbundle\"',\n            'com.apple.product-type.application.watchapp': '\"wrapper.application\"',\n            'com.apple.product-type.application.watchapp2': '\"wrapper.application\"',\n            'com.apple.product-type.watchkit-extension': '\"wrapper.app-extension\"',\n            'com.apple.product-type.watchkit2-extension': '\"wrapper.app-extension\"'\n        };\n\n    return FILETYPE_BY_PRODUCTTYPE[productType]\n}\n\npbxProject.prototype.getFirstProject = function() {\n\n    // Get pbxProject container\n    var pbxProjectContainer = this.pbxProjectSection();\n\n    // Get first pbxProject UUID\n    var firstProjectUuid = Object.keys(pbxProjectContainer)[0];\n\n    // Get first pbxProject\n    var firstProject = pbxProjectContainer[firstProjectUuid];\n\n     return {\n        uuid: firstProjectUuid,\n        firstProject: firstProject\n    }\n}\n\npbxProject.prototype.getFirstTarget = function() {\n    // Get first target's UUID\n    var firstTargetUuid = this.getFirstProject()['firstProject']['targets'][0].value;\n\n    // Get first pbxNativeTarget\n    var firstTarget = this.pbxNativeTargetSection()[firstTargetUuid];\n\n    return {\n        uuid: firstTargetUuid,\n        firstTarget: firstTarget\n    }\n}\n\npbxProject.prototype.getTarget = function(productType) {\n    // Find target by product type\n    var targets = this.getFirstProject()['firstProject']['targets'];\n    var nativeTargets = this.pbxNativeTargetSection();\n    for (var i = 0; i < targets.length; i++) {\n        var target = targets[i];\n        var targetUuid = target.value;\n        if (nativeTargets[targetUuid]['productType'] === '\"' + productType + '\"') {\n            // Get pbxNativeTarget\n            var nativeTarget = this.pbxNativeTargetSection()[targetUuid];\n            return {\n                uuid: targetUuid,\n                target: nativeTarget\n            };\n        }\n    }\n\n    return null;\n}\n\n/*** NEW ***/\n\npbxProject.prototype.addToPbxGroupType = function (file, groupKey, groupType) {\n    var group = this.getPBXGroupByKeyAndType(groupKey, groupType);\n    if (group && group.children !== undefined) {\n        if (typeof file === 'string') {\n            //Group Key\n            var childGroup = {\n                value:file,\n            };\n            if (this.getPBXGroupByKey(file)) {\n                childGroup.comment = this.getPBXGroupByKey(file).name;\n            }\n            else if (this.getPBXVariantGroupByKey(file)) {\n                childGroup.comment = this.getPBXVariantGroupByKey(file).name;\n            }\n\n            group.children.push(childGroup);\n        }\n        else {\n            //File Object\n            group.children.push(pbxGroupChild(file));\n        }\n    }\n}\n\npbxProject.prototype.addToPbxVariantGroup = function (file, groupKey) {\n    this.addToPbxGroupType(file, groupKey, 'PBXVariantGroup');\n}\n\npbxProject.prototype.addToPbxGroup = function (file, groupKey) {\n    this.addToPbxGroupType(file, groupKey, 'PBXGroup');\n}\n\n\n\npbxProject.prototype.pbxCreateGroupWithType = function(name, pathName, groupType) {\n    //Create object\n    var model = {\n        isa: '\"' + groupType + '\"',\n        children: [],\n        name: name,\n        sourceTree: '\"<group>\"'\n    };\n    if (pathName) model.path = pathName;\n    var key = this.generateUuid();\n\n    //Create comment\n    var commendId = key + '_comment';\n\n    //add obj and commentObj to groups;\n    var groups = this.hash.project.objects[groupType];\n    if (!groups) {\n        groups = this.hash.project.objects[groupType] = new Object();\n    }\n    groups[commendId] = name;\n    groups[key] = model;\n\n    return key;\n}\n\npbxProject.prototype.pbxCreateVariantGroup = function(name) {\n    return this.pbxCreateGroupWithType(name, undefined, 'PBXVariantGroup')\n}\n\npbxProject.prototype.pbxCreateGroup = function(name, pathName) {\n    return this.pbxCreateGroupWithType(name, pathName, 'PBXGroup');\n}\n\n\n\npbxProject.prototype.removeFromPbxGroupAndType = function (file, groupKey, groupType) {\n    var group = this.getPBXGroupByKeyAndType(groupKey, groupType);\n    if (group) {\n        var groupChildren = group.children, i;\n        for(i in groupChildren) {\n            if(pbxGroupChild(file).value == groupChildren[i].value &&\n                pbxGroupChild(file).comment == groupChildren[i].comment) {\n                groupChildren.splice(i, 1);\n                break;\n            }\n        }\n    }\n}\n\npbxProject.prototype.removeFromPbxGroup = function (file, groupKey) {\n    this.removeFromPbxGroupAndType(file, groupKey, 'PBXGroup');\n}\n\npbxProject.prototype.removeFromPbxVariantGroup = function (file, groupKey) {\n    this.removeFromPbxGroupAndType(file, groupKey, 'PBXVariantGroup');\n}\n\n\n\npbxProject.prototype.getPBXGroupByKeyAndType = function(key, groupType) {\n    return this.hash.project.objects[groupType][key];\n};\n\npbxProject.prototype.getPBXGroupByKey = function(key) {\n    return this.hash.project.objects['PBXGroup'][key];\n};\n\npbxProject.prototype.getPBXVariantGroupByKey = function(key) {\n    return this.hash.project.objects['PBXVariantGroup'][key];\n};\n\n\n\npbxProject.prototype.findPBXGroupKeyAndType = function(criteria, groupType) {\n    var groups = this.hash.project.objects[groupType];\n    var target;\n\n    for (var key in groups) {\n        // only look for comments\n        if (COMMENT_KEY.test(key)) continue;\n\n        var group = groups[key];\n        if (criteria && criteria.path && criteria.name) {\n            if (criteria.path === group.path && criteria.name === group.name) {\n                target = key;\n                break\n            }\n        }\n        else if (criteria && criteria.path) {\n            if (criteria.path === group.path) {\n                target = key;\n                break\n            }\n        }\n        else if (criteria && criteria.name) {\n            if (criteria.name === group.name) {\n                target = key;\n                break\n            }\n        }\n    }\n\n    return target;\n}\n\npbxProject.prototype.findPBXGroupKey = function(criteria) {\n    return this.findPBXGroupKeyAndType(criteria, 'PBXGroup');\n}\n\npbxProject.prototype.findPBXVariantGroupKey = function(criteria) {\n    return this.findPBXGroupKeyAndType(criteria, 'PBXVariantGroup');\n}\n\npbxProject.prototype.addLocalizationVariantGroup = function(name) {\n    var groupKey = this.pbxCreateVariantGroup(name);\n\n    var resourceGroupKey = this.findPBXGroupKey({name: 'Resources'});\n    this.addToPbxGroup(groupKey, resourceGroupKey);\n\n    var localizationVariantGroup = {\n        uuid: this.generateUuid(),\n        fileRef: groupKey,\n        basename: name\n    }\n    this.addToPbxBuildFileSection(localizationVariantGroup);        // PBXBuildFile\n    this.addToPbxResourcesBuildPhase(localizationVariantGroup);     //PBXResourcesBuildPhase\n\n    return localizationVariantGroup;\n};\n\npbxProject.prototype.addKnownRegion = function (name) {\n  if (!this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions']) {\n    this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'] = [];\n  }\n  if (!this.hasKnownRegion(name)) {\n    this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'].push(name);\n  }\n}\n\npbxProject.prototype.removeKnownRegion = function (name) {\n  var regions = this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'];\n  if (regions) {\n    for (var i = 0; i < regions.length; i++) {\n      if (regions[i] === name) {\n        regions.splice(i, 1);\n        break;\n      }\n    }\n    this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'] = regions;\n  }\n}\n\npbxProject.prototype.hasKnownRegion = function (name) {\n  var regions = this.pbxProjectSection()[this.getFirstProject()['uuid']]['knownRegions'];\n  if (regions) {\n    for (var i in regions) {\n      if (regions[i] === name) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\npbxProject.prototype.getPBXObject = function(name) {\n    return this.hash.project.objects[name];\n}\n\n\n\npbxProject.prototype.addFile = function (path, group, opt) {\n    var file = new pbxFile(path, opt);\n\n    // null is better for early errors\n    if (this.hasFile(file.path)) return null;\n\n    file.fileRef = this.generateUuid();\n\n    this.addToPbxFileReferenceSection(file);    // PBXFileReference\n\n    if (this.getPBXGroupByKey(group)) {\n        this.addToPbxGroup(file, group);        // PBXGroup\n    }\n    else if (this.getPBXVariantGroupByKey(group)) {\n        this.addToPbxVariantGroup(file, group);            // PBXVariantGroup\n    }\n\n    return file;\n}\n\npbxProject.prototype.removeFile = function (path, group, opt) {\n    var file = new pbxFile(path, opt);\n\n    this.removeFromPbxFileReferenceSection(file);    // PBXFileReference\n\n    if (this.getPBXGroupByKey(group)) {\n        this.removeFromPbxGroup(file, group);            // PBXGroup\n    }\n    else if (this.getPBXVariantGroupByKey(group)) {\n        this.removeFromPbxVariantGroup(file, group);     // PBXVariantGroup\n    }\n\n    return file;\n}\n\n\n\npbxProject.prototype.getBuildProperty = function(prop, build, targetName) {\n    var target;\n    let validConfigs = [];\n\n    if (targetName) {\n        const target = this.pbxTargetByName(targetName);\n        const targetBuildConfigs = target && target.buildConfigurationList;\n\n        const xcConfigList = this.pbxXCConfigurationList();\n\n        // Collect the UUID's from the configuration of our target\n        for (const configName in xcConfigList) {\n            if (!COMMENT_KEY.test(configName) && targetBuildConfigs === configName) {\n                const buildVariants = xcConfigList[configName].buildConfigurations;\n\n                for (const item of buildVariants) {\n                    validConfigs.push(item.value);\n                }\n\n                break;\n            }\n        }\n    }\n    \n    var configs = this.pbxXCBuildConfigurationSection();\n    for (var configName in configs) {\n        if (!COMMENT_KEY.test(configName)) {\n            if (targetName && !validConfigs.includes(configName)) continue;\n            var config = configs[configName];\n            if ( (build && config.name === build) || (build === undefined) ) {\n                if (config.buildSettings[prop] !== undefined) {\n                    target = config.buildSettings[prop];\n                }\n            }\n        }\n    }\n    return target;\n}\n\npbxProject.prototype.getBuildConfigByName = function(name) {\n    var target = {};\n    var configs = this.pbxXCBuildConfigurationSection();\n    for (var configName in configs) {\n        if (!COMMENT_KEY.test(configName)) {\n            var config = configs[configName];\n            if (config.name === name)  {\n                target[configName] = config;\n            }\n        }\n    }\n    return target;\n}\n\npbxProject.prototype.addDataModelDocument = function(filePath, group, opt) {\n    if (!group) {\n        group = 'Resources';\n    }\n    if (!this.getPBXGroupByKey(group)) {\n        group = this.findPBXGroupKey({ name: group });\n    }\n\n    var file = new pbxFile(filePath, opt);\n\n    if (!file || this.hasFile(file.path)) return null;\n\n    file.fileRef = this.generateUuid();\n    this.addToPbxGroup(file, group);\n\n    if (!file) return false;\n\n    file.target = opt ? opt.target : undefined;\n    file.uuid = this.generateUuid();\n\n    this.addToPbxBuildFileSection(file);\n    this.addToPbxSourcesBuildPhase(file);\n\n    file.models = [];\n    var currentVersionName;\n    var modelFiles = fs.readdirSync(file.path);\n    for (var index in modelFiles) {\n        var modelFileName = modelFiles[index];\n        var modelFilePath = path.join(filePath, modelFileName);\n\n        if (modelFileName == '.xccurrentversion') {\n            currentVersionName = plist.readFileSync(modelFilePath)._XCCurrentVersionName;\n            continue;\n        }\n\n        var modelFile = new pbxFile(modelFilePath);\n        modelFile.fileRef = this.generateUuid();\n\n        this.addToPbxFileReferenceSection(modelFile);\n\n        file.models.push(modelFile);\n\n        if (currentVersionName && currentVersionName === modelFileName) {\n            file.currentModel = modelFile;\n        }\n    }\n\n    if (!file.currentModel) {\n        file.currentModel = file.models[0];\n    }\n\n    this.addToXcVersionGroupSection(file);\n\n    return file;\n}\n\npbxProject.prototype.addTargetAttribute = function(prop, value, target) {\n    var attributes = this.getFirstProject()['firstProject']['attributes'];\n    if (attributes['TargetAttributes'] === undefined) {\n        attributes['TargetAttributes'] = {};\n    }\n    target = target || this.getFirstTarget();\n    if (attributes['TargetAttributes'][target.uuid] === undefined) {\n      attributes['TargetAttributes'][target.uuid] = {};\n    }\n    attributes['TargetAttributes'][target.uuid][prop] = value;\n}\n\npbxProject.prototype.removeTargetAttribute = function(prop, target) {\n    var attributes = this.getFirstProject()['firstProject']['attributes'];\n    target = target || this.getFirstTarget();\n    if (attributes['TargetAttributes'] &&\n        attributes['TargetAttributes'][target.uuid]) {\n        delete attributes['TargetAttributes'][target.uuid][prop];\n    }\n}\n\nmodule.exports = pbxProject;\n"]},"metadata":{},"sourceType":"script"}