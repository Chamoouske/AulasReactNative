{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar path_1 = __importDefault(require(\"path\"));\n\nvar constants_1 = require(\"../constants\");\n\nvar file_utils_1 = require(\"../utils/file-utils\");\n\nvar xcode_1 = require(\"../xcode\");\n\nvar STORYBOARD_FILE_PATH = './SplashScreen.storyboard';\n\nfunction updatePbxProject(_ref) {\n  var projectName = _ref.projectName,\n      pbxProject = _ref.pbxProject,\n      applicationNativeTarget = _ref.applicationNativeTarget;\n  var storyboardFilePath = path_1.default.join(projectName, STORYBOARD_FILE_PATH);\n\n  if (!pbxProject.hasFile(storyboardFilePath)) {\n    var group = pbxProject.findPBXGroupKey({\n      name: projectName\n    });\n\n    if (!group) {\n      throw new Error(\"Couldn't locate proper PBXGroup '.xcodeproj' file.\");\n    }\n\n    xcode_1.addStoryboardFileToProject(pbxProject, storyboardFilePath, {\n      target: applicationNativeTarget.uuid,\n      group: group\n    });\n  }\n}\n\nfunction configureStoryboard(iosProject) {\n  var config,\n      _a,\n      resizeMode,\n      splashScreenImagePresent,\n      contentMode,\n      filePath,\n      _args = arguments;\n\n  return _regeneratorRuntime.async(function configureStoryboard$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          config = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n          resizeMode = (_a = config.imageResizeMode) !== null && _a !== void 0 ? _a : constants_1.SplashScreenImageResizeMode.CONTAIN;\n          splashScreenImagePresent = Boolean(config.image);\n          _context.t0 = resizeMode;\n          _context.next = _context.t0 === constants_1.SplashScreenImageResizeMode.CONTAIN ? 6 : _context.t0 === constants_1.SplashScreenImageResizeMode.COVER ? 8 : 10;\n          break;\n\n        case 6:\n          contentMode = 'scaleAspectFit';\n          return _context.abrupt(\"break\", 11);\n\n        case 8:\n          contentMode = 'scaleAspectFill';\n          return _context.abrupt(\"break\", 11);\n\n        case 10:\n          throw new Error(\"resizeMode = \" + resizeMode + \" is not supported for iOS platform.\");\n\n        case 11:\n          filePath = path_1.default.resolve(iosProject.projectPath, STORYBOARD_FILE_PATH);\n          _context.next = 14;\n          return _regeneratorRuntime.awrap(file_utils_1.createDirAndWriteFile(filePath, \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<document\\n  type=\\\"com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB\\\"\\n  version=\\\"3.0\\\"\\n  toolsVersion=\\\"16096\\\"\\n  targetRuntime=\\\"iOS.CocoaTouch\\\"\\n  propertyAccessControl=\\\"none\\\"\\n  useAutolayout=\\\"YES\\\"\\n  launchScreen=\\\"YES\\\"\\n  useTraitCollections=\\\"YES\\\"\\n  useSafeAreas=\\\"YES\\\"\\n  colorMatched=\\\"YES\\\"\\n  initialViewController=\\\"EXPO-VIEWCONTROLLER-1\\\"\\n>\\n  <device id=\\\"retina5_5\\\" orientation=\\\"portrait\\\" appearance=\\\"light\\\"/>\\n  <dependencies>\\n    <deployment identifier=\\\"iOS\\\"/>\\n    <plugIn identifier=\\\"com.apple.InterfaceBuilder.IBCocoaTouchPlugin\\\" version=\\\"16087\\\"/>\\n    <capability name=\\\"Safe area layout guides\\\" minToolsVersion=\\\"9.0\\\"/>\\n    <capability name=\\\"documents saved in the Xcode 8 format\\\" minToolsVersion=\\\"8.0\\\"/>\\n  </dependencies>\\n  <scenes>\\n    <!--View Controller-->\\n    <scene sceneID=\\\"EXPO-SCENE-1\\\">\\n      <objects>\\n        <viewController\\n          storyboardIdentifier=\\\"SplashScreenViewController\\\"\\n          id=\\\"EXPO-VIEWCONTROLLER-1\\\"\\n          sceneMemberID=\\\"viewController\\\"\\n        >\\n          <view\\n            key=\\\"view\\\"\\n            userInteractionEnabled=\\\"NO\\\"\\n            contentMode=\\\"scaleToFill\\\"\\n            insetsLayoutMarginsFromSafeArea=\\\"NO\\\"\\n            id=\\\"EXPO-ContainerView\\\"\\n            userLabel=\\\"ContainerView\\\"\\n          >\\n            <rect key=\\\"frame\\\" x=\\\"0.0\\\" y=\\\"0.0\\\" width=\\\"414\\\" height=\\\"736\\\"/>\\n            <autoresizingMask key=\\\"autoresizingMask\\\" flexibleMaxX=\\\"YES\\\" flexibleMaxY=\\\"YES\\\"/>\\n            <subviews>\\n              <imageView\\n                userInteractionEnabled=\\\"NO\\\"\\n                contentMode=\\\"scaleAspectFill\\\"\\n                horizontalHuggingPriority=\\\"251\\\"\\n                verticalHuggingPriority=\\\"251\\\"\\n                insetsLayoutMarginsFromSafeArea=\\\"NO\\\"\\n                image=\\\"SplashScreenBackground\\\"\\n                translatesAutoresizingMaskIntoConstraints=\\\"NO\\\"\\n                id=\\\"EXPO-SplashScreenBackground\\\"\\n                userLabel=\\\"SplashScreenBackground\\\"\\n              >\\n                <rect key=\\\"frame\\\" x=\\\"0.0\\\" y=\\\"0.0\\\" width=\\\"414\\\" height=\\\"736\\\"/>\\n              </imageView>\" + (!splashScreenImagePresent ? '' : \"\\n              <imageView\\n                clipsSubviews=\\\"YES\\\"\\n                userInteractionEnabled=\\\"NO\\\"\\n                contentMode=\\\"\" + contentMode + \"\\\"\\n                horizontalHuggingPriority=\\\"251\\\"\\n                verticalHuggingPriority=\\\"251\\\"\\n                translatesAutoresizingMaskIntoConstraints=\\\"NO\\\"\\n                image=\\\"SplashScreen\\\"\\n                id=\\\"EXPO-SplashScreen\\\"\\n                userLabel=\\\"SplashScreen\\\"\\n              >\\n                <rect key=\\\"frame\\\" x=\\\"0.0\\\" y=\\\"0.0\\\" width=\\\"414\\\" height=\\\"736\\\"/>\\n              </imageView>\") + \"\\n            </subviews>\\n            <constraints>\\n              <constraint firstItem=\\\"EXPO-SplashScreenBackground\\\" firstAttribute=\\\"top\\\" secondItem=\\\"EXPO-ContainerView\\\" secondAttribute=\\\"top\\\" id=\\\"1gX-mQ-vu6\\\"/>\\n              <constraint firstItem=\\\"EXPO-SplashScreenBackground\\\" firstAttribute=\\\"leading\\\" secondItem=\\\"EXPO-ContainerView\\\" secondAttribute=\\\"leading\\\" id=\\\"6tX-OG-Sck\\\"/>\\n              <constraint firstItem=\\\"EXPO-SplashScreenBackground\\\" firstAttribute=\\\"trailing\\\" secondItem=\\\"EXPO-ContainerView\\\" secondAttribute=\\\"trailing\\\" id=\\\"ABX-8g-7v4\\\"/>\\n              <constraint firstItem=\\\"EXPO-SplashScreenBackground\\\" firstAttribute=\\\"bottom\\\" secondItem=\\\"EXPO-ContainerView\\\" secondAttribute=\\\"bottom\\\" id=\\\"jkI-2V-eW5\\\"/>\" + (!splashScreenImagePresent ? '' : \"\\n              <constraint firstItem=\\\"EXPO-SplashScreen\\\" firstAttribute=\\\"top\\\" secondItem=\\\"EXPO-ContainerView\\\" secondAttribute=\\\"top\\\" id=\\\"2VS-Uz-0LU\\\"/>\\n              <constraint firstItem=\\\"EXPO-SplashScreen\\\" firstAttribute=\\\"leading\\\" secondItem=\\\"EXPO-ContainerView\\\" secondAttribute=\\\"leading\\\" id=\\\"LhH-Ei-DKo\\\"/>\\n              <constraint firstItem=\\\"EXPO-SplashScreen\\\" firstAttribute=\\\"trailing\\\" secondItem=\\\"EXPO-ContainerView\\\" secondAttribute=\\\"trailing\\\" id=\\\"I6l-TP-6fn\\\"/>\\n              <constraint firstItem=\\\"EXPO-SplashScreen\\\" firstAttribute=\\\"bottom\\\" secondItem=\\\"EXPO-ContainerView\\\" secondAttribute=\\\"bottom\\\" id=\\\"nbp-HC-eaG\\\"/>\") + \"\\n            </constraints>\\n            <viewLayoutGuide key=\\\"safeArea\\\" id=\\\"Rmq-lb-GrQ\\\"/>\\n          </view>\\n        </viewController>\\n        <placeholder placeholderIdentifier=\\\"IBFirstResponder\\\" id=\\\"EXPO-PLACEHOLDER-1\\\" userLabel=\\\"First Responder\\\" sceneMemberID=\\\"firstResponder\\\"/>\\n      </objects>\\n      <point key=\\\"canvasLocation\\\" x=\\\"140.625\\\" y=\\\"129.4921875\\\"/>\\n    </scene>\\n  </scenes>\\n  <resources>\" + (!splashScreenImagePresent ? '' : \"\\n    <image name=\\\"SplashScreen\\\" width=\\\"414\\\" height=\\\"736\\\"/>\") + \"\\n    <image name=\\\"SplashScreenBackground\\\" width=\\\"1\\\" height=\\\"1\\\"/>\\n  </resources>\\n</document>\\n\"));\n\n        case 14:\n          _context.next = 16;\n          return _regeneratorRuntime.awrap(updatePbxProject(iosProject));\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nexports.default = configureStoryboard;","map":{"version":3,"sources":["../../src/ios/Storyboard.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,IAAA,MAAA,GAAA,eAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;;AAEA,IAAA,WAAA,GAAA,OAAA,gBAAA;;AACA,IAAA,YAAA,GAAA,OAAA,uBAAA;;AACA,IAAA,OAAA,GAAA,OAAA,YAAA;;AAGA,IAAM,oBAAoB,GAAG,2BAA7B;;AAMA,SAAS,gBAAT,OAA0F;AAAA,MAA9D,WAA8D,QAA9D,WAA8D;AAAA,MAAjD,UAAiD,QAAjD,UAAiD;AAAA,MAArC,uBAAqC,QAArC,uBAAqC;AAGxF,MAAM,kBAAkB,GAAG,MAAA,CAAA,OAAA,CAAK,IAAL,CAAU,WAAV,EAAuB,oBAAvB,CAA3B;;AACA,MAAI,CAAC,UAAU,CAAC,OAAX,CAAmB,kBAAnB,CAAL,EAA6C;AAC3C,QAAM,KAAK,GAAG,UAAU,CAAC,eAAX,CAA2B;AAAE,MAAA,IAAI,EAAE;AAAR,KAA3B,CAAd;;AACA,QAAI,CAAC,KAAL,EAAY;AACV,YAAM,IAAI,KAAJ,sDAAN;AACD;;AACD,IAAA,OAAA,CAAA,0BAAA,CAA2B,UAA3B,EAAuC,kBAAvC,EAA2D;AACzD,MAAA,MAAM,EAAE,uBAAuB,CAAC,IADyB;AAEzD,MAAA,KAAK,EAAL;AAFyD,KAA3D;AAID;AACF;;AAMc,SAAe,mBAAf,CACb,UADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEb,UAAA,MAFa,2DAKT,EALS;AAOP,UAAA,UAPO,GAOG,CAAA,EAAA,GACd,MAAM,CAAC,eADO,MACQ,IADR,IACQ,EAAA,KAAA,KAAA,CADR,GACQ,EADR,GACY,WAAA,CAAA,2BAAA,CAA4B,OAR3C;AASP,UAAA,wBATO,GASoB,OAAO,CAAC,MAAM,CAAC,KAAR,CAT3B;AAAA,wBAYL,UAZK;AAAA,0CAaN,WAAA,CAAA,2BAAA,CAA4B,OAbtB,uBAgBN,WAAA,CAAA,2BAAA,CAA4B,KAhBtB;AAAA;;AAAA;AAcT,UAAA,WAAW,GAAG,gBAAd;AAdS;;AAAA;AAiBT,UAAA,WAAW,GAAG,iBAAd;AAjBS;;AAAA;AAAA,gBAoBH,IAAI,KAAJ,mBAA0B,UAA1B,yCApBG;;AAAA;AAuBP,UAAA,QAvBO,GAuBI,MAAA,CAAA,OAAA,CAAK,OAAL,CAAa,UAAU,CAAC,WAAxB,EAAqC,oBAArC,CAvBJ;AAAA;AAAA,2CAwBP,YAAA,CAAA,qBAAA,CACJ,QADI,krEAwDQ,CAAC,wBAAD,GACI,EADJ,wJAMe,WANf,gbAxDR,8vBA+EQ,CAAC,wBAAD,GACI,EADJ,6pBA/ER,sbAiGJ,CAAC,wBAAD,GACI,EADJ,sEAjGI,6GAxBO;;AAAA;AAAA;AAAA,2CAoIP,gBAAgB,CAAC,UAAD,CApIT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAf,OAAA,CAAA,OAAA,GAAA,mBAAA","sourcesContent":["import path from 'path';\n\nimport { SplashScreenImageResizeMode, SplashScreenImageResizeModeType } from '../constants';\nimport { createDirAndWriteFile } from '../utils/file-utils';\nimport { addStoryboardFileToProject } from '../xcode';\nimport { IosProject } from './pbxproj';\n\nconst STORYBOARD_FILE_PATH = './SplashScreen.storyboard';\n\n/**\n * Modifies `.pbxproj` by:\n * - adding reference for `.storyboard` file\n */\nfunction updatePbxProject({ projectName, pbxProject, applicationNativeTarget }: IosProject): void {\n  // Check if `${projectName}/SplashScreen.storyboard` already exists\n  // Path relative to `ios` directory\n  const storyboardFilePath = path.join(projectName, STORYBOARD_FILE_PATH);\n  if (!pbxProject.hasFile(storyboardFilePath)) {\n    const group = pbxProject.findPBXGroupKey({ name: projectName });\n    if (!group) {\n      throw new Error(`Couldn't locate proper PBXGroup '.xcodeproj' file.`);\n    }\n    addStoryboardFileToProject(pbxProject, storyboardFilePath, {\n      target: applicationNativeTarget.uuid,\n      group,\n    });\n  }\n}\n\n/**\n * Creates [STORYBOARD] file containing ui description of Splash/Launch Screen.\n * > WARNING: modifies `pbxproj`\n */\nexport default async function configureStoryboard(\n  iosProject: IosProject,\n  config: {\n    imageResizeMode?: SplashScreenImageResizeModeType;\n    image?: string;\n  } = {}\n) {\n  const resizeMode: SplashScreenImageResizeModeType =\n    config.imageResizeMode ?? SplashScreenImageResizeMode.CONTAIN;\n  const splashScreenImagePresent = Boolean(config.image);\n\n  let contentMode: string;\n  switch (resizeMode) {\n    case SplashScreenImageResizeMode.CONTAIN:\n      contentMode = 'scaleAspectFit';\n      break;\n    case SplashScreenImageResizeMode.COVER:\n      contentMode = 'scaleAspectFill';\n      break;\n    default:\n      throw new Error(`resizeMode = ${resizeMode} is not supported for iOS platform.`);\n  }\n\n  const filePath = path.resolve(iosProject.projectPath, STORYBOARD_FILE_PATH);\n  await createDirAndWriteFile(\n    filePath,\n    `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<document\n  type=\"com.apple.InterfaceBuilder3.CocoaTouch.Storyboard.XIB\"\n  version=\"3.0\"\n  toolsVersion=\"16096\"\n  targetRuntime=\"iOS.CocoaTouch\"\n  propertyAccessControl=\"none\"\n  useAutolayout=\"YES\"\n  launchScreen=\"YES\"\n  useTraitCollections=\"YES\"\n  useSafeAreas=\"YES\"\n  colorMatched=\"YES\"\n  initialViewController=\"EXPO-VIEWCONTROLLER-1\"\n>\n  <device id=\"retina5_5\" orientation=\"portrait\" appearance=\"light\"/>\n  <dependencies>\n    <deployment identifier=\"iOS\"/>\n    <plugIn identifier=\"com.apple.InterfaceBuilder.IBCocoaTouchPlugin\" version=\"16087\"/>\n    <capability name=\"Safe area layout guides\" minToolsVersion=\"9.0\"/>\n    <capability name=\"documents saved in the Xcode 8 format\" minToolsVersion=\"8.0\"/>\n  </dependencies>\n  <scenes>\n    <!--View Controller-->\n    <scene sceneID=\"EXPO-SCENE-1\">\n      <objects>\n        <viewController\n          storyboardIdentifier=\"SplashScreenViewController\"\n          id=\"EXPO-VIEWCONTROLLER-1\"\n          sceneMemberID=\"viewController\"\n        >\n          <view\n            key=\"view\"\n            userInteractionEnabled=\"NO\"\n            contentMode=\"scaleToFill\"\n            insetsLayoutMarginsFromSafeArea=\"NO\"\n            id=\"EXPO-ContainerView\"\n            userLabel=\"ContainerView\"\n          >\n            <rect key=\"frame\" x=\"0.0\" y=\"0.0\" width=\"414\" height=\"736\"/>\n            <autoresizingMask key=\"autoresizingMask\" flexibleMaxX=\"YES\" flexibleMaxY=\"YES\"/>\n            <subviews>\n              <imageView\n                userInteractionEnabled=\"NO\"\n                contentMode=\"scaleAspectFill\"\n                horizontalHuggingPriority=\"251\"\n                verticalHuggingPriority=\"251\"\n                insetsLayoutMarginsFromSafeArea=\"NO\"\n                image=\"SplashScreenBackground\"\n                translatesAutoresizingMaskIntoConstraints=\"NO\"\n                id=\"EXPO-SplashScreenBackground\"\n                userLabel=\"SplashScreenBackground\"\n              >\n                <rect key=\"frame\" x=\"0.0\" y=\"0.0\" width=\"414\" height=\"736\"/>\n              </imageView>${\n                !splashScreenImagePresent\n                  ? ''\n                  : `\n              <imageView\n                clipsSubviews=\"YES\"\n                userInteractionEnabled=\"NO\"\n                contentMode=\"${contentMode}\"\n                horizontalHuggingPriority=\"251\"\n                verticalHuggingPriority=\"251\"\n                translatesAutoresizingMaskIntoConstraints=\"NO\"\n                image=\"SplashScreen\"\n                id=\"EXPO-SplashScreen\"\n                userLabel=\"SplashScreen\"\n              >\n                <rect key=\"frame\" x=\"0.0\" y=\"0.0\" width=\"414\" height=\"736\"/>\n              </imageView>`\n              }\n            </subviews>\n            <constraints>\n              <constraint firstItem=\"EXPO-SplashScreenBackground\" firstAttribute=\"top\" secondItem=\"EXPO-ContainerView\" secondAttribute=\"top\" id=\"1gX-mQ-vu6\"/>\n              <constraint firstItem=\"EXPO-SplashScreenBackground\" firstAttribute=\"leading\" secondItem=\"EXPO-ContainerView\" secondAttribute=\"leading\" id=\"6tX-OG-Sck\"/>\n              <constraint firstItem=\"EXPO-SplashScreenBackground\" firstAttribute=\"trailing\" secondItem=\"EXPO-ContainerView\" secondAttribute=\"trailing\" id=\"ABX-8g-7v4\"/>\n              <constraint firstItem=\"EXPO-SplashScreenBackground\" firstAttribute=\"bottom\" secondItem=\"EXPO-ContainerView\" secondAttribute=\"bottom\" id=\"jkI-2V-eW5\"/>${\n                !splashScreenImagePresent\n                  ? ''\n                  : `\n              <constraint firstItem=\"EXPO-SplashScreen\" firstAttribute=\"top\" secondItem=\"EXPO-ContainerView\" secondAttribute=\"top\" id=\"2VS-Uz-0LU\"/>\n              <constraint firstItem=\"EXPO-SplashScreen\" firstAttribute=\"leading\" secondItem=\"EXPO-ContainerView\" secondAttribute=\"leading\" id=\"LhH-Ei-DKo\"/>\n              <constraint firstItem=\"EXPO-SplashScreen\" firstAttribute=\"trailing\" secondItem=\"EXPO-ContainerView\" secondAttribute=\"trailing\" id=\"I6l-TP-6fn\"/>\n              <constraint firstItem=\"EXPO-SplashScreen\" firstAttribute=\"bottom\" secondItem=\"EXPO-ContainerView\" secondAttribute=\"bottom\" id=\"nbp-HC-eaG\"/>`\n              }\n            </constraints>\n            <viewLayoutGuide key=\"safeArea\" id=\"Rmq-lb-GrQ\"/>\n          </view>\n        </viewController>\n        <placeholder placeholderIdentifier=\"IBFirstResponder\" id=\"EXPO-PLACEHOLDER-1\" userLabel=\"First Responder\" sceneMemberID=\"firstResponder\"/>\n      </objects>\n      <point key=\"canvasLocation\" x=\"140.625\" y=\"129.4921875\"/>\n    </scene>\n  </scenes>\n  <resources>${\n    !splashScreenImagePresent\n      ? ''\n      : `\n    <image name=\"SplashScreen\" width=\"414\" height=\"736\"/>`\n  }\n    <image name=\"SplashScreenBackground\" width=\"1\" height=\"1\"/>\n  </resources>\n</document>\n`\n  );\n\n  await updatePbxProject(iosProject);\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}