{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Platform, UnavailabilityError } from '@unimodules/core';\nimport Constants from 'expo-constants';\nimport invariant from 'invariant';\nimport qs from 'qs';\nimport { useEffect, useState } from 'react';\nimport URL from 'url-parse';\nimport NativeLinking from \"./ExpoLinking\";\nimport { hasCustomScheme, resolveScheme } from \"./Schemes\";\n\nfunction validateURL(url) {\n  invariant(typeof url === 'string', 'Invalid URL: should be a string. Was: ' + url);\n  invariant(url, 'Invalid URL: cannot be empty');\n}\n\nfunction getHostUri() {\n  var _Constants$manifest, _Constants$manifest2;\n\n  if ((_Constants$manifest = Constants.manifest) != null && _Constants$manifest.hostUri) {\n    return Constants.manifest.hostUri;\n  } else if (!((_Constants$manifest2 = Constants.manifest) != null && _Constants$manifest2.hostUri) && !hasCustomScheme()) {\n    return removeScheme(Constants.linkingUri).replace(/\\/--($|\\/.*$)/, '');\n  } else {\n    return null;\n  }\n}\n\nfunction isExpoHosted() {\n  var _Constants$manifest3;\n\n  var hostUri = getHostUri();\n  return !!(hostUri && (/^(.*\\.)?(expo\\.io|exp\\.host|exp\\.direct|expo\\.test)(:.*)?(\\/.*)?$/.test(hostUri) || (_Constants$manifest3 = Constants.manifest) != null && _Constants$manifest3.developer));\n}\n\nfunction removeScheme(url) {\n  return url.replace(/^[a-zA-Z0-9+.-]+:\\/\\//, '');\n}\n\nfunction removePort(url) {\n  return url.replace(/(?=([a-zA-Z0-9+.-]+:\\/\\/)?[^/]):\\d+/, '');\n}\n\nfunction removeLeadingSlash(url) {\n  return url.replace(/^\\//, '');\n}\n\nfunction removeTrailingSlashAndQueryString(url) {\n  return url.replace(/\\/?\\?.*$/, '');\n}\n\nfunction ensureLeadingSlash(input, shouldAppend) {\n  var hasSlash = input.endsWith('/');\n\n  if (hasSlash && !shouldAppend) {\n    return input.substring(0, input.length - 1);\n  } else if (!hasSlash && shouldAppend) {\n    return input + \"/\";\n  }\n\n  return input;\n}\n\nfunction ensureTrailingSlash(input, shouldAppend) {\n  var hasSlash = input.startsWith('/');\n\n  if (hasSlash && !shouldAppend) {\n    return input.substring(1);\n  } else if (!hasSlash && shouldAppend) {\n    return \"/\" + input;\n  }\n\n  return input;\n}\n\nexport function makeUrl() {\n  var path = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  var queryParams = arguments.length > 1 ? arguments[1] : undefined;\n  var scheme = arguments.length > 2 ? arguments[2] : undefined;\n  return createURL(path, {\n    queryParams: queryParams,\n    scheme: scheme,\n    isTripleSlashed: true\n  });\n}\nexport function createURL(path) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      scheme = _ref.scheme,\n      _ref$queryParams = _ref.queryParams,\n      queryParams = _ref$queryParams === void 0 ? {} : _ref$queryParams,\n      _ref$isTripleSlashed = _ref.isTripleSlashed,\n      isTripleSlashed = _ref$isTripleSlashed === void 0 ? false : _ref$isTripleSlashed;\n\n  if (Platform.OS === 'web') {\n    if (!Platform.isDOMAvailable) return '';\n    var origin = ensureLeadingSlash(window.location.origin, false);\n\n    var _queryString = qs.stringify(queryParams);\n\n    if (_queryString) {\n      _queryString = \"?\" + _queryString;\n    }\n\n    var outputPath = path;\n    if (outputPath) outputPath = ensureTrailingSlash(path, true);\n    return encodeURI(\"\" + origin + outputPath + _queryString);\n  }\n\n  var resolvedScheme = resolveScheme({\n    scheme: scheme\n  });\n  var hostUri = getHostUri() || '';\n\n  if (hasCustomScheme() && isExpoHosted()) {\n    hostUri = '';\n  }\n\n  if (path) {\n    if (isExpoHosted() && hostUri) {\n      path = \"/--/\" + removeLeadingSlash(path);\n    }\n\n    if (isTripleSlashed && !path.startsWith('/')) {\n      path = \"/\" + path;\n    }\n  } else {\n    path = '';\n  }\n\n  var queryString = '';\n  var queryStringMatchResult = hostUri.match(/(.*)\\?(.+)/);\n\n  if (queryStringMatchResult) {\n    hostUri = queryStringMatchResult[1];\n    queryString = queryStringMatchResult[2];\n    var paramsFromHostUri = {};\n\n    try {\n      var parsedParams = qs.parse(queryString);\n\n      if (typeof parsedParams === 'object') {\n        paramsFromHostUri = parsedParams;\n      }\n    } catch (e) {}\n\n    queryParams = _objectSpread(_objectSpread({}, queryParams), paramsFromHostUri);\n  }\n\n  queryString = qs.stringify(queryParams);\n\n  if (queryString) {\n    queryString = \"?\" + queryString;\n  }\n\n  hostUri = ensureTrailingSlash(hostUri, !isTripleSlashed);\n  return encodeURI(resolvedScheme + \":\" + (isTripleSlashed ? '/' : '') + \"/\" + hostUri + path + queryString);\n}\nexport function parse(url) {\n  validateURL(url);\n  var parsed = URL(url, true);\n\n  for (var param in parsed.query) {\n    parsed.query[param] = decodeURIComponent(parsed.query[param]);\n  }\n\n  var queryParams = parsed.query;\n  var hostUri = getHostUri() || '';\n  var hostUriStripped = removePort(removeTrailingSlashAndQueryString(hostUri));\n  var path = parsed.pathname || null;\n  var hostname = parsed.hostname || null;\n  var scheme = parsed.protocol || null;\n\n  if (scheme) {\n    scheme = scheme.substring(0, scheme.length - 1);\n  }\n\n  if (path) {\n    path = removeLeadingSlash(path);\n    var expoPrefix = null;\n\n    if (hostUriStripped) {\n      var parts = hostUriStripped.split('/');\n      expoPrefix = parts.slice(1).concat(['--/']).join('/');\n    }\n\n    if (isExpoHosted() && !hasCustomScheme() && expoPrefix && path.startsWith(expoPrefix)) {\n      path = path.substring(expoPrefix.length);\n      hostname = null;\n    } else if (path.indexOf('+') > -1) {\n      path = path.substring(path.indexOf('+') + 1);\n    }\n  }\n\n  return {\n    hostname: hostname,\n    path: path,\n    queryParams: queryParams,\n    scheme: scheme\n  };\n}\nexport function addEventListener(type, handler) {\n  NativeLinking.addEventListener(type, handler);\n}\nexport function removeEventListener(type, handler) {\n  NativeLinking.removeEventListener(type, handler);\n}\nexport function parseInitialURLAsync() {\n  var initialUrl;\n  return _regeneratorRuntime.async(function parseInitialURLAsync$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(NativeLinking.getInitialURL());\n\n        case 2:\n          initialUrl = _context.sent;\n\n          if (initialUrl) {\n            _context.next = 5;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            scheme: null,\n            hostname: null,\n            path: null,\n            queryParams: null\n          });\n\n        case 5:\n          return _context.abrupt(\"return\", parse(initialUrl));\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function sendIntent(action, extras) {\n  return _regeneratorRuntime.async(function sendIntent$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!(Platform.OS === 'android')) {\n            _context2.next = 4;\n            break;\n          }\n\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(NativeLinking.sendIntent(action, extras));\n\n        case 3:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 4:\n          throw new UnavailabilityError('Linking', 'sendIntent');\n\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function openSettings() {\n  return _regeneratorRuntime.async(function openSettings$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          if (!(Platform.OS === 'web')) {\n            _context3.next = 2;\n            break;\n          }\n\n          throw new UnavailabilityError('Linking', 'openSettings');\n\n        case 2:\n          if (!NativeLinking.openSettings) {\n            _context3.next = 6;\n            break;\n          }\n\n          _context3.next = 5;\n          return _regeneratorRuntime.awrap(NativeLinking.openSettings());\n\n        case 5:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 6:\n          _context3.next = 8;\n          return _regeneratorRuntime.awrap(openURL('app-settings:'));\n\n        case 8:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function getInitialURL() {\n  var _await$NativeLinking$;\n\n  return _regeneratorRuntime.async(function getInitialURL$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return _regeneratorRuntime.awrap(NativeLinking.getInitialURL());\n\n        case 2:\n          _context4.t0 = _await$NativeLinking$ = _context4.sent;\n\n          if (!(_context4.t0 != null)) {\n            _context4.next = 7;\n            break;\n          }\n\n          _context4.t1 = _await$NativeLinking$;\n          _context4.next = 8;\n          break;\n\n        case 7:\n          _context4.t1 = null;\n\n        case 8:\n          return _context4.abrupt(\"return\", _context4.t1);\n\n        case 9:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function openURL(url) {\n  return _regeneratorRuntime.async(function openURL$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          validateURL(url);\n          _context5.next = 3;\n          return _regeneratorRuntime.awrap(NativeLinking.openURL(url));\n\n        case 3:\n          return _context5.abrupt(\"return\", _context5.sent);\n\n        case 4:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function canOpenURL(url) {\n  return _regeneratorRuntime.async(function canOpenURL$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          validateURL(url);\n          _context6.next = 3;\n          return _regeneratorRuntime.awrap(NativeLinking.canOpenURL(url));\n\n        case 3:\n          return _context6.abrupt(\"return\", _context6.sent);\n\n        case 4:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function useUrl() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      url = _useState2[0],\n      setLink = _useState2[1];\n\n  function onChange(event) {\n    setLink(event.url);\n  }\n\n  useEffect(function () {\n    getInitialURL().then(function (url) {\n      return setLink(url);\n    });\n    addEventListener('url', onChange);\n    return function () {\n      return removeEventListener('url', onChange);\n    };\n  }, []);\n  return url;\n}\nexport * from \"./Linking.types\";","map":{"version":3,"sources":["/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/expo-linking/src/Linking.ts"],"names":["Platform","UnavailabilityError","Constants","invariant","qs","useEffect","useState","URL","NativeLinking","hasCustomScheme","resolveScheme","validateURL","url","getHostUri","manifest","hostUri","removeScheme","linkingUri","replace","isExpoHosted","test","developer","removePort","removeLeadingSlash","removeTrailingSlashAndQueryString","ensureLeadingSlash","input","shouldAppend","hasSlash","endsWith","substring","length","ensureTrailingSlash","startsWith","makeUrl","path","queryParams","scheme","createURL","isTripleSlashed","OS","isDOMAvailable","origin","window","location","queryString","stringify","outputPath","encodeURI","resolvedScheme","queryStringMatchResult","match","paramsFromHostUri","parsedParams","parse","e","parsed","param","query","decodeURIComponent","hostUriStripped","pathname","hostname","protocol","expoPrefix","parts","split","slice","concat","join","indexOf","addEventListener","type","handler","removeEventListener","parseInitialURLAsync","getInitialURL","initialUrl","sendIntent","action","extras","openSettings","openURL","canOpenURL","useUrl","setLink","onChange","event","then"],"mappings":"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","sourcesContent":["import { Platform, UnavailabilityError } from '@unimodules/core';\nimport Constants from 'expo-constants';\nimport invariant from 'invariant';\nimport qs from 'qs';\nimport { useEffect, useState } from 'react';\nimport URL from 'url-parse';\n\nimport NativeLinking from './ExpoLinking';\nimport { ParsedURL, QueryParams, URLListener } from './Linking.types';\nimport { hasCustomScheme, resolveScheme } from './Schemes';\n\nfunction validateURL(url: string): void {\n  invariant(typeof url === 'string', 'Invalid URL: should be a string. Was: ' + url);\n  invariant(url, 'Invalid URL: cannot be empty');\n}\n\nfunction getHostUri(): string | null {\n  if (Constants.manifest?.hostUri) {\n    return Constants.manifest.hostUri;\n  } else if (!Constants.manifest?.hostUri && !hasCustomScheme()) {\n    // we're probably not using up-to-date xdl, so just fake it for now\n    // we have to remove the /--/ on the end since this will be inserted again later\n    return removeScheme(Constants.linkingUri).replace(/\\/--($|\\/.*$)/, '');\n  } else {\n    return null;\n  }\n}\n\nfunction isExpoHosted(): boolean {\n  const hostUri = getHostUri();\n  return !!(\n    hostUri &&\n    (/^(.*\\.)?(expo\\.io|exp\\.host|exp\\.direct|expo\\.test)(:.*)?(\\/.*)?$/.test(hostUri) ||\n      Constants.manifest?.developer)\n  );\n}\n\nfunction removeScheme(url: string): string {\n  return url.replace(/^[a-zA-Z0-9+.-]+:\\/\\//, '');\n}\n\nfunction removePort(url: string): string {\n  return url.replace(/(?=([a-zA-Z0-9+.-]+:\\/\\/)?[^/]):\\d+/, '');\n}\n\nfunction removeLeadingSlash(url: string): string {\n  return url.replace(/^\\//, '');\n}\n\nfunction removeTrailingSlashAndQueryString(url: string): string {\n  return url.replace(/\\/?\\?.*$/, '');\n}\n\nfunction ensureLeadingSlash(input: string, shouldAppend: boolean): string {\n  const hasSlash = input.endsWith('/');\n  if (hasSlash && !shouldAppend) {\n    return input.substring(0, input.length - 1);\n  } else if (!hasSlash && shouldAppend) {\n    return `${input}/`;\n  }\n  return input;\n}\n\nfunction ensureTrailingSlash(input: string, shouldAppend: boolean): string {\n  const hasSlash = input.startsWith('/');\n  if (hasSlash && !shouldAppend) {\n    return input.substring(1);\n  } else if (!hasSlash && shouldAppend) {\n    return `/${input}`;\n  }\n  return input;\n}\n\n/**\n * Create a URL that works for the environment the app is currently running in.\n * The scheme in bare and standalone must be defined in the app.json under `expo.scheme`.\n *\n * **Examples**\n *\n * - Bare: empty string\n * - Standalone, Custom: `yourscheme:///path`\n * - Web (dev): `https://localhost:19006/path`\n * - Web (prod): `https://myapp.com/path`\n * - Expo Client (dev): `exp://128.0.0.1:19000/--/path`\n * - Expo Client (prod): `exp://exp.host/@yourname/your-app/--/path`\n *\n * @param path addition path components to append to the base URL.\n * @param queryParams An object of parameters that will be converted into a query string.\n */\nexport function makeUrl(path: string = '', queryParams?: QueryParams, scheme?: string): string {\n  return createURL(path, { queryParams, scheme, isTripleSlashed: true });\n}\n\n/**\n * Create a URL that works for the environment the app is currently running in.\n * The scheme in bare and standalone must be defined in the Expo config (app.config.js or app.json) under `expo.scheme`.\n *\n * **Examples**\n *\n * - Bare: `<scheme>://path` -- uses provided scheme or scheme from Expo config `scheme`.\n * - Standalone, Custom: `yourscheme://path`\n * - Web (dev): `https://localhost:19006/path`\n * - Web (prod): `https://myapp.com/path`\n * - Expo Client (dev): `exp://128.0.0.1:19000/--/path`\n * - Expo Client (prod): `exp://exp.host/@yourname/your-app/--/path`\n *\n * @param path addition path components to append to the base URL.\n * @param scheme URI protocol `<scheme>://` that must be built into your native app.\n * @param queryParams An object of parameters that will be converted into a query string.\n */\nexport function createURL(\n  path: string,\n  {\n    scheme,\n    queryParams = {},\n    isTripleSlashed = false,\n  }: {\n    scheme?: string;\n    queryParams?: QueryParams;\n    isTripleSlashed?: boolean;\n  } = {}\n): string {\n  if (Platform.OS === 'web') {\n    if (!Platform.isDOMAvailable) return '';\n\n    const origin = ensureLeadingSlash(window.location.origin, false);\n    let queryString = qs.stringify(queryParams);\n    if (queryString) {\n      queryString = `?${queryString}`;\n    }\n\n    let outputPath = path;\n    if (outputPath) outputPath = ensureTrailingSlash(path, true);\n\n    return encodeURI(`${origin}${outputPath}${queryString}`);\n  }\n\n  const resolvedScheme = resolveScheme({ scheme });\n\n  let hostUri = getHostUri() || '';\n\n  if (hasCustomScheme() && isExpoHosted()) {\n    hostUri = '';\n  }\n\n  if (path) {\n    if (isExpoHosted() && hostUri) {\n      path = `/--/${removeLeadingSlash(path)}`;\n    }\n    if (isTripleSlashed && !path.startsWith('/')) {\n      path = `/${path}`;\n    }\n  } else {\n    path = '';\n  }\n\n  // merge user-provided query params with any that were already in the hostUri\n  // e.g. release-channel\n  let queryString = '';\n  const queryStringMatchResult = hostUri.match(/(.*)\\?(.+)/);\n  if (queryStringMatchResult) {\n    hostUri = queryStringMatchResult[1];\n    queryString = queryStringMatchResult[2];\n    let paramsFromHostUri = {};\n    try {\n      const parsedParams = qs.parse(queryString);\n      if (typeof parsedParams === 'object') {\n        paramsFromHostUri = parsedParams;\n      }\n    } catch (e) {}\n    queryParams = {\n      ...queryParams,\n      ...paramsFromHostUri,\n    };\n  }\n  queryString = qs.stringify(queryParams);\n  if (queryString) {\n    queryString = `?${queryString}`;\n  }\n\n  hostUri = ensureTrailingSlash(hostUri, !isTripleSlashed);\n\n  return encodeURI(\n    `${resolvedScheme}:${isTripleSlashed ? '/' : ''}/${hostUri}${path}${queryString}`\n  );\n}\n\n/**\n * Returns the components and query parameters for a given URL.\n *\n * @param url Input URL to parse\n */\nexport function parse(url: string): ParsedURL {\n  validateURL(url);\n\n  const parsed = URL(url, /* parseQueryString */ true);\n\n  for (const param in parsed.query) {\n    parsed.query[param] = decodeURIComponent(parsed.query[param]!);\n  }\n  const queryParams = parsed.query;\n\n  const hostUri = getHostUri() || '';\n  const hostUriStripped = removePort(removeTrailingSlashAndQueryString(hostUri));\n\n  let path = parsed.pathname || null;\n  let hostname = parsed.hostname || null;\n  let scheme = parsed.protocol || null;\n\n  if (scheme) {\n    // Remove colon at end\n    scheme = scheme.substring(0, scheme.length - 1);\n  }\n\n  if (path) {\n    path = removeLeadingSlash(path);\n\n    let expoPrefix: string | null = null;\n    if (hostUriStripped) {\n      const parts = hostUriStripped.split('/');\n      expoPrefix = parts\n        .slice(1)\n        .concat(['--/'])\n        .join('/');\n    }\n\n    if (isExpoHosted() && !hasCustomScheme() && expoPrefix && path.startsWith(expoPrefix)) {\n      path = path.substring(expoPrefix.length);\n      hostname = null;\n    } else if (path.indexOf('+') > -1) {\n      path = path.substring(path.indexOf('+') + 1);\n    }\n  }\n\n  return {\n    hostname,\n    path,\n    queryParams,\n    scheme,\n  };\n}\n\n/**\n * Add a handler to Linking changes by listening to the `url` event type\n * and providing the handler\n *\n * See https://reactnative.dev/docs/linking.html#addeventlistener\n */\nexport function addEventListener(type: string, handler: URLListener) {\n  NativeLinking.addEventListener(type, handler);\n}\n\n/**\n * Remove a handler by passing the `url` event type and the handler.\n *\n * See https://reactnative.dev/docs/linking.html#removeeventlistener\n */\nexport function removeEventListener(type: string, handler: URLListener) {\n  NativeLinking.removeEventListener(type, handler);\n}\n\n/**\n * **Native:** Parses the link that opened the app. If no link opened the app, all the fields will be \\`null\\`.\n * **Web:** Parses the current window URL.\n */\nexport async function parseInitialURLAsync(): Promise<ParsedURL> {\n  const initialUrl = await NativeLinking.getInitialURL();\n  if (!initialUrl) {\n    return {\n      scheme: null,\n      hostname: null,\n      path: null,\n      queryParams: null,\n    };\n  }\n\n  return parse(initialUrl);\n}\n\n/**\n * Launch an Android intent with optional extras\n *\n * @platform android\n */\nexport async function sendIntent(\n  action: string,\n  extras?: { key: string; value: string | number | boolean }[]\n): Promise<void> {\n  if (Platform.OS === 'android') {\n    return await NativeLinking.sendIntent(action, extras);\n  }\n  throw new UnavailabilityError('Linking', 'sendIntent');\n}\n\n/**\n * Attempt to open the system settings for an the app.\n *\n * @platform ios\n */\nexport async function openSettings(): Promise<void> {\n  if (Platform.OS === 'web') {\n    throw new UnavailabilityError('Linking', 'openSettings');\n  }\n  if (NativeLinking.openSettings) {\n    return await NativeLinking.openSettings();\n  }\n  await openURL('app-settings:');\n}\n\n/**\n * If the app launch was triggered by an app link,\n * it will give the link url, otherwise it will give `null`\n */\nexport async function getInitialURL(): Promise<string | null> {\n  return (await NativeLinking.getInitialURL()) ?? null;\n}\n\n/**\n * Try to open the given `url` with any of the installed apps.\n */\nexport async function openURL(url: string): Promise<true> {\n  validateURL(url);\n  return await NativeLinking.openURL(url);\n}\n\n/**\n * Determine whether or not an installed app can handle a given URL.\n * On web this always returns true because there is no API for detecting what URLs can be opened.\n */\nexport async function canOpenURL(url: string): Promise<boolean> {\n  validateURL(url);\n  return await NativeLinking.canOpenURL(url);\n}\n\n/**\n * Returns the initial URL followed by any subsequent changes to the URL.\n */\nexport function useUrl(): string | null {\n  const [url, setLink] = useState<string | null>(null);\n\n  function onChange(event: { url: string }) {\n    setLink(event.url);\n  }\n\n  useEffect(() => {\n    getInitialURL().then(url => setLink(url));\n    addEventListener('url', onChange);\n    return () => removeEventListener('url', onChange);\n  }, []);\n\n  return url;\n}\n\nexport * from './Linking.types';\n"]},"metadata":{},"sourceType":"module"}