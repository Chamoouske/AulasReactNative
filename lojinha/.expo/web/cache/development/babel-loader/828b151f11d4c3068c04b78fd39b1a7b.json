{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { CodedError } from '@unimodules/core';\nimport { Asset } from 'expo-asset';\nimport Constants from 'expo-constants';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ExpoFontLoader from \"./ExpoFontLoader\";\nvar isInClient = Constants.appOwnership === 'expo';\nvar isInIOSStandalone = Constants.appOwnership === 'standalone' && Platform.OS === 'ios';\nexport function fontFamilyNeedsScoping(name) {\n  return (isInClient || isInIOSStandalone) && !Constants.systemFonts.includes(name) && name !== 'System' && !name.includes(Constants.sessionId);\n}\nexport function getAssetForSource(source) {\n  if (source instanceof Asset) {\n    return source;\n  }\n\n  if (typeof source === 'string') {\n    return Asset.fromURI(source);\n  } else if (typeof source === 'number') {\n    return Asset.fromModule(source);\n  } else if (typeof source === 'object' && typeof source.uri !== 'undefined') {\n    return getAssetForSource(source.uri);\n  }\n\n  return source;\n}\nexport function loadSingleFontAsync(name, input) {\n  var asset;\n  return _regeneratorRuntime.async(function loadSingleFontAsync$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          asset = input;\n\n          if (asset.downloadAsync) {\n            _context.next = 3;\n            break;\n          }\n\n          throw new CodedError(\"ERR_FONT_SOURCE\", '`loadSingleFontAsync` expected resource of type `Asset` from expo-asset on native');\n\n        case 3:\n          _context.next = 5;\n          return _regeneratorRuntime.awrap(asset.downloadAsync());\n\n        case 5:\n          if (asset.downloaded) {\n            _context.next = 7;\n            break;\n          }\n\n          throw new CodedError(\"ERR_DOWNLOAD\", \"Failed to download asset for font \\\"\" + name + \"\\\"\");\n\n        case 7:\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(ExpoFontLoader.loadAsync(getNativeFontName(name), asset.localUri));\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function getNativeFontName(name) {\n  if (fontFamilyNeedsScoping(name)) {\n    return Constants.sessionId + \"-\" + name;\n  } else {\n    return name;\n  }\n}","map":{"version":3,"sources":["/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/expo-font/src/FontLoader.ts"],"names":["CodedError","Asset","Constants","ExpoFontLoader","isInClient","appOwnership","isInIOSStandalone","Platform","OS","fontFamilyNeedsScoping","name","systemFonts","includes","sessionId","getAssetForSource","source","fromURI","fromModule","uri","loadSingleFontAsync","input","asset","downloadAsync","downloaded","loadAsync","getNativeFontName","localUri"],"mappings":";AAAA,SAASA,UAAT,QAA2B,kBAA3B;AACA,SAASC,KAAT,QAAsB,YAAtB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;;AAGA,OAAOC,cAAP;AAGA,IAAMC,UAAU,GAAGF,SAAS,CAACG,YAAV,KAA2B,MAA9C;AACA,IAAMC,iBAAiB,GAAGJ,SAAS,CAACG,YAAV,KAA2B,YAA3B,IAA2CE,QAAQ,CAACC,EAAT,KAAgB,KAArF;AAEA,OAAO,SAASC,sBAAT,CAAgCC,IAAhC,EAAuD;AAC5D,SACE,CAACN,UAAU,IAAIE,iBAAf,KACA,CAACJ,SAAS,CAACS,WAAV,CAAsBC,QAAtB,CAA+BF,IAA/B,CADD,IAEAA,IAAI,KAAK,QAFT,IAGA,CAACA,IAAI,CAACE,QAAL,CAAcV,SAAS,CAACW,SAAxB,CAJH;AAMD;AAED,OAAO,SAASC,iBAAT,CAA2BC,MAA3B,EAAqE;AAC1E,MAAIA,MAAM,YAAYd,KAAtB,EAA6B;AAC3B,WAAOc,MAAP;AACD;;AAED,MAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,WAAOd,KAAK,CAACe,OAAN,CAAcD,MAAd,CAAP;AACD,GAFD,MAEO,IAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AACrC,WAAOd,KAAK,CAACgB,UAAN,CAAiBF,MAAjB,CAAP;AACD,GAFM,MAEA,IAAI,OAAOA,MAAP,KAAkB,QAAlB,IAA8B,OAAOA,MAAM,CAACG,GAAd,KAAsB,WAAxD,EAAqE;AAC1E,WAAOJ,iBAAiB,CAACC,MAAM,CAACG,GAAR,CAAxB;AACD;;AAKD,SAAOH,MAAP;AACD;AAED,OAAO,SAAeI,mBAAf,CACLT,IADK,EAELU,KAFK;AAAA;AAAA;AAAA;AAAA;AAAA;AAICC,UAAAA,KAJD,GAISD,KAJT;;AAAA,cAKAC,KAAK,CAACC,aALN;AAAA;AAAA;AAAA;;AAAA,gBAMG,IAAItB,UAAJ,oBAEJ,mFAFI,CANH;;AAAA;AAAA;AAAA,2CAYCqB,KAAK,CAACC,aAAN,EAZD;;AAAA;AAAA,cAaAD,KAAK,CAACE,UAbN;AAAA;AAAA;AAAA;;AAAA,gBAcG,IAAIvB,UAAJ,0DAAqEU,IAArE,QAdH;;AAAA;AAAA;AAAA,2CAgBCP,cAAc,CAACqB,SAAf,CAAyBC,iBAAiB,CAACf,IAAD,CAA1C,EAAkDW,KAAK,CAACK,QAAxD,CAhBD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBP,OAAO,SAASD,iBAAT,CAA2Bf,IAA3B,EAAiD;AACtD,MAAID,sBAAsB,CAACC,IAAD,CAA1B,EAAkC;AAChC,WAAUR,SAAS,CAACW,SAApB,SAAiCH,IAAjC;AACD,GAFD,MAEO;AACL,WAAOA,IAAP;AACD;AACF","sourcesContent":["import { CodedError } from '@unimodules/core';\nimport { Asset } from 'expo-asset';\nimport Constants from 'expo-constants';\nimport { Platform } from 'react-native';\n\nimport ExpoFontLoader from './ExpoFontLoader';\nimport { FontResource, FontSource } from './Font.types';\n\nconst isInClient = Constants.appOwnership === 'expo';\nconst isInIOSStandalone = Constants.appOwnership === 'standalone' && Platform.OS === 'ios';\n\nexport function fontFamilyNeedsScoping(name: string): boolean {\n  return (\n    (isInClient || isInIOSStandalone) &&\n    !Constants.systemFonts.includes(name) &&\n    name !== 'System' &&\n    !name.includes(Constants.sessionId)\n  );\n}\n\nexport function getAssetForSource(source: FontSource): Asset | FontResource {\n  if (source instanceof Asset) {\n    return source;\n  }\n\n  if (typeof source === 'string') {\n    return Asset.fromURI(source);\n  } else if (typeof source === 'number') {\n    return Asset.fromModule(source);\n  } else if (typeof source === 'object' && typeof source.uri !== 'undefined') {\n    return getAssetForSource(source.uri);\n  }\n\n  // @ts-ignore Error: Type 'string' is not assignable to type 'Asset'\n  // We can't have a string here, we would have thrown an error if !isWeb\n  // or returned Asset.fromModule if isWeb.\n  return source;\n}\n\nexport async function loadSingleFontAsync(\n  name: string,\n  input: Asset | FontResource\n): Promise<void> {\n  const asset = input as Asset;\n  if (!asset.downloadAsync) {\n    throw new CodedError(\n      `ERR_FONT_SOURCE`,\n      '`loadSingleFontAsync` expected resource of type `Asset` from expo-asset on native'\n    );\n  }\n\n  await asset.downloadAsync();\n  if (!asset.downloaded) {\n    throw new CodedError(`ERR_DOWNLOAD`, `Failed to download asset for font \"${name}\"`);\n  }\n  await ExpoFontLoader.loadAsync(getNativeFontName(name), asset.localUri);\n}\n\nexport function getNativeFontName(name: string): string {\n  if (fontFamilyNeedsScoping(name)) {\n    return `${Constants.sessionId}-${name}`;\n  } else {\n    return name;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}