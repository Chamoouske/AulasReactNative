{"ast":null,"code":"'use strict';\n\nvar _extends = require(\"@babel/runtime/helpers/extends\");\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _assertThisInitialized = require(\"@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nvar _jsxFileName = \"/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/react-native/RNTester/js/examples/Animated/AnimatedGratuitousApp/AnExApp.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar React = require('react');\n\nvar Animated = require(\"react-native-web/dist/exports/Animated\").default;\n\nvar LayoutAnimation = require(\"react-native-web/dist/exports/LayoutAnimation\").default;\n\nvar PanResponder = require(\"react-native-web/dist/exports/PanResponder\").default;\n\nvar Platform = require(\"react-native-web/dist/exports/Platform\").default;\n\nvar StyleSheet = require(\"react-native-web/dist/exports/StyleSheet\").default;\n\nvar UIManager = require(\"react-native-web/dist/exports/UIManager\").default;\n\nvar View = require(\"react-native-web/dist/exports/View\").default;\n\nvar AnExSet = require(\"./AnExSet\");\n\nvar CIRCLE_SIZE = 80;\nvar CIRCLE_MARGIN = 18;\nvar NUM_CIRCLES = 30;\n\nvar Circle = function (_React$Component) {\n  _inherits(Circle, _React$Component);\n\n  var _super = _createSuper(Circle);\n\n  function Circle(props) {\n    var _this;\n\n    _classCallCheck(this, Circle);\n\n    _this = _super.call(this);\n    _this._onLongPress = _this._onLongPress.bind(_assertThisInitialized(_this));\n    _this._toggleIsActive = _this._toggleIsActive.bind(_assertThisInitialized(_this));\n    _this.state = {\n      isActive: false,\n      pan: new Animated.ValueXY(),\n      pop: new Animated.Value(0)\n    };\n\n    if (Platform.OS === 'android') {\n      UIManager.setLayoutAnimationEnabledExperimental(true);\n    }\n\n    return _this;\n  }\n\n  _createClass(Circle, [{\n    key: \"_onLongPress\",\n    value: function _onLongPress() {\n      var _this2 = this;\n\n      var config = {\n        tension: 40,\n        friction: 3\n      };\n      this.state.pan.addListener(function (value) {\n        _this2.props.onMove && _this2.props.onMove(value);\n      });\n      Animated.spring(this.state.pop, _objectSpread(_objectSpread({\n        toValue: 1\n      }, config), {}, {\n        useNativeDriver: false\n      })).start();\n      this.setState({\n        panResponder: PanResponder.create({\n          onPanResponderMove: Animated.event([null, {\n            dx: this.state.pan.x,\n            dy: this.state.pan.y\n          }], {\n            useNativeDriver: false\n          }),\n          onPanResponderRelease: function onPanResponderRelease(e, gestureState) {\n            LayoutAnimation.easeInEaseOut();\n            Animated.spring(_this2.state.pop, _objectSpread(_objectSpread({\n              toValue: 0\n            }, config), {}, {\n              useNativeDriver: false\n            })).start();\n\n            _this2.setState({\n              panResponder: undefined\n            });\n\n            _this2.props.onMove && _this2.props.onMove({\n              x: gestureState.dx + _this2.props.restLayout.x,\n              y: gestureState.dy + _this2.props.restLayout.y\n            });\n\n            _this2.props.onDeactivate();\n\n            _this2.state.pan.removeAllListeners();\n          }\n        })\n      }, function () {\n        _this2.props.onActivate();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var handlers;\n      var dragStyle = null;\n\n      if (this.state.panResponder) {\n        handlers = this.state.panResponder.panHandlers;\n        dragStyle = _objectSpread({\n          position: 'absolute'\n        }, this.state.pan.getLayout());\n      } else {\n        handlers = {\n          onStartShouldSetResponder: function onStartShouldSetResponder() {\n            return !_this3.state.isActive;\n          },\n          onResponderGrant: function onResponderGrant() {\n            _this3.state.pan.setValue({\n              x: 0,\n              y: 0\n            });\n\n            _this3.state.pan.setOffset(_this3.props.restLayout);\n\n            _this3.longTimer = setTimeout(_this3._onLongPress, 300);\n          },\n          onResponderRelease: function onResponderRelease() {\n            if (!_this3.state.panResponder) {\n              clearTimeout(_this3.longTimer);\n\n              _this3._toggleIsActive();\n            }\n          }\n        };\n      }\n\n      var animatedStyle = {\n        shadowOpacity: this.state.pop,\n        transform: [{\n          scale: this.state.pop.interpolate({\n            inputRange: [0, 1],\n            outputRange: [1, 1.3]\n          })\n        }]\n      };\n      var openVal = this.props.openVal;\n      var innerOpenStyle = null;\n\n      if (this.props.dummy) {\n        animatedStyle.opacity = 0;\n      } else if (this.state.isActive) {\n        innerOpenStyle = [styles.open, {\n          left: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [this.props.restLayout.x, 0]\n          }),\n          top: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [this.props.restLayout.y, 0]\n          }),\n          width: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [CIRCLE_SIZE, this.props.containerLayout.width]\n          }),\n          height: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [CIRCLE_SIZE, this.props.containerLayout.height]\n          }),\n          margin: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [CIRCLE_MARGIN, 0]\n          }),\n          borderRadius: openVal.interpolate({\n            inputRange: [-0.15, 0, 0.5, 1],\n            outputRange: [0, CIRCLE_SIZE / 2, CIRCLE_SIZE * 1.3, 0]\n          })\n        }];\n      }\n\n      return React.createElement(Animated.View, _extends({\n        onLayout: this.props.onLayout,\n        style: [styles.dragView, dragStyle, animatedStyle, this.state.isActive ? styles.open : null]\n      }, handlers, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 7\n        }\n      }), React.createElement(Animated.View, {\n        style: [styles.circle, innerOpenStyle],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 9\n        }\n      }, React.createElement(AnExSet, {\n        containerLayout: this.props.containerLayout,\n        id: this.props.id,\n        isActive: this.state.isActive,\n        openVal: this.props.openVal,\n        onDismiss: this._toggleIsActive,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }\n      })));\n    }\n  }, {\n    key: \"_toggleIsActive\",\n    value: function _toggleIsActive(velocity) {\n      var _this4 = this;\n\n      var config = {\n        tension: 30,\n        friction: 7\n      };\n\n      if (this.state.isActive) {\n        Animated.spring(this.props.openVal, _objectSpread(_objectSpread({\n          toValue: 0\n        }, config), {}, {\n          useNativeDriver: false\n        })).start(function () {\n          _this4.setState({\n            isActive: false\n          }, _this4.props.onDeactivate);\n        });\n      } else {\n        this.props.onActivate();\n        this.setState({\n          isActive: true,\n          panResponder: undefined\n        }, function () {\n          Animated.spring(_this4.props.openVal, _objectSpread(_objectSpread({\n            toValue: 1\n          }, config), {}, {\n            useNativeDriver: false\n          })).start();\n        });\n      }\n    }\n  }]);\n\n  return Circle;\n}(React.Component);\n\nvar AnExApp = function (_React$Component2) {\n  _inherits(AnExApp, _React$Component2);\n\n  var _super2 = _createSuper(AnExApp);\n\n  function AnExApp(props) {\n    var _this5;\n\n    _classCallCheck(this, AnExApp);\n\n    _this5 = _super2.call(this, props);\n    var keys = [];\n\n    for (var idx = 0; idx < NUM_CIRCLES; idx++) {\n      keys.push('E' + idx);\n    }\n\n    _this5.state = {\n      keys: keys,\n      restLayouts: [],\n      openVal: new Animated.Value(0)\n    };\n    _this5._onMove = _this5._onMove.bind(_assertThisInitialized(_this5));\n    return _this5;\n  }\n\n  _createClass(AnExApp, [{\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var circles = this.state.keys.map(function (key, idx) {\n        if (key === _this6.state.activeKey) {\n          return React.createElement(Circle, {\n            key: key + 'd',\n            dummy: true,\n            __self: _this6,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 16\n            }\n          });\n        } else {\n          var onLayout = null;\n\n          if (!_this6.state.restLayouts[idx]) {\n            onLayout = function (index, e) {\n              var layout = e.nativeEvent.layout;\n              this.setState(function (state) {\n                state.restLayouts[index] = layout;\n                return state;\n              });\n            }.bind(_this6, idx);\n          }\n\n          return React.createElement(Circle, {\n            key: key,\n            id: key,\n            openVal: _this6.state.openVal,\n            onLayout: onLayout,\n            restLayout: _this6.state.restLayouts[idx],\n            onActivate: _this6.setState.bind(_this6, {\n              activeKey: key,\n              activeInitialLayout: _this6.state.restLayouts[idx]\n            }),\n            __self: _this6,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 11\n            }\n          });\n        }\n      });\n\n      if (this.state.activeKey) {\n        circles.push(React.createElement(Animated.View, {\n          key: \"dark\",\n          style: [styles.darkening, {\n            opacity: this.state.openVal\n          }],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 9\n          }\n        }));\n        circles.push(React.createElement(Circle, {\n          openVal: this.state.openVal,\n          key: this.state.activeKey,\n          id: this.state.activeKey,\n          restLayout: this.state.activeInitialLayout,\n          containerLayout: this.state.layout,\n          onMove: this._onMove,\n          onDeactivate: function onDeactivate() {\n            _this6.setState({\n              activeKey: undefined\n            });\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 9\n          }\n        }));\n      }\n\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: styles.grid,\n        onLayout: function onLayout(e) {\n          return _this6.setState({\n            layout: e.nativeEvent.layout\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 9\n        }\n      }, circles));\n    }\n  }, {\n    key: \"_onMove\",\n    value: function _onMove(position) {\n      var newKeys = moveToClosest(this.state, position);\n\n      if (newKeys !== this.state.keys) {\n        LayoutAnimation.easeInEaseOut();\n        this.setState({\n          keys: newKeys\n        });\n      }\n    }\n  }]);\n\n  return AnExApp;\n}(React.Component);\n\nfunction distance(p1, p2) {\n  var dx = p1.x - p2.x;\n  var dy = p1.y - p2.y;\n  return dx * dx + dy * dy;\n}\n\nfunction moveToClosest(_ref, position) {\n  var activeKey = _ref.activeKey,\n      keys = _ref.keys,\n      restLayouts = _ref.restLayouts;\n  var activeIdx = -1;\n  var closestIdx = activeIdx;\n  var minDist = Infinity;\n  var newKeys = [];\n  keys.forEach(function (key, idx) {\n    var dist = distance(position, restLayouts[idx]);\n\n    if (key === activeKey) {\n      idx = activeIdx;\n    } else {\n      newKeys.push(key);\n    }\n\n    if (dist < minDist) {\n      minDist = dist;\n      closestIdx = idx;\n    }\n  });\n\n  if (closestIdx === activeIdx) {\n    return keys;\n  } else {\n    newKeys.splice(closestIdx, 0, activeKey);\n    return newKeys;\n  }\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  grid: {\n    flex: 1,\n    justifyContent: 'center',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    backgroundColor: 'transparent'\n  },\n  circle: {\n    width: CIRCLE_SIZE,\n    height: CIRCLE_SIZE,\n    borderRadius: CIRCLE_SIZE / 2,\n    borderWidth: 1,\n    borderColor: 'black',\n    margin: CIRCLE_MARGIN,\n    overflow: 'hidden'\n  },\n  dragView: {\n    shadowRadius: 10,\n    shadowColor: 'rgba(0,0,0,0.7)',\n    shadowOffset: {\n      height: 8\n    },\n    alignSelf: 'flex-start',\n    backgroundColor: 'transparent'\n  },\n  open: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: undefined,\n    height: undefined,\n    borderRadius: 0\n  },\n  darkening: {\n    backgroundColor: 'black',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0\n  }\n});\nexports.title = 'Animated - Gratuitous App';\nexports.description = 'Bunch of Animations - tap a circle to open a view with more animations, or longPress and drag to reorder circles.';\nexports.examples = [{\n  title: 'And example app',\n  render: function render() {\n    return React.createElement(AnExApp, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 14\n      }\n    });\n  }\n}];","map":{"version":3,"sources":["/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/react-native/RNTester/js/examples/Animated/AnimatedGratuitousApp/AnExApp.js"],"names":["React","require","AnExSet","CIRCLE_SIZE","CIRCLE_MARGIN","NUM_CIRCLES","Circle","props","_onLongPress","bind","_toggleIsActive","state","isActive","pan","Animated","ValueXY","pop","Value","Platform","OS","UIManager","setLayoutAnimationEnabledExperimental","config","tension","friction","addListener","value","onMove","spring","toValue","useNativeDriver","start","setState","panResponder","PanResponder","create","onPanResponderMove","event","dx","x","dy","y","onPanResponderRelease","e","gestureState","LayoutAnimation","easeInEaseOut","undefined","restLayout","onDeactivate","removeAllListeners","onActivate","handlers","dragStyle","panHandlers","position","getLayout","onStartShouldSetResponder","onResponderGrant","setValue","setOffset","longTimer","setTimeout","onResponderRelease","clearTimeout","animatedStyle","shadowOpacity","transform","scale","interpolate","inputRange","outputRange","openVal","innerOpenStyle","dummy","opacity","styles","open","left","top","width","containerLayout","height","margin","borderRadius","onLayout","dragView","circle","id","velocity","Component","AnExApp","keys","idx","push","restLayouts","_onMove","circles","map","key","activeKey","index","layout","nativeEvent","activeInitialLayout","darkening","container","grid","newKeys","moveToClosest","distance","p1","p2","activeIdx","closestIdx","minDist","Infinity","forEach","dist","splice","StyleSheet","flex","justifyContent","flexDirection","flexWrap","backgroundColor","borderWidth","borderColor","overflow","shadowRadius","shadowColor","shadowOffset","alignSelf","right","bottom","exports","title","description","examples","render"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\n'use strict';\n\nconst React = require('react');\nconst {\n  Animated,\n  LayoutAnimation,\n  PanResponder,\n  Platform,\n  StyleSheet,\n  UIManager,\n  View,\n} = require('react-native');\n\nconst AnExSet = require('./AnExSet');\n\nconst CIRCLE_SIZE = 80;\nconst CIRCLE_MARGIN = 18;\nconst NUM_CIRCLES = 30;\n\nclass Circle extends React.Component<any, any> {\n  longTimer: number;\n\n  _onLongPress: () => void;\n  _toggleIsActive: () => void;\n  constructor(props: Object): void {\n    super();\n    this._onLongPress = this._onLongPress.bind(this);\n    this._toggleIsActive = this._toggleIsActive.bind(this);\n    this.state = {\n      isActive: false,\n      pan: new Animated.ValueXY(), // Vectors reduce boilerplate.  (step1: uncomment)\n      pop: new Animated.Value(0), // Initial value.               (step2a: uncomment)\n    };\n\n    if (Platform.OS === 'android') {\n      UIManager.setLayoutAnimationEnabledExperimental(true);\n    }\n  }\n\n  _onLongPress(): void {\n    const config = {tension: 40, friction: 3};\n    this.state.pan.addListener(value => {\n      // Async listener for state changes  (step1: uncomment)\n      this.props.onMove && this.props.onMove(value);\n    });\n    Animated.spring(this.state.pop, {\n      //  Pop to larger size.                      (step2b: uncomment)\n      toValue: 1,\n\n      //  Reuse config for convenient consistency  (step2b: uncomment)\n      ...config,\n\n      useNativeDriver: false,\n    }).start();\n    this.setState(\n      {\n        panResponder: PanResponder.create({\n          onPanResponderMove: Animated.event(\n            [\n              null, // native event - ignore      (step1: uncomment)\n              {dx: this.state.pan.x, dy: this.state.pan.y}, // links pan to gestureState  (step1: uncomment)\n            ],\n            {useNativeDriver: false},\n          ),\n          onPanResponderRelease: (e, gestureState) => {\n            LayoutAnimation.easeInEaseOut(); // @flowfixme animates layout update as one batch (step3: uncomment)\n            Animated.spring(this.state.pop, {\n              // Pop back to 0                       (step2c: uncomment)\n              toValue: 0,\n\n              ...config,\n              useNativeDriver: false,\n            }).start();\n            this.setState({panResponder: undefined});\n            this.props.onMove &&\n              this.props.onMove({\n                x: gestureState.dx + this.props.restLayout.x,\n                y: gestureState.dy + this.props.restLayout.y,\n              });\n            this.props.onDeactivate();\n            this.state.pan.removeAllListeners();\n          },\n        }),\n      },\n      () => {\n        this.props.onActivate();\n      },\n    );\n  }\n\n  render(): React.Node {\n    let handlers;\n    let dragStyle = null;\n    if (this.state.panResponder) {\n      handlers = this.state.panResponder.panHandlers;\n      dragStyle = {\n        //  Used to position while dragging\n        position: 'absolute', //  Hoist out of layout                    (step1: uncomment)\n        ...this.state.pan.getLayout(), //  Convenience converter                  (step1: uncomment)\n      };\n    } else {\n      handlers = {\n        onStartShouldSetResponder: () => !this.state.isActive,\n        onResponderGrant: () => {\n          this.state.pan.setValue({x: 0, y: 0}); // reset                (step1: uncomment)\n          this.state.pan.setOffset(this.props.restLayout); // offset from onLayout (step1: uncomment)\n          /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment suppresses\n           * an error found when Flow v0.63 was deployed. To see the error\n           * delete this comment and run Flow. */\n          this.longTimer = setTimeout(this._onLongPress, 300);\n        },\n        onResponderRelease: () => {\n          if (!this.state.panResponder) {\n            /* $FlowFixMe(>=0.63.0 site=react_native_fb) This comment\n             * suppresses an error found when Flow v0.63 was deployed. To see\n             * the error delete this comment and run Flow. */\n            clearTimeout(this.longTimer);\n            this._toggleIsActive();\n          }\n        },\n      };\n    }\n    const animatedStyle: Object = {\n      shadowOpacity: this.state.pop, // no need for interpolation            (step2d: uncomment)\n      transform: [\n        {\n          scale: this.state.pop.interpolate({\n            inputRange: [0, 1],\n            outputRange: [1, 1.3], // scale up from 1 to 1.3               (step2d: uncomment)\n          }),\n        },\n      ],\n    };\n    const openVal = this.props.openVal;\n    let innerOpenStyle = null;\n    if (this.props.dummy) {\n      animatedStyle.opacity = 0;\n    } else if (this.state.isActive) {\n      innerOpenStyle = [\n        styles.open,\n        {\n          // (step4: uncomment)\n          left: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [this.props.restLayout.x, 0],\n          }),\n          top: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [this.props.restLayout.y, 0],\n          }),\n          width: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [CIRCLE_SIZE, this.props.containerLayout.width],\n          }),\n          height: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [CIRCLE_SIZE, this.props.containerLayout.height],\n          }),\n          margin: openVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [CIRCLE_MARGIN, 0],\n          }),\n          borderRadius: openVal.interpolate({\n            inputRange: [-0.15, 0, 0.5, 1],\n            outputRange: [0, CIRCLE_SIZE / 2, CIRCLE_SIZE * 1.3, 0],\n          }),\n        },\n      ];\n    }\n    return (\n      <Animated.View\n        onLayout={this.props.onLayout}\n        style={[\n          styles.dragView,\n          dragStyle,\n          animatedStyle,\n          this.state.isActive ? styles.open : null,\n        ]}\n        {...handlers}>\n        <Animated.View style={[styles.circle, innerOpenStyle]}>\n          <AnExSet\n            containerLayout={this.props.containerLayout}\n            id={this.props.id}\n            isActive={this.state.isActive}\n            openVal={this.props.openVal}\n            onDismiss={this._toggleIsActive}\n          />\n        </Animated.View>\n      </Animated.View>\n    );\n  }\n  _toggleIsActive(velocity) {\n    const config = {tension: 30, friction: 7};\n    if (this.state.isActive) {\n      Animated.spring(this.props.openVal, {\n        toValue: 0,\n        ...config,\n        useNativeDriver: false,\n      }).start(() => {\n        // (step4: uncomment)\n        this.setState({isActive: false}, this.props.onDeactivate);\n      }); // (step4: uncomment)\n    } else {\n      this.props.onActivate();\n      this.setState({isActive: true, panResponder: undefined}, () => {\n        // this.props.openVal.setValue(1);                                             // (step4: comment)\n        Animated.spring(this.props.openVal, {\n          toValue: 1,\n          ...config,\n          useNativeDriver: false,\n        }).start(); // (step4: uncomment)\n      });\n    }\n  }\n}\n\nclass AnExApp extends React.Component<any, any> {\n  _onMove: (position: Point) => void;\n  constructor(props: any): void {\n    super(props);\n    const keys = [];\n    for (let idx = 0; idx < NUM_CIRCLES; idx++) {\n      keys.push('E' + idx);\n    }\n    this.state = {\n      keys,\n      restLayouts: [],\n      openVal: new Animated.Value(0),\n    };\n    this._onMove = this._onMove.bind(this);\n  }\n\n  render(): React.Node {\n    const circles = this.state.keys.map((key, idx) => {\n      if (key === this.state.activeKey) {\n        return <Circle key={key + 'd'} dummy={true} />;\n      } else {\n        let onLayout = null;\n        if (!this.state.restLayouts[idx]) {\n          onLayout = function(index, e) {\n            const layout = e.nativeEvent.layout;\n            this.setState(state => {\n              state.restLayouts[index] = layout;\n              return state;\n            });\n          }.bind(this, idx);\n        }\n        return (\n          <Circle\n            key={key}\n            id={key}\n            openVal={this.state.openVal}\n            onLayout={onLayout}\n            restLayout={this.state.restLayouts[idx]}\n            onActivate={this.setState.bind(this, {\n              activeKey: key,\n              activeInitialLayout: this.state.restLayouts[idx],\n            })}\n          />\n        );\n      }\n    });\n    if (this.state.activeKey) {\n      circles.push(\n        <Animated.View\n          key=\"dark\"\n          style={[styles.darkening, {opacity: this.state.openVal}]}\n        />,\n      );\n      circles.push(\n        <Circle\n          openVal={this.state.openVal}\n          key={this.state.activeKey}\n          id={this.state.activeKey}\n          restLayout={this.state.activeInitialLayout}\n          containerLayout={this.state.layout}\n          onMove={this._onMove}\n          onDeactivate={() => {\n            this.setState({activeKey: undefined});\n          }}\n        />,\n      );\n    }\n    return (\n      <View style={styles.container}>\n        <View\n          style={styles.grid}\n          onLayout={e => this.setState({layout: e.nativeEvent.layout})}>\n          {circles}\n        </View>\n      </View>\n    );\n  }\n\n  _onMove(position: Point): void {\n    const newKeys = moveToClosest(this.state, position);\n    if (newKeys !== this.state.keys) {\n      LayoutAnimation.easeInEaseOut(); // animates layout update as one batch (step3: uncomment)\n      this.setState({keys: newKeys});\n    }\n  }\n}\n\ntype Point = {\n  x: number,\n  y: number,\n  ...\n};\nfunction distance(p1: Point, p2: Point): number {\n  const dx = p1.x - p2.x;\n  const dy = p1.y - p2.y;\n  return dx * dx + dy * dy;\n}\n\nfunction moveToClosest({activeKey, keys, restLayouts}, position) {\n  const activeIdx = -1;\n  let closestIdx = activeIdx;\n  let minDist = Infinity;\n  const newKeys = [];\n  keys.forEach((key, idx) => {\n    const dist = distance(position, restLayouts[idx]);\n    if (key === activeKey) {\n      idx = activeIdx;\n    } else {\n      newKeys.push(key);\n    }\n    if (dist < minDist) {\n      minDist = dist;\n      closestIdx = idx;\n    }\n  });\n  if (closestIdx === activeIdx) {\n    return keys; // nothing changed\n  } else {\n    newKeys.splice(closestIdx, 0, activeKey);\n    return newKeys;\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  grid: {\n    flex: 1,\n    justifyContent: 'center',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    backgroundColor: 'transparent',\n  },\n  circle: {\n    width: CIRCLE_SIZE,\n    height: CIRCLE_SIZE,\n    borderRadius: CIRCLE_SIZE / 2,\n    borderWidth: 1,\n    borderColor: 'black',\n    margin: CIRCLE_MARGIN,\n    overflow: 'hidden',\n  },\n  dragView: {\n    shadowRadius: 10,\n    shadowColor: 'rgba(0,0,0,0.7)',\n    shadowOffset: {height: 8},\n    alignSelf: 'flex-start',\n    backgroundColor: 'transparent',\n  },\n  open: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: undefined, // unset value from styles.circle\n    height: undefined, // unset value from styles.circle\n    borderRadius: 0, // unset value from styles.circle\n  },\n  darkening: {\n    backgroundColor: 'black',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n  },\n});\n\nexports.title = 'Animated - Gratuitous App';\nexports.description =\n  'Bunch of Animations - tap a circle to open a view with more animations, or longPress and drag to reorder circles.';\nexports.examples = [\n  {\n    title: 'And example app',\n    render(): React.Element<typeof AnExApp> {\n      return <AnExApp />;\n    },\n  },\n];\n"]},"metadata":{},"sourceType":"script"}