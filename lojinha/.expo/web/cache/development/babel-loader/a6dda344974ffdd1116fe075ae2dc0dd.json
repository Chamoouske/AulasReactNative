{"ast":null,"code":"'use strict';\n\nvar _require = require('danger'),\n    danger = _require.danger,\n    fail = _require.fail,\n    message = _require.message,\n    warn = _require.warn;\n\nvar includes = require('lodash.includes');\n\nvar includesSummary = danger.github.pr.body && danger.github.pr.body.toLowerCase().includes('## summary');\n\nif (!danger.github.pr.body || danger.github.pr.body.length < 50) {\n  fail(':grey_question: This pull request needs a description.');\n} else if (!includesSummary) {\n  var title = ':clipboard: Missing Summary';\n  var idea = 'Can you add a Summary? ' + 'To do so, add a \"## Summary\" section to your PR description. ' + 'This is a good place to explain the motivation for making this change.';\n  message(title + \" - <i>\" + idea + \"</i>\");\n}\n\nvar packageChanged = includes(danger.git.modified_files, 'package.json');\n\nif (packageChanged) {\n  var _title = ':lock: package.json';\n\n  var _idea = 'Changes were made to package.json. ' + 'This will require a manual import by a Facebook employee.';\n\n  warn(_title + \" - <i>\" + _idea + \"</i>\");\n}\n\nvar includesTestPlan = danger.github.pr.body && danger.github.pr.body.toLowerCase().includes('## test plan');\n\nif (!includesTestPlan) {\n  var _title2 = ':clipboard: Missing Test Plan';\n\n  var _idea2 = 'Can you add a Test Plan? ' + 'To do so, add a \"## Test Plan\" section to your PR description. ' + 'A Test Plan lets us know how these changes were tested.';\n\n  message(_title2 + \" - <i>\" + _idea2 + \"</i>\");\n}\n\nvar changelogRegex = /\\[\\s?(ANDROID|GENERAL|IOS|JS|JAVASCRIPT|INTERNAL)\\s?\\]\\s?\\[\\s?(ADDED|CHANGED|DEPRECATED|REMOVED|FIXED|SECURITY)\\s?\\]\\s*?-?\\s*?(.*)/gi;\nvar internalChangelogRegex = /\\[\\s?(INTERNAL)\\s?\\].*/gi;\nvar includesChangelog = danger.github.pr.body && (danger.github.pr.body.toLowerCase().includes('## changelog') || danger.github.pr.body.toLowerCase().includes('release notes'));\nvar correctlyFormattedChangelog = changelogRegex.test(danger.github.pr.body);\nvar containsInternalChangelog = internalChangelogRegex.test(danger.github.pr.body);\nvar changelogInstructions = 'A changelog entry has the following format: `[CATEGORY] [TYPE] - Message`.\\n\\n<details>CATEGORY may be:\\n\\n- General\\n- iOS\\n- Android\\n- JavaScript\\n- Internal (for changes that do not need to be called out in the release notes)\\n\\nTYPE may be:\\n\\n- Added, for new features.\\n- Changed, for changes in existing functionality.\\n- Deprecated, for soon-to-be removed features.\\n- Removed, for now removed features.\\n- Fixed, for any bug fixes.\\n- Security, in case of vulnerabilities.\\n\\nMESSAGE may answer \"what and why\" on a feature level.   Use this to briefly tell React Native users about notable changes.</details>';\n\nif (!includesChangelog) {\n  var _title3 = ':clipboard: Missing Changelog';\n\n  var _idea3 = 'Can you add a Changelog? ' + 'To do so, add a \"## Changelog\" section to your PR description. ' + changelogInstructions;\n\n  message(_title3 + \" - <i>\" + _idea3 + \"</i>\");\n} else if (!correctlyFormattedChangelog && !containsInternalChangelog) {\n  var _title4 = ':clipboard: Verify Changelog Format';\n  var _idea4 = changelogInstructions;\n  message(_title4 + \" - <i>\" + _idea4 + \"</i>\");\n}\n\nvar isMergeRefMaster = danger.github.pr.base.ref === 'master';\nvar isMergeRefStable = danger.github.pr.base.ref.indexOf('-stable') !== -1;\n\nif (!isMergeRefMaster && isMergeRefStable) {\n  var _title5 = ':grey_question: Base Branch';\n  var _idea5 = 'The base branch for this PR is something other than `master`. Are you sure you want to merge these changes into a stable release? If you are interested in backporting updates to an older release, the suggested approach is to land those changes on `master` first and then cherry-pick the commits into the branch for that release. The [Releases Guide](https://github.com/facebook/react-native/blob/master/Releases.md) has more information.';\n  warn(_title5 + \" - <i>\" + _idea5 + \"</i>\");\n} else if (!isMergeRefMaster && !isMergeRefStable) {\n  var _title6 = ':exclamation: Base Branch';\n  var _idea6 = 'The base branch for this PR is something other than `master`. [Are you sure you want to target something other than the `master` branch?](https://reactnative.dev/docs/contributing.html#pull-requests)';\n  fail(_title6 + \" - <i>\" + _idea6 + \"</i>\");\n}","map":{"version":3,"sources":["/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/react-native/bots/dangerfile.js"],"names":["require","danger","fail","message","warn","includes","includesSummary","github","pr","body","toLowerCase","length","title","idea","packageChanged","git","modified_files","includesTestPlan","changelogRegex","internalChangelogRegex","includesChangelog","correctlyFormattedChangelog","test","containsInternalChangelog","changelogInstructions","isMergeRefMaster","base","ref","isMergeRefStable","indexOf"],"mappings":"AASA;;eAEsCA,OAAO,CAAC,QAAD,C;IAAtCC,M,YAAAA,M;IAAQC,I,YAAAA,I;IAAMC,O,YAAAA,O;IAASC,I,YAAAA,I;;AAC9B,IAAMC,QAAQ,GAAGL,OAAO,CAAC,iBAAD,CAAxB;;AAGA,IAAMM,eAAe,GACnBL,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAAjB,IACAR,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAAjB,CAAsBC,WAAtB,GAAoCL,QAApC,CAA6C,YAA7C,CAFF;;AAGA,IAAI,CAACJ,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAAlB,IAA0BR,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAAjB,CAAsBE,MAAtB,GAA+B,EAA7D,EAAiE;AAC/DT,EAAAA,IAAI,CAAC,wDAAD,CAAJ;AACD,CAFD,MAEO,IAAI,CAACI,eAAL,EAAsB;AAC3B,MAAMM,KAAK,GAAG,6BAAd;AACA,MAAMC,IAAI,GACR,4BACA,+DADA,GAEA,wEAHF;AAIAV,EAAAA,OAAO,CAAIS,KAAJ,cAAkBC,IAAlB,UAAP;AACD;;AAGD,IAAMC,cAAc,GAAGT,QAAQ,CAACJ,MAAM,CAACc,GAAP,CAAWC,cAAZ,EAA4B,cAA5B,CAA/B;;AACA,IAAIF,cAAJ,EAAoB;AAClB,MAAMF,MAAK,GAAG,qBAAd;;AACA,MAAMC,KAAI,GACR,wCACA,2DAFF;;AAGAT,EAAAA,IAAI,CAAIQ,MAAJ,cAAkBC,KAAlB,UAAJ;AACD;;AAGD,IAAMI,gBAAgB,GACpBhB,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAAjB,IACAR,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAAjB,CAAsBC,WAAtB,GAAoCL,QAApC,CAA6C,cAA7C,CAFF;;AAGA,IAAI,CAACY,gBAAL,EAAuB;AACrB,MAAML,OAAK,GAAG,+BAAd;;AACA,MAAMC,MAAI,GACR,8BACA,iEADA,GAEA,yDAHF;;AAIAV,EAAAA,OAAO,CAAIS,OAAJ,cAAkBC,MAAlB,UAAP;AACD;;AAGD,IAAMK,cAAc,GAAG,sIAAvB;AACA,IAAMC,sBAAsB,GAAG,0BAA/B;AACA,IAAMC,iBAAiB,GACrBnB,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAAjB,KACCR,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAAjB,CAAsBC,WAAtB,GAAoCL,QAApC,CAA6C,cAA7C,KACCJ,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAAjB,CAAsBC,WAAtB,GAAoCL,QAApC,CAA6C,eAA7C,CAFF,CADF;AAIA,IAAMgB,2BAA2B,GAAGH,cAAc,CAACI,IAAf,CAAoBrB,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IAArC,CAApC;AACA,IAAMc,yBAAyB,GAAGJ,sBAAsB,CAACG,IAAvB,CAChCrB,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBC,IADe,CAAlC;AAKA,IAAMe,qBAAqB,GACzB,4mBADF;;AAEA,IAAI,CAACJ,iBAAL,EAAwB;AACtB,MAAMR,OAAK,GAAG,+BAAd;;AACA,MAAMC,MAAI,GACR,8BACA,iEADA,GAEAW,qBAHF;;AAIArB,EAAAA,OAAO,CAAIS,OAAJ,cAAkBC,MAAlB,UAAP;AACD,CAPD,MAOO,IAAI,CAACQ,2BAAD,IAAgC,CAACE,yBAArC,EAAgE;AACrE,MAAMX,OAAK,GAAG,qCAAd;AACA,MAAMC,MAAI,GAAGW,qBAAb;AACArB,EAAAA,OAAO,CAAIS,OAAJ,cAAkBC,MAAlB,UAAP;AACD;;AAID,IAAMY,gBAAgB,GAAGxB,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBkB,IAAjB,CAAsBC,GAAtB,KAA8B,QAAvD;AACA,IAAMC,gBAAgB,GAAG3B,MAAM,CAACM,MAAP,CAAcC,EAAd,CAAiBkB,IAAjB,CAAsBC,GAAtB,CAA0BE,OAA1B,CAAkC,SAAlC,MAAiD,CAAC,CAA3E;;AACA,IAAI,CAACJ,gBAAD,IAAqBG,gBAAzB,EAA2C;AACzC,MAAMhB,OAAK,GAAG,6BAAd;AACA,MAAMC,MAAI,GACR,ubADF;AAEAT,EAAAA,IAAI,CAAIQ,OAAJ,cAAkBC,MAAlB,UAAJ;AACD,CALD,MAKO,IAAI,CAACY,gBAAD,IAAqB,CAACG,gBAA1B,EAA4C;AACjD,MAAMhB,OAAK,GAAG,2BAAd;AACA,MAAMC,MAAI,GACR,yMADF;AAEAX,EAAAA,IAAI,CAAIU,OAAJ,cAAkBC,MAAlB,UAAJ;AACD","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n */\n\n'use strict';\n\nconst {danger, fail, message, warn} = require('danger');\nconst includes = require('lodash.includes');\n\n// Provides advice if a summary section is missing, or body is too short\nconst includesSummary =\n  danger.github.pr.body &&\n  danger.github.pr.body.toLowerCase().includes('## summary');\nif (!danger.github.pr.body || danger.github.pr.body.length < 50) {\n  fail(':grey_question: This pull request needs a description.');\n} else if (!includesSummary) {\n  const title = ':clipboard: Missing Summary';\n  const idea =\n    'Can you add a Summary? ' +\n    'To do so, add a \"## Summary\" section to your PR description. ' +\n    'This is a good place to explain the motivation for making this change.';\n  message(`${title} - <i>${idea}</i>`);\n}\n\n// Warns if there are changes to package.json, and tags the team.\nconst packageChanged = includes(danger.git.modified_files, 'package.json');\nif (packageChanged) {\n  const title = ':lock: package.json';\n  const idea =\n    'Changes were made to package.json. ' +\n    'This will require a manual import by a Facebook employee.';\n  warn(`${title} - <i>${idea}</i>`);\n}\n\n// Provides advice if a test plan is missing.\nconst includesTestPlan =\n  danger.github.pr.body &&\n  danger.github.pr.body.toLowerCase().includes('## test plan');\nif (!includesTestPlan) {\n  const title = ':clipboard: Missing Test Plan';\n  const idea =\n    'Can you add a Test Plan? ' +\n    'To do so, add a \"## Test Plan\" section to your PR description. ' +\n    'A Test Plan lets us know how these changes were tested.';\n  message(`${title} - <i>${idea}</i>`);\n}\n\n// Regex looks for given categories, types, a file/framework/component, and a message - broken into 4 capture groups\nconst changelogRegex = /\\[\\s?(ANDROID|GENERAL|IOS|JS|JAVASCRIPT|INTERNAL)\\s?\\]\\s?\\[\\s?(ADDED|CHANGED|DEPRECATED|REMOVED|FIXED|SECURITY)\\s?\\]\\s*?-?\\s*?(.*)/gi;\nconst internalChangelogRegex = /\\[\\s?(INTERNAL)\\s?\\].*/gi;\nconst includesChangelog =\n  danger.github.pr.body &&\n  (danger.github.pr.body.toLowerCase().includes('## changelog') ||\n    danger.github.pr.body.toLowerCase().includes('release notes'));\nconst correctlyFormattedChangelog = changelogRegex.test(danger.github.pr.body);\nconst containsInternalChangelog = internalChangelogRegex.test(\n  danger.github.pr.body,\n);\n\n// Provides advice if a changelog is missing\nconst changelogInstructions =\n  'A changelog entry has the following format: `[CATEGORY] [TYPE] - Message`.\\n\\n<details>CATEGORY may be:\\n\\n- General\\n- iOS\\n- Android\\n- JavaScript\\n- Internal (for changes that do not need to be called out in the release notes)\\n\\nTYPE may be:\\n\\n- Added, for new features.\\n- Changed, for changes in existing functionality.\\n- Deprecated, for soon-to-be removed features.\\n- Removed, for now removed features.\\n- Fixed, for any bug fixes.\\n- Security, in case of vulnerabilities.\\n\\nMESSAGE may answer \"what and why\" on a feature level.   Use this to briefly tell React Native users about notable changes.</details>';\nif (!includesChangelog) {\n  const title = ':clipboard: Missing Changelog';\n  const idea =\n    'Can you add a Changelog? ' +\n    'To do so, add a \"## Changelog\" section to your PR description. ' +\n    changelogInstructions;\n  message(`${title} - <i>${idea}</i>`);\n} else if (!correctlyFormattedChangelog && !containsInternalChangelog) {\n  const title = ':clipboard: Verify Changelog Format';\n  const idea = changelogInstructions;\n  message(`${title} - <i>${idea}</i>`);\n}\n\n// Warns if the PR is opened against stable, as commits need to be cherry picked and tagged by a release maintainer.\n// Fails if the PR is opened against anything other than `master` or `-stable`.\nconst isMergeRefMaster = danger.github.pr.base.ref === 'master';\nconst isMergeRefStable = danger.github.pr.base.ref.indexOf('-stable') !== -1;\nif (!isMergeRefMaster && isMergeRefStable) {\n  const title = ':grey_question: Base Branch';\n  const idea =\n    'The base branch for this PR is something other than `master`. Are you sure you want to merge these changes into a stable release? If you are interested in backporting updates to an older release, the suggested approach is to land those changes on `master` first and then cherry-pick the commits into the branch for that release. The [Releases Guide](https://github.com/facebook/react-native/blob/master/Releases.md) has more information.';\n  warn(`${title} - <i>${idea}</i>`);\n} else if (!isMergeRefMaster && !isMergeRefStable) {\n  const title = ':exclamation: Base Branch';\n  const idea =\n    'The base branch for this PR is something other than `master`. [Are you sure you want to target something other than the `master` branch?](https://reactnative.dev/docs/contributing.html#pull-requests)';\n  fail(`${title} - <i>${idea}</i>`);\n}\n"]},"metadata":{},"sourceType":"script"}