{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar commander_1 = require(\"commander\");\n\nvar android_1 = __importDefault(require(\"./android\"));\n\nvar constants_1 = require(\"./constants\");\n\nvar ios_1 = __importDefault(require(\"./ios\"));\n\nvar validators_1 = require(\"./validators\");\n\nfunction action(configuration) {\n  var platform, android, ios, rootDir;\n  return _regeneratorRuntime.async(function action$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          platform = configuration.platform, android = configuration.android, ios = configuration.ios;\n          rootDir = process.cwd();\n          _context.t0 = platform;\n          _context.next = _context.t0 === constants_1.Platform.ANDROID ? 5 : _context.t0 === constants_1.Platform.IOS ? 8 : _context.t0 === constants_1.Platform.ALL ? 11 : 11;\n          break;\n\n        case 5:\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(android_1.default(rootDir, android));\n\n        case 7:\n          return _context.abrupt(\"break\", 16);\n\n        case 8:\n          _context.next = 10;\n          return _regeneratorRuntime.awrap(ios_1.default(rootDir, ios));\n\n        case 10:\n          return _context.abrupt(\"break\", 16);\n\n        case 11:\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(android_1.default(rootDir, android));\n\n        case 13:\n          _context.next = 15;\n          return _regeneratorRuntime.awrap(ios_1.default(rootDir, ios));\n\n        case 15:\n          return _context.abrupt(\"break\", 16);\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction configurationFromOptions(_ref) {\n  var platform = _ref.platform,\n      imageResizeMode = _ref.imageResizeMode,\n      backgroundColor = _ref.backgroundColor,\n      imagePath = _ref.imagePath,\n      statusBarHidden = _ref.statusBarHidden,\n      statusBarStyle = _ref.statusBarStyle,\n      statusBarTranslucent = _ref.statusBarTranslucent,\n      statusBarBackgroundColor = _ref.statusBarBackgroundColor,\n      darkModeBackgroundColor = _ref.darkModeBackgroundColor,\n      darkModeImagePath = _ref.darkModeImagePath,\n      darkModeStatusBarStyle = _ref.darkModeStatusBarStyle,\n      darkModeStatusBarBackgroundColor = _ref.darkModeStatusBarBackgroundColor;\n  var resolvedPlatform = constants_1.Platform.ALL;\n\n  try {\n    resolvedPlatform = platform && validators_1.validateEnumValue(platform, constants_1.Platform) || constants_1.Platform.ALL;\n  } catch (e) {\n    throw new Error(\"'platform': \" + e.message);\n  }\n\n  if (!backgroundColor) {\n    throw new Error(\"'backgroundColor': Required option is not provided. Provide a valid color string.\");\n  }\n\n  var resolvedStatusBarHidden = statusBarHidden === undefined ? undefined : Boolean(statusBarHidden);\n  var resolvedStatusBarTranslucent = statusBarTranslucent === undefined ? undefined : Boolean(statusBarTranslucent);\n  var genericConfig = {\n    imageResizeMode: imageResizeMode,\n    backgroundColor: backgroundColor,\n    image: imagePath\n  };\n  var genericStatusBarConfig = {\n    hidden: resolvedStatusBarHidden,\n    style: statusBarStyle\n  };\n  var genericDarkModeConfig = {\n    backgroundColor: darkModeBackgroundColor,\n    image: darkModeImagePath\n  };\n  var result = {\n    platform: resolvedPlatform,\n    android: _objectSpread(_objectSpread({}, genericConfig), {}, {\n      statusBar: _objectSpread(_objectSpread({}, genericStatusBarConfig), {}, {\n        translucent: resolvedStatusBarTranslucent,\n        backgroundColor: statusBarBackgroundColor\n      }),\n      darkMode: _objectSpread(_objectSpread({}, genericDarkModeConfig), {}, {\n        statusBar: {\n          style: darkModeStatusBarStyle,\n          backgroundColor: darkModeStatusBarBackgroundColor\n        }\n      })\n    }),\n    ios: _objectSpread(_objectSpread({}, genericConfig), {}, {\n      statusBar: genericStatusBarConfig,\n      darkMode: genericDarkModeConfig\n    })\n  };\n  return result;\n}\n\nfunction getAvailableOptions(o) {\n  return Object.values(o).map(function (v) {\n    return \"\\\"\" + v + \"\\\"\";\n  }).join(' | ');\n}\n\nexports.default = function () {\n  return new commander_1.Command().description('Idempotent operation that configures native splash screens using provided backgroundColor and optional .png file. Supports light and dark modes configuration. Dark mode is supported only on iOS 13+ and Android 10+.').version(require(\"../package.json\").version).allowUnknownOption(false).passCommandToAction(false).option('-p, --platform <platform>', \"Selected platform to configure. Available values: \" + getAvailableOptions(constants_1.Platform) + \" (default: \\\"\" + constants_1.Platform.ALL + \"\\\").\").option('-b, --background-color <color>', \"(required) Valid css-formatted color (hex (#RRGGBB[AA]), rgb[a], hsl[a], named color (https://drafts.csswg.org/css-color/#named-colors)) that would be used as the background color for native splash screen view.\").option('-i, --image-path <path>', 'Path to valid .png image that will be displayed on the splash screen.').option('-r, --image-resize-mode <resizeMode>', \"Resize mode to be used for the splash screen image. Available only if 'image-path' is provided as well. Available values: \" + getAvailableOptions(constants_1.SplashScreenImageResizeMode) + \" (\\\"native\\\" is only available for Android)) (default: \\\"\" + constants_1.SplashScreenImageResizeMode.CONTAIN + \"\\\").\").option('--dark-mode-background-color <color>', \"Color (see 'background-color' supported formats) that would be used as the background color for the splash screen in dark mode. Providing this option enables other dark-mode related options.\").option('--dark-mode-image-path <path>', \"Path to valid .png image that will be displayed on the splash screen in dark mode only. Available only if 'dark-mode-background-color' is provided as well.\").option('--status-bar-style <style>', \"Customizes the color of the status bar icons. Available values: \" + getAvailableOptions(constants_1.SplashScreenStatusBarStyle) + \" (default: \\\"\" + constants_1.SplashScreenStatusBarStyle.DEFAULT + \"\\\").\").option('--status-bar-hidden', \"Hides the status bar.\").option('--status-bar-background-color <color>', \"(only for Android platform) Customizes the background color of the status bar. Accepts a valid color (see 'background-color' supported formats).\").option('--status-bar-translucent', \"(only for Android platform) Makes the status bar translucent (enables drawing under the status bar area).\").option('--dark-mode-status-bar-style <style>', \"(only for Android platform) The same as 'status-bar-style', but applied only in dark mode. Available only if 'dark-mode-background-color' and 'status-bar-style' are provided as well.\").option('--dark-mode-status-bar-background-color <color>', \"(only for Android platform) The same as 'status-bar-background-color', but applied only in the dark mode. Available only if 'dark-mode-background-color' and 'status-bar-style' are provided as well.\").action(function _callee(options) {\n    var configuration;\n    return _regeneratorRuntime.async(function _callee$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            configuration = configurationFromOptions(options);\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(action(configuration));\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  });\n};","map":{"version":3,"sources":["../src/cli-command.ts"],"names":[],"mappings":"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","sourcesContent":["import { Command } from 'commander';\n\nimport { AndroidSplashScreenConfigJSON, IosSplashScreenConfigJSON } from './SplashScreenConfig';\nimport configureAndroid from './android';\nimport {\n  SplashScreenImageResizeMode,\n  SplashScreenStatusBarStyle,\n  Platform,\n  PlatformType,\n} from './constants';\nimport configureIos from './ios';\nimport { validateEnumValue } from './validators';\n\ntype RawCLIOptions = Partial<{\n  imageResizeMode: string;\n  platform: string;\n  backgroundColor: string;\n  imagePath: string;\n  darkModeBackgroundColor: string;\n  darkModeImagePath: string;\n  statusBarHidden: boolean;\n  statusBarStyle: string;\n  darkModeStatusBarStyle: string;\n  statusBarTranslucent: boolean;\n  statusBarBackgroundColor: string;\n  darkModeStatusBarBackgroundColor: string;\n}>;\n\ninterface Configuration {\n  platform: PlatformType;\n  android: AndroidSplashScreenConfigJSON;\n  ios: IosSplashScreenConfigJSON;\n}\n\nasync function action(configuration: Configuration) {\n  const { platform, android, ios } = configuration;\n  const rootDir = process.cwd();\n  switch (platform) {\n    case Platform.ANDROID:\n      await configureAndroid(rootDir, android);\n      break;\n    case Platform.IOS:\n      await configureIos(rootDir, ios);\n      break;\n    case Platform.ALL:\n    default:\n      await configureAndroid(rootDir, android);\n      await configureIos(rootDir, ios);\n      break;\n  }\n}\n\nfunction configurationFromOptions({\n  platform,\n  imageResizeMode,\n  backgroundColor,\n  imagePath,\n  statusBarHidden,\n  statusBarStyle,\n  statusBarTranslucent,\n  statusBarBackgroundColor,\n  darkModeBackgroundColor,\n  darkModeImagePath,\n  darkModeStatusBarStyle,\n  darkModeStatusBarBackgroundColor,\n}: RawCLIOptions): Configuration {\n  let resolvedPlatform: PlatformType = Platform.ALL;\n  try {\n    resolvedPlatform = (platform && validateEnumValue(platform, Platform)) || Platform.ALL;\n  } catch (e) {\n    throw new Error(`'platform': ${e.message}`);\n  }\n\n  if (!backgroundColor) {\n    throw new Error(\n      `'backgroundColor': Required option is not provided. Provide a valid color string.`\n    );\n  }\n\n  const resolvedStatusBarHidden =\n    statusBarHidden === undefined ? undefined : Boolean(statusBarHidden);\n  const resolvedStatusBarTranslucent =\n    statusBarTranslucent === undefined ? undefined : Boolean(statusBarTranslucent);\n\n  const genericConfig = {\n    imageResizeMode,\n    backgroundColor,\n    image: imagePath,\n  };\n  const genericStatusBarConfig = {\n    hidden: resolvedStatusBarHidden,\n    style: statusBarStyle,\n  };\n  const genericDarkModeConfig = {\n    backgroundColor: darkModeBackgroundColor,\n    image: darkModeImagePath,\n  };\n\n  const result: Configuration = {\n    platform: resolvedPlatform,\n    android: {\n      ...genericConfig,\n      statusBar: {\n        ...genericStatusBarConfig,\n        translucent: resolvedStatusBarTranslucent,\n        backgroundColor: statusBarBackgroundColor,\n      },\n      darkMode: {\n        ...genericDarkModeConfig,\n        statusBar: {\n          style: darkModeStatusBarStyle,\n          backgroundColor: darkModeStatusBarBackgroundColor,\n        },\n      },\n    },\n    ios: {\n      ...genericConfig,\n      statusBar: genericStatusBarConfig,\n      darkMode: genericDarkModeConfig,\n    },\n  };\n\n  return result;\n}\n\nfunction getAvailableOptions(o: object) {\n  return Object.values(o)\n    .map(v => `\"${v}\"`)\n    .join(' | ');\n}\n\nexport default () =>\n  new Command()\n    .description(\n      'Idempotent operation that configures native splash screens using provided backgroundColor and optional .png file. Supports light and dark modes configuration. Dark mode is supported only on iOS 13+ and Android 10+.'\n    )\n    .version(require('../package.json').version)\n    .allowUnknownOption(false)\n    .passCommandToAction(false)\n    .option(\n      '-p, --platform <platform>',\n      `Selected platform to configure. Available values: ${getAvailableOptions(\n        Platform\n      )} (default: \"${Platform.ALL}\").`\n    )\n    .option(\n      '-b, --background-color <color>',\n      `(required) Valid css-formatted color (hex (#RRGGBB[AA]), rgb[a], hsl[a], named color (https://drafts.csswg.org/css-color/#named-colors)) that would be used as the background color for native splash screen view.`\n    )\n    .option(\n      '-i, --image-path <path>',\n      'Path to valid .png image that will be displayed on the splash screen.'\n    )\n    .option(\n      '-r, --image-resize-mode <resizeMode>',\n      `Resize mode to be used for the splash screen image. Available only if 'image-path' is provided as well. Available values: ${getAvailableOptions(\n        SplashScreenImageResizeMode\n      )} (\"native\" is only available for Android)) (default: \"${\n        SplashScreenImageResizeMode.CONTAIN\n      }\").`\n    )\n    .option(\n      '--dark-mode-background-color <color>',\n      `Color (see 'background-color' supported formats) that would be used as the background color for the splash screen in dark mode. Providing this option enables other dark-mode related options.`\n    )\n    .option(\n      '--dark-mode-image-path <path>',\n      `Path to valid .png image that will be displayed on the splash screen in dark mode only. Available only if 'dark-mode-background-color' is provided as well.`\n    )\n    .option(\n      '--status-bar-style <style>',\n      `Customizes the color of the status bar icons. Available values: ${getAvailableOptions(\n        SplashScreenStatusBarStyle\n      )} (default: \"${SplashScreenStatusBarStyle.DEFAULT}\").`\n    )\n    .option('--status-bar-hidden', `Hides the status bar.`)\n    .option(\n      '--status-bar-background-color <color>',\n      `(only for Android platform) Customizes the background color of the status bar. Accepts a valid color (see 'background-color' supported formats).`\n    )\n    .option(\n      '--status-bar-translucent',\n      `(only for Android platform) Makes the status bar translucent (enables drawing under the status bar area).`\n    )\n    .option(\n      '--dark-mode-status-bar-style <style>',\n      `(only for Android platform) The same as 'status-bar-style', but applied only in dark mode. Available only if 'dark-mode-background-color' and 'status-bar-style' are provided as well.`\n    )\n    .option(\n      '--dark-mode-status-bar-background-color <color>',\n      `(only for Android platform) The same as 'status-bar-background-color', but applied only in the dark mode. Available only if 'dark-mode-background-color' and 'status-bar-style' are provided as well.`\n    )\n    .action(async (options: RawCLIOptions) => {\n      const configuration = configurationFromOptions(options);\n      await action(configuration);\n    });\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}