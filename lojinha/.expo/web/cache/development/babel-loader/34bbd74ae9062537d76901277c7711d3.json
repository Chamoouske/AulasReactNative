{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar json_file_1 = __importDefault(require(\"@expo/json-file\"));\n\nvar resolve_from_1 = __importDefault(require(\"resolve-from\"));\n\nvar Errors_1 = require(\"./Errors\");\n\nfunction getExpoSDKVersion(projectRoot, exp) {\n  if (exp === null || exp === void 0 ? void 0 : exp.sdkVersion) {\n    return exp.sdkVersion;\n  }\n\n  var packageJsonPath = resolve_from_1.default.silent(projectRoot, 'expo/package.json');\n\n  if (packageJsonPath) {\n    var expoPackageJson = json_file_1.default.read(packageJsonPath, {\n      json5: true\n    });\n    var packageVersion = expoPackageJson.version;\n\n    if (typeof packageVersion === 'string') {\n      var majorVersion = packageVersion.split('.').shift();\n      return majorVersion + \".0.0\";\n    }\n  }\n\n  throw new Errors_1.ConfigError(\"Cannot determine which native SDK version your project uses because the module `expo` is not installed. Please install it with `yarn add expo` and try again.\", 'MODULE_NOT_FOUND');\n}\n\nexports.getExpoSDKVersion = getExpoSDKVersion;","map":{"version":3,"sources":["../src/Project.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,IAAA,WAAA,GAAA,eAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;;AACA,IAAA,cAAA,GAAA,eAAA,CAAA,OAAA,CAAA,cAAA,CAAA,CAAA;;AAGA,IAAA,QAAA,GAAA,OAAA,YAAA;;AAEA,SAAgB,iBAAhB,CACE,WADF,EAEE,GAFF,EAEqC;AAEnC,MAAI,GAAG,KAAA,IAAH,IAAA,GAAG,KAAA,KAAA,CAAH,GAAG,KAAA,CAAH,GAAA,GAAG,CAAE,UAAT,EAAqB;AACnB,WAAO,GAAG,CAAC,UAAX;AACD;;AACD,MAAM,eAAe,GAAG,cAAA,CAAA,OAAA,CAAY,MAAZ,CAAmB,WAAnB,EAAgC,mBAAhC,CAAxB;;AACA,MAAI,eAAJ,EAAqB;AACnB,QAAM,eAAe,GAAG,WAAA,CAAA,OAAA,CAAS,IAAT,CAAc,eAAd,EAA+B;AAAE,MAAA,KAAK,EAAE;AAAT,KAA/B,CAAxB;AADmB,QAEF,cAFE,GAEiB,eAFjB,CAEX,OAFW;;AAGnB,QAAI,OAAO,cAAP,KAA0B,QAA9B,EAAwC;AACtC,UAAM,YAAY,GAAG,cAAc,CAAC,KAAf,CAAqB,GAArB,EAA0B,KAA1B,EAArB;AACA,aAAU,YAAV;AACD;AACF;;AACD,QAAM,IAAI,QAAA,CAAA,WAAJ,kKAEJ,kBAFI,CAAN;AAID;;AApBD,OAAA,CAAA,iBAAA,GAAA,iBAAA","sourcesContent":["import JsonFile from '@expo/json-file';\nimport resolveFrom from 'resolve-from';\n\nimport { ExpoConfig } from './Config.types';\nimport { ConfigError } from './Errors';\n\nexport function getExpoSDKVersion(\n  projectRoot: string,\n  exp: Pick<ExpoConfig, 'sdkVersion'>\n): string {\n  if (exp?.sdkVersion) {\n    return exp.sdkVersion;\n  }\n  const packageJsonPath = resolveFrom.silent(projectRoot, 'expo/package.json');\n  if (packageJsonPath) {\n    const expoPackageJson = JsonFile.read(packageJsonPath, { json5: true });\n    const { version: packageVersion } = expoPackageJson;\n    if (typeof packageVersion === 'string') {\n      const majorVersion = packageVersion.split('.').shift();\n      return `${majorVersion}.0.0`;\n    }\n  }\n  throw new ConfigError(\n    `Cannot determine which native SDK version your project uses because the module \\`expo\\` is not installed. Please install it with \\`yarn add expo\\` and try again.`,\n    'MODULE_NOT_FOUND'\n  );\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}