{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"@babel/runtime/helpers/slicedToArray\");\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _os() {\n  var data = _interopRequireDefault(require(\"os\"));\n\n  _os = function _os() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _path() {\n  var data = _interopRequireDefault(require(\"path\"));\n\n  _path = function _path() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _fsExtra() {\n  var data = _interopRequireDefault(require(\"fs-extra\"));\n\n  _fsExtra = function _fsExtra() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _minimist() {\n  var data = _interopRequireDefault(require(\"minimist\"));\n\n  _minimist = function _minimist() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _mkdirp() {\n  var data = _interopRequireDefault(require(\"mkdirp\"));\n\n  _mkdirp = function _mkdirp() {\n    return data;\n  };\n\n  return data;\n}\n\nvar _validate = require(\"./validate\");\n\nvar _DirectoryAlreadyExistsError = _interopRequireDefault(require(\"./errors/DirectoryAlreadyExistsError\"));\n\nvar _printRunInstructions = _interopRequireDefault(require(\"./printRunInstructions\"));\n\nfunction _cliTools() {\n  var data = require(\"@react-native-community/cli-tools\");\n\n  _cliTools = function _cliTools() {\n    return data;\n  };\n\n  return data;\n}\n\nvar _template = require(\"./template\");\n\nvar _editTemplate = require(\"./editTemplate\");\n\nvar PackageManager = _interopRequireWildcard(require(\"../../tools/packageManager\"));\n\nvar _installPods = _interopRequireDefault(require(\"../../tools/installPods\"));\n\nvar _templateName = require(\"./templateName\");\n\nvar _banner = _interopRequireDefault(require(\"./banner\"));\n\nvar _loader = require(\"../../tools/loader\");\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar DEFAULT_VERSION = 'latest';\n\nfunction doesDirectoryExist(dir) {\n  return _fsExtra().default.existsSync(dir);\n}\n\nfunction setProjectDirectory(directory) {\n  return _regeneratorRuntime.async(function setProjectDirectory$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!doesDirectoryExist(directory)) {\n            _context.next = 2;\n            break;\n          }\n\n          throw new _DirectoryAlreadyExistsError.default(directory);\n\n        case 2:\n          _context.prev = 2;\n\n          _mkdirp().default.sync(directory);\n\n          process.chdir(directory);\n          _context.next = 10;\n          break;\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](2);\n          throw new (_cliTools().CLIError)('Error occurred while trying to create project directory.', _context.t0);\n\n        case 10:\n          return _context.abrupt(\"return\", process.cwd());\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[2, 7]], Promise);\n}\n\nfunction adjustNameIfUrl(name, cwd) {\n  if (name.match(/https?:/)) {\n    name = Object.keys(JSON.parse(_fsExtra().default.readFileSync(_path().default.join(cwd, './package.json'), 'utf8')).dependencies)[0];\n  }\n\n  return name;\n}\n\nfunction createFromTemplate(_ref) {\n  var projectName, templateName, npm, directory, projectTitle, skipInstall, projectDirectory, Loader, loader, templateSourceDir, _await, uri, name, templateConfig, postInitScript;\n\n  return _regeneratorRuntime.async(function createFromTemplate$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          projectName = _ref.projectName, templateName = _ref.templateName, npm = _ref.npm, directory = _ref.directory, projectTitle = _ref.projectTitle, skipInstall = _ref.skipInstall;\n\n          _cliTools().logger.debug('Initializing new project');\n\n          _cliTools().logger.log(_banner.default);\n\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(setProjectDirectory(directory));\n\n        case 5:\n          projectDirectory = _context2.sent;\n          Loader = (0, _loader.getLoader)();\n          loader = new Loader({\n            text: 'Downloading template'\n          });\n          templateSourceDir = _fsExtra().default.mkdtempSync(_path().default.join(_os().default.tmpdir(), 'rncli-init-template-'));\n          _context2.prev = 9;\n          loader.start();\n          _context2.next = 13;\n          return _regeneratorRuntime.awrap((0, _templateName.processTemplateName)(templateName));\n\n        case 13:\n          _await = _context2.sent;\n          uri = _await.uri;\n          name = _await.name;\n          _context2.next = 18;\n          return _regeneratorRuntime.awrap((0, _template.installTemplatePackage)(uri, templateSourceDir, npm));\n\n        case 18:\n          loader.succeed();\n          loader.start('Copying template');\n          name = adjustNameIfUrl(name, templateSourceDir);\n          templateConfig = (0, _template.getTemplateConfig)(name, templateSourceDir);\n          _context2.next = 24;\n          return _regeneratorRuntime.awrap((0, _template.copyTemplate)(name, templateConfig.templateDir, templateSourceDir));\n\n        case 24:\n          loader.succeed();\n          loader.start('Processing template');\n          (0, _editTemplate.changePlaceholderInTemplate)({\n            projectName: projectName,\n            projectTitle: projectTitle,\n            placeholderName: templateConfig.placeholderName,\n            placeholderTitle: templateConfig.titlePlaceholder\n          });\n          loader.succeed();\n          postInitScript = templateConfig.postInitScript;\n\n          if (!postInitScript) {\n            _context2.next = 34;\n            break;\n          }\n\n          loader.start('Executing post init script ');\n          _context2.next = 33;\n          return _regeneratorRuntime.awrap((0, _template.executePostInitScript)(name, postInitScript, templateSourceDir));\n\n        case 33:\n          loader.succeed();\n\n        case 34:\n          if (skipInstall) {\n            _context2.next = 39;\n            break;\n          }\n\n          _context2.next = 37;\n          return _regeneratorRuntime.awrap(installDependencies({\n            projectName: projectName,\n            npm: npm,\n            loader: loader,\n            root: projectDirectory\n          }));\n\n        case 37:\n          _context2.next = 40;\n          break;\n\n        case 39:\n          loader.succeed('Dependencies installation skipped');\n\n        case 40:\n          _context2.next = 46;\n          break;\n\n        case 42:\n          _context2.prev = 42;\n          _context2.t0 = _context2[\"catch\"](9);\n          loader.fail();\n          throw new Error(_context2.t0);\n\n        case 46:\n          _context2.prev = 46;\n\n          _fsExtra().default.removeSync(templateSourceDir);\n\n          return _context2.finish(46);\n\n        case 49:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[9, 42, 46, 49]], Promise);\n}\n\nfunction installDependencies(_ref2) {\n  var projectName, npm, loader, root;\n  return _regeneratorRuntime.async(function installDependencies$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          projectName = _ref2.projectName, npm = _ref2.npm, loader = _ref2.loader, root = _ref2.root;\n          loader.start('Installing dependencies');\n          _context3.next = 4;\n          return _regeneratorRuntime.awrap(PackageManager.installAll({\n            preferYarn: !npm,\n            silent: true,\n            root: root\n          }));\n\n        case 4:\n          if (!(process.platform === 'darwin')) {\n            _context3.next = 7;\n            break;\n          }\n\n          _context3.next = 7;\n          return _regeneratorRuntime.awrap((0, _installPods.default)({\n            projectName: projectName,\n            loader: loader\n          }));\n\n        case 7:\n          loader.succeed();\n\n        case 8:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction createProject(projectName, directory, version, options) {\n  var templateName;\n  return _regeneratorRuntime.async(function createProject$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          templateName = options.template || \"react-native@\" + version;\n          return _context4.abrupt(\"return\", createFromTemplate({\n            projectName: projectName,\n            templateName: templateName,\n            npm: options.npm,\n            directory: directory,\n            projectTitle: options.title,\n            skipInstall: options.skipInstall\n          }));\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nvar initialize = function initialize(_ref3, options) {\n  var _ref4, projectName, root, version, directoryName, projectFolder;\n\n  return _regeneratorRuntime.async(function initialize$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _ref4 = _slicedToArray(_ref3, 1), projectName = _ref4[0];\n          root = process.cwd();\n          (0, _validate.validateProjectName)(projectName);\n          version = (0, _minimist().default)(process.argv).version || DEFAULT_VERSION;\n          directoryName = _path().default.relative(root, options.directory || projectName);\n          _context5.prev = 5;\n          _context5.next = 8;\n          return _regeneratorRuntime.awrap(createProject(projectName, directoryName, version, options));\n\n        case 8:\n          projectFolder = _path().default.join(root, directoryName);\n          (0, _printRunInstructions.default)(projectFolder, projectName);\n          _context5.next = 15;\n          break;\n\n        case 12:\n          _context5.prev = 12;\n          _context5.t0 = _context5[\"catch\"](5);\n\n          _cliTools().logger.error(_context5.t0.message);\n\n        case 15:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, [[5, 12]], Promise);\n};\n\nexports.default = initialize;","map":{"version":3,"sources":["/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/@react-native-community/cli/build/commands/init/init.js"],"names":["Object","defineProperty","exports","value","default","_os","data","_interopRequireDefault","require","_path","_fsExtra","_minimist","_mkdirp","_validate","_DirectoryAlreadyExistsError","_printRunInstructions","_cliTools","_template","_editTemplate","PackageManager","_interopRequireWildcard","_installPods","_templateName","_banner","_loader","_getRequireWildcardCache","WeakMap","cache","obj","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","DEFAULT_VERSION","doesDirectoryExist","dir","existsSync","setProjectDirectory","directory","sync","process","chdir","CLIError","cwd","adjustNameIfUrl","name","match","keys","JSON","parse","readFileSync","join","dependencies","createFromTemplate","projectName","templateName","npm","projectTitle","skipInstall","logger","debug","log","projectDirectory","Loader","getLoader","loader","text","templateSourceDir","mkdtempSync","tmpdir","start","processTemplateName","uri","installTemplatePackage","succeed","templateConfig","getTemplateConfig","copyTemplate","templateDir","changePlaceholderInTemplate","placeholderName","placeholderTitle","titlePlaceholder","postInitScript","executePostInitScript","installDependencies","root","fail","Error","removeSync","installAll","preferYarn","silent","platform","createProject","version","options","template","title","initialize","validateProjectName","argv","directoryName","relative","projectFolder","error","message"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _os() {\n  const data = _interopRequireDefault(require(\"os\"));\n\n  _os = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _path() {\n  const data = _interopRequireDefault(require(\"path\"));\n\n  _path = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _fsExtra() {\n  const data = _interopRequireDefault(require(\"fs-extra\"));\n\n  _fsExtra = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _minimist() {\n  const data = _interopRequireDefault(require(\"minimist\"));\n\n  _minimist = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _mkdirp() {\n  const data = _interopRequireDefault(require(\"mkdirp\"));\n\n  _mkdirp = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _validate = require(\"./validate\");\n\nvar _DirectoryAlreadyExistsError = _interopRequireDefault(require(\"./errors/DirectoryAlreadyExistsError\"));\n\nvar _printRunInstructions = _interopRequireDefault(require(\"./printRunInstructions\"));\n\nfunction _cliTools() {\n  const data = require(\"@react-native-community/cli-tools\");\n\n  _cliTools = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _template = require(\"./template\");\n\nvar _editTemplate = require(\"./editTemplate\");\n\nvar PackageManager = _interopRequireWildcard(require(\"../../tools/packageManager\"));\n\nvar _installPods = _interopRequireDefault(require(\"../../tools/installPods\"));\n\nvar _templateName = require(\"./templateName\");\n\nvar _banner = _interopRequireDefault(require(\"./banner\"));\n\nvar _loader = require(\"../../tools/loader\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst DEFAULT_VERSION = 'latest';\n\nfunction doesDirectoryExist(dir) {\n  return _fsExtra().default.existsSync(dir);\n}\n\nasync function setProjectDirectory(directory) {\n  if (doesDirectoryExist(directory)) {\n    throw new _DirectoryAlreadyExistsError.default(directory);\n  }\n\n  try {\n    _mkdirp().default.sync(directory);\n\n    process.chdir(directory);\n  } catch (error) {\n    throw new (_cliTools().CLIError)('Error occurred while trying to create project directory.', error);\n  }\n\n  return process.cwd();\n}\n\nfunction adjustNameIfUrl(name, cwd) {\n  // We use package manager to infer the name of the template module for us.\n  // That's why we get it from temporary package.json, where the name is the\n  // first and only dependency (hence 0).\n  if (name.match(/https?:/)) {\n    name = Object.keys(JSON.parse(_fsExtra().default.readFileSync(_path().default.join(cwd, './package.json'), 'utf8')).dependencies)[0];\n  }\n\n  return name;\n}\n\nasync function createFromTemplate({\n  projectName,\n  templateName,\n  npm,\n  directory,\n  projectTitle,\n  skipInstall\n}) {\n  _cliTools().logger.debug('Initializing new project');\n\n  _cliTools().logger.log(_banner.default);\n\n  const projectDirectory = await setProjectDirectory(directory);\n  const Loader = (0, _loader.getLoader)();\n  const loader = new Loader({\n    text: 'Downloading template'\n  });\n\n  const templateSourceDir = _fsExtra().default.mkdtempSync(_path().default.join(_os().default.tmpdir(), 'rncli-init-template-'));\n\n  try {\n    loader.start();\n    let {\n      uri,\n      name\n    } = await (0, _templateName.processTemplateName)(templateName);\n    await (0, _template.installTemplatePackage)(uri, templateSourceDir, npm);\n    loader.succeed();\n    loader.start('Copying template');\n    name = adjustNameIfUrl(name, templateSourceDir);\n    const templateConfig = (0, _template.getTemplateConfig)(name, templateSourceDir);\n    await (0, _template.copyTemplate)(name, templateConfig.templateDir, templateSourceDir);\n    loader.succeed();\n    loader.start('Processing template');\n    (0, _editTemplate.changePlaceholderInTemplate)({\n      projectName,\n      projectTitle,\n      placeholderName: templateConfig.placeholderName,\n      placeholderTitle: templateConfig.titlePlaceholder\n    });\n    loader.succeed();\n    const {\n      postInitScript\n    } = templateConfig;\n\n    if (postInitScript) {\n      // Leaving trailing space because there may be stdout from the script\n      loader.start('Executing post init script ');\n      await (0, _template.executePostInitScript)(name, postInitScript, templateSourceDir);\n      loader.succeed();\n    }\n\n    if (!skipInstall) {\n      await installDependencies({\n        projectName,\n        npm,\n        loader,\n        root: projectDirectory\n      });\n    } else {\n      loader.succeed('Dependencies installation skipped');\n    }\n  } catch (e) {\n    loader.fail();\n    throw new Error(e);\n  } finally {\n    _fsExtra().default.removeSync(templateSourceDir);\n  }\n}\n\nasync function installDependencies({\n  projectName,\n  npm,\n  loader,\n  root\n}) {\n  loader.start('Installing dependencies');\n  await PackageManager.installAll({\n    preferYarn: !npm,\n    silent: true,\n    root\n  });\n\n  if (process.platform === 'darwin') {\n    await (0, _installPods.default)({\n      projectName,\n      loader\n    });\n  }\n\n  loader.succeed();\n}\n\nasync function createProject(projectName, directory, version, options) {\n  const templateName = options.template || `react-native@${version}`;\n  return createFromTemplate({\n    projectName,\n    templateName,\n    npm: options.npm,\n    directory,\n    projectTitle: options.title,\n    skipInstall: options.skipInstall\n  });\n}\n\nvar initialize = async function initialize([projectName], options) {\n  const root = process.cwd();\n  (0, _validate.validateProjectName)(projectName);\n  /**\n   * Commander is stripping `version` from options automatically.\n   * We have to use `minimist` to take that directly from `process.argv`\n   */\n\n  const version = (0, _minimist().default)(process.argv).version || DEFAULT_VERSION;\n\n  const directoryName = _path().default.relative(root, options.directory || projectName);\n\n  try {\n    await createProject(projectName, directoryName, version, options);\n\n    const projectFolder = _path().default.join(root, directoryName);\n\n    (0, _printRunInstructions.default)(projectFolder, projectName);\n  } catch (e) {\n    _cliTools().logger.error(e.message);\n  }\n};\n\nexports.default = initialize;\n\n//# sourceMappingURL=init.js.map"]},"metadata":{},"sourceType":"script"}