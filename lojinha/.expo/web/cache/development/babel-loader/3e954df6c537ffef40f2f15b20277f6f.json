{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"@babel/runtime/helpers/inherits\");\n\nvar _possibleConstructorReturn = require(\"@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"@babel/runtime/helpers/getPrototypeOf\");\n\nvar _jsxFileName = \"/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/react-native/RNTester/js/examples/WebSocket/WebSocketExample.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar React = require('react');\n\nvar Image = require(\"react-native-web/dist/exports/Image\").default;\n\nvar PixelRatio = require(\"react-native-web/dist/exports/PixelRatio\").default;\n\nvar ScrollView = require(\"react-native-web/dist/exports/ScrollView\").default;\n\nvar StyleSheet = require(\"react-native-web/dist/exports/StyleSheet\").default;\n\nvar Text = require(\"react-native-web/dist/exports/Text\").default;\n\nvar TextInput = require(\"react-native-web/dist/exports/TextInput\").default;\n\nvar TouchableOpacity = require(\"react-native-web/dist/exports/TouchableOpacity\").default;\n\nvar View = require(\"react-native-web/dist/exports/View\").default;\n\nvar DEFAULT_WS_URL = 'ws://localhost:5555/';\nvar DEFAULT_HTTP_URL = 'http://localhost:5556/';\nvar WS_EVENTS = ['close', 'error', 'message', 'open'];\nvar WS_STATES = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\n\nvar Button = function (_React$Component) {\n  _inherits(Button, _React$Component);\n\n  var _super = _createSuper(Button);\n\n  function Button() {\n    _classCallCheck(this, Button);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Button, [{\n    key: \"render\",\n    value: function render() {\n      var label = React.createElement(Text, {\n        style: styles.buttonLabel,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 19\n        }\n      }, this.props.label);\n\n      if (this.props.disabled) {\n        return React.createElement(View, {\n          style: [styles.button, styles.disabledButton],\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 9\n          }\n        }, label);\n      }\n\n      return React.createElement(TouchableOpacity, {\n        onPress: this.props.onPress,\n        style: styles.button,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 7\n        }\n      }, label);\n    }\n  }]);\n\n  return Button;\n}(React.Component);\n\nvar Row = function (_React$Component2) {\n  _inherits(Row, _React$Component2);\n\n  var _super2 = _createSuper(Row);\n\n  function Row() {\n    _classCallCheck(this, Row);\n\n    return _super2.apply(this, arguments);\n  }\n\n  _createClass(Row, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: styles.row,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 9\n        }\n      }, this.props.label), this.props.value ? React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 29\n        }\n      }, this.props.value) : null, this.props.children);\n    }\n  }]);\n\n  return Row;\n}(React.Component);\n\nvar WebSocketImage = function (_React$Component3) {\n  _inherits(WebSocketImage, _React$Component3);\n\n  var _super3 = _createSuper(WebSocketImage);\n\n  function WebSocketImage() {\n    var _this;\n\n    _classCallCheck(this, WebSocketImage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super3.call.apply(_super3, [this].concat(args));\n    _this.ws = null;\n    _this.state = {\n      blob: null\n    };\n    return _this;\n  }\n\n  _createClass(WebSocketImage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var ws = this.ws = new WebSocket(this.props.url);\n      ws.binaryType = 'blob';\n\n      ws.onmessage = function (event) {\n        if (event.data instanceof Blob) {\n          var blob = event.data;\n\n          if (_this2.state.blob) {\n            _this2.state.blob.close();\n          }\n\n          _this2.setState({\n            blob: blob\n          });\n        }\n      };\n\n      ws.onopen = function (event) {\n        ws.send('getImage');\n      };\n    }\n  }, {\n    key: \"componentUnmount\",\n    value: function componentUnmount() {\n      if (this.state.blob) {\n        this.state.blob.close();\n      }\n\n      this.ws && this.ws.close();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (!this.state.blob) {\n        return React.createElement(View, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 14\n          }\n        });\n      }\n\n      return React.createElement(Image, {\n        source: {\n          uri: URL.createObjectURL(this.state.blob)\n        },\n        style: {\n          width: 50,\n          height: 50\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 7\n        }\n      });\n    }\n  }]);\n\n  return WebSocketImage;\n}(React.Component);\n\nfunction showValue(value) {\n  if (value === undefined || value === null) {\n    return '(no value)';\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && typeof Uint8Array !== 'undefined' && value instanceof ArrayBuffer) {\n    return \"ArrayBuffer {\" + String(Array.from(new Uint8Array(value))) + \"}\";\n  }\n\n  return value;\n}\n\nvar WebSocketExample = function (_React$Component4) {\n  _inherits(WebSocketExample, _React$Component4);\n\n  var _super4 = _createSuper(WebSocketExample);\n\n  function WebSocketExample() {\n    var _this3;\n\n    _classCallCheck(this, WebSocketExample);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    _this3 = _super4.call.apply(_super4, [this].concat(args));\n    _this3.state = {\n      url: DEFAULT_WS_URL,\n      httpUrl: DEFAULT_HTTP_URL,\n      fetchStatus: null,\n      socket: null,\n      socketState: null,\n      lastSocketEvent: null,\n      lastMessage: null,\n      outgoingMessage: ''\n    };\n\n    _this3._connect = function () {\n      var socket = new WebSocket(_this3.state.url);\n      WS_EVENTS.forEach(function (ev) {\n        return socket.addEventListener(ev, _this3._onSocketEvent);\n      });\n\n      _this3.setState({\n        socket: socket,\n        socketState: socket.readyState\n      });\n    };\n\n    _this3._disconnect = function () {\n      if (!_this3.state.socket) {\n        return;\n      }\n\n      _this3.state.socket.close();\n    };\n\n    _this3._onSocketEvent = function (event) {\n      var state = {\n        socketState: event.target.readyState,\n        lastSocketEvent: event.type\n      };\n\n      if (event.type === 'message') {\n        state.lastMessage = event.data;\n      }\n\n      _this3.setState(state);\n    };\n\n    _this3._sendText = function () {\n      if (!_this3.state.socket) {\n        return;\n      }\n\n      _this3.state.socket.send(_this3.state.outgoingMessage);\n\n      _this3.setState({\n        outgoingMessage: ''\n      });\n    };\n\n    _this3._sendHttp = function () {\n      _this3.setState({\n        fetchStatus: 'fetching'\n      });\n\n      fetch(_this3.state.httpUrl).then(function (response) {\n        if (response.status >= 200 && response.status < 400) {\n          _this3.setState({\n            fetchStatus: 'OK'\n          });\n        }\n      });\n    };\n\n    _this3._sendBinary = function () {\n      if (!_this3.state.socket || typeof ArrayBuffer === 'undefined' || typeof Uint8Array === 'undefined') {\n        return;\n      }\n\n      var outgoingMessage = _this3.state.outgoingMessage;\n      var buffer = new Uint8Array(outgoingMessage.length);\n\n      for (var i = 0; i < outgoingMessage.length; i++) {\n        buffer[i] = outgoingMessage.charCodeAt(i);\n      }\n\n      _this3.state.socket.send(buffer);\n\n      _this3.setState({\n        outgoingMessage: ''\n      });\n    };\n\n    return _this3;\n  }\n\n  _createClass(WebSocketExample, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var socketState = WS_STATES[this.state.socketState || -1];\n      var canConnect = !this.state.socket || this.state.socket.readyState >= WebSocket.CLOSING;\n      var canSend = socketState === 'OPEN';\n      return React.createElement(ScrollView, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: styles.note,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }\n      }, \"To start the WS test server:\"), React.createElement(Text, {\n        style: styles.monospace,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }\n      }, \"./RNTester/js/examples/WebSocket/websocket_test_server.js\")), React.createElement(Row, {\n        label: \"Current WebSocket state\",\n        value: showValue(socketState),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 9\n        }\n      }), React.createElement(Row, {\n        label: \"Last WebSocket event\",\n        value: showValue(this.state.lastSocketEvent),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 9\n        }\n      }), React.createElement(Row, {\n        label: \"Last message received\",\n        value: showValue(this.state.lastMessage),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 9\n        }\n      }), React.createElement(Row, {\n        label: \"Last image received\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 9\n        }\n      }, canSend ? React.createElement(WebSocketImage, {\n        url: this.state.url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 22\n        }\n      }) : null), React.createElement(TextInput, {\n        style: styles.textInput,\n        autoCorrect: false,\n        placeholder: \"Server URL...\",\n        onChangeText: function onChangeText(url) {\n          return _this4.setState({\n            url: url\n          });\n        },\n        value: this.state.url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: styles.buttonRow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 9\n        }\n      }, React.createElement(Button, {\n        onPress: this._connect,\n        label: \"Connect\",\n        disabled: !canConnect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }\n      }), React.createElement(Button, {\n        onPress: this._disconnect,\n        label: \"Disconnect\",\n        disabled: canConnect,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }\n      })), React.createElement(TextInput, {\n        style: styles.textInput,\n        autoCorrect: false,\n        placeholder: \"Type message here...\",\n        onChangeText: function onChangeText(outgoingMessage) {\n          return _this4.setState({\n            outgoingMessage: outgoingMessage\n          });\n        },\n        value: this.state.outgoingMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: styles.buttonRow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 9\n        }\n      }, React.createElement(Button, {\n        onPress: this._sendText,\n        label: \"Send as text\",\n        disabled: !canSend,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }\n      }), React.createElement(Button, {\n        onPress: this._sendBinary,\n        label: \"Send as binary\",\n        disabled: !canSend,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: styles.note,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }\n      }, \"To start the HTTP test server:\"), React.createElement(Text, {\n        style: styles.monospace,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }\n      }, \"./RNTester/js/examples/WebSocket/http_test_server.js\")), React.createElement(TextInput, {\n        style: styles.textInput,\n        autoCorrect: false,\n        placeholder: \"HTTP URL...\",\n        onChangeText: function onChangeText(httpUrl) {\n          return _this4.setState({\n            httpUrl: httpUrl\n          });\n        },\n        value: this.state.httpUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: styles.buttonRow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 9\n        }\n      }, React.createElement(Button, {\n        onPress: this._sendHttp,\n        label: \"Send HTTP request to set cookie\",\n        disabled: this.state.fetchStatus === 'fetching',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }\n      })), React.createElement(View, {\n        style: styles.note,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }\n      }, this.state.fetchStatus === 'OK' ? 'Done. Check your WS server console to see if the next WS requests include the cookie (should be \"wstest=OK\")' : '-')));\n    }\n  }]);\n\n  return WebSocketExample;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  note: {\n    padding: 8,\n    margin: 4,\n    backgroundColor: 'white'\n  },\n  monospace: {\n    fontFamily: 'courier',\n    fontSize: 11\n  },\n  row: {\n    height: 40,\n    padding: 4,\n    backgroundColor: 'white',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderBottomWidth: 1 / PixelRatio.get(),\n    borderColor: 'grey'\n  },\n  button: {\n    margin: 8,\n    padding: 8,\n    borderRadius: 4,\n    backgroundColor: 'blue',\n    alignSelf: 'center'\n  },\n  disabledButton: {\n    opacity: 0.5\n  },\n  buttonLabel: {\n    color: 'white'\n  },\n  buttonRow: {\n    flexDirection: 'row',\n    justifyContent: 'center'\n  },\n  textInput: {\n    height: 40,\n    backgroundColor: 'white',\n    margin: 8,\n    padding: 8\n  }\n});\nexports.title = 'WebSocket';\nexports.description = 'WebSocket API';\nexports.examples = [{\n  title: 'Basic websocket',\n  render: function render() {\n    return React.createElement(WebSocketExample, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 14\n      }\n    });\n  }\n}];","map":{"version":3,"sources":["/home/chamoouske/Aulas/ReactNative/RandomWord/node_modules/react-native/RNTester/js/examples/WebSocket/WebSocketExample.js"],"names":["React","require","DEFAULT_WS_URL","DEFAULT_HTTP_URL","WS_EVENTS","WS_STATES","Button","label","styles","buttonLabel","props","disabled","button","disabledButton","onPress","Component","Row","row","value","children","WebSocketImage","ws","state","blob","WebSocket","url","binaryType","onmessage","event","data","Blob","close","setState","onopen","send","uri","URL","createObjectURL","width","height","showValue","undefined","ArrayBuffer","Uint8Array","String","Array","from","WebSocketExample","httpUrl","fetchStatus","socket","socketState","lastSocketEvent","lastMessage","outgoingMessage","_connect","forEach","ev","addEventListener","_onSocketEvent","readyState","_disconnect","target","type","_sendText","_sendHttp","fetch","then","response","status","_sendBinary","buffer","length","i","charCodeAt","canConnect","CLOSING","canSend","container","note","monospace","textInput","buttonRow","StyleSheet","create","flex","padding","margin","backgroundColor","fontFamily","fontSize","flexDirection","justifyContent","alignItems","borderBottomWidth","PixelRatio","get","borderColor","borderRadius","alignSelf","opacity","color","exports","title","description","examples","render"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n */\n\n'use strict';\n\n/* eslint-env browser */\n\nconst React = require('react');\nconst {\n  Image,\n  PixelRatio,\n  ScrollView,\n  StyleSheet,\n  Text,\n  TextInput,\n  TouchableOpacity,\n  View,\n} = require('react-native');\n\nconst DEFAULT_WS_URL = 'ws://localhost:5555/';\nconst DEFAULT_HTTP_URL = 'http://localhost:5556/';\nconst WS_EVENTS = ['close', 'error', 'message', 'open'];\nconst WS_STATES = [\n  /* 0 */ 'CONNECTING',\n  /* 1 */ 'OPEN',\n  /* 2 */ 'CLOSING',\n  /* 3 */ 'CLOSED',\n];\n\nclass Button extends React.Component {\n  render(): React.Element<any> {\n    const label = <Text style={styles.buttonLabel}>{this.props.label}</Text>;\n    if (this.props.disabled) {\n      return (\n        <View style={[styles.button, styles.disabledButton]}>{label}</View>\n      );\n    }\n    return (\n      <TouchableOpacity onPress={this.props.onPress} style={styles.button}>\n        {label}\n      </TouchableOpacity>\n    );\n  }\n}\n\nclass Row extends React.Component {\n  render(): React.Element<any> {\n    return (\n      <View style={styles.row}>\n        <Text>{this.props.label}</Text>\n        {this.props.value ? <Text>{this.props.value}</Text> : null}\n        {this.props.children}\n      </View>\n    );\n  }\n}\n\nclass WebSocketImage extends React.Component {\n  ws: ?WebSocket = null;\n  state: {blob: ?Blob} = {blob: null};\n  componentDidMount() {\n    let ws = (this.ws = new WebSocket(this.props.url));\n    ws.binaryType = 'blob';\n    ws.onmessage = event => {\n      if (event.data instanceof Blob) {\n        const blob = event.data;\n        if (this.state.blob) {\n          this.state.blob.close();\n        }\n        this.setState({blob});\n      }\n    };\n    ws.onopen = event => {\n      ws.send('getImage');\n    };\n  }\n  componentUnmount() {\n    if (this.state.blob) {\n      this.state.blob.close();\n    }\n    this.ws && this.ws.close();\n  }\n  render() {\n    if (!this.state.blob) {\n      return <View />;\n    }\n    return (\n      <Image\n        source={{uri: URL.createObjectURL(this.state.blob)}}\n        style={{width: 50, height: 50}}\n      />\n    );\n  }\n}\n\nfunction showValue(value) {\n  if (value === undefined || value === null) {\n    return '(no value)';\n  }\n  if (\n    typeof ArrayBuffer !== 'undefined' &&\n    typeof Uint8Array !== 'undefined' &&\n    value instanceof ArrayBuffer\n  ) {\n    return `ArrayBuffer {${String(Array.from(new Uint8Array(value)))}}`;\n  }\n  return value;\n}\n\ntype State = {\n  url: string,\n  httpUrl: string,\n  fetchStatus: ?string,\n  socket: ?WebSocket,\n  socketState: ?number,\n  lastSocketEvent: ?string,\n  lastMessage: ?string | ?ArrayBuffer,\n  outgoingMessage: string,\n};\n\nclass WebSocketExample extends React.Component<any, any, State> {\n  state: State = {\n    url: DEFAULT_WS_URL,\n    httpUrl: DEFAULT_HTTP_URL,\n    fetchStatus: null,\n    socket: null,\n    socketState: null,\n    lastSocketEvent: null,\n    lastMessage: null,\n    outgoingMessage: '',\n  };\n\n  _connect = () => {\n    const socket = new WebSocket(this.state.url);\n    WS_EVENTS.forEach(ev => socket.addEventListener(ev, this._onSocketEvent));\n    this.setState({\n      socket,\n      socketState: socket.readyState,\n    });\n  };\n\n  _disconnect = () => {\n    if (!this.state.socket) {\n      return;\n    }\n    this.state.socket.close();\n  };\n\n  _onSocketEvent = (event: MessageEvent) => {\n    const state: any = {\n      socketState: event.target.readyState,\n      lastSocketEvent: event.type,\n    };\n    if (event.type === 'message') {\n      state.lastMessage = event.data;\n    }\n    this.setState(state);\n  };\n\n  _sendText = () => {\n    if (!this.state.socket) {\n      return;\n    }\n    this.state.socket.send(this.state.outgoingMessage);\n    this.setState({outgoingMessage: ''});\n  };\n\n  _sendHttp = () => {\n    this.setState({\n      fetchStatus: 'fetching',\n    });\n    fetch(this.state.httpUrl).then(response => {\n      if (response.status >= 200 && response.status < 400) {\n        this.setState({\n          fetchStatus: 'OK',\n        });\n      }\n    });\n  };\n\n  _sendBinary = () => {\n    if (\n      !this.state.socket ||\n      typeof ArrayBuffer === 'undefined' ||\n      typeof Uint8Array === 'undefined'\n    ) {\n      return;\n    }\n    const {outgoingMessage} = this.state;\n    const buffer = new Uint8Array(outgoingMessage.length);\n    for (let i = 0; i < outgoingMessage.length; i++) {\n      buffer[i] = outgoingMessage.charCodeAt(i);\n    }\n    this.state.socket.send(buffer);\n    this.setState({outgoingMessage: ''});\n  };\n\n  render(): React.Element<any> {\n    const socketState = WS_STATES[this.state.socketState || -1];\n    const canConnect =\n      !this.state.socket || this.state.socket.readyState >= WebSocket.CLOSING;\n    const canSend = socketState === 'OPEN';\n    return (\n      <ScrollView style={styles.container}>\n        <View style={styles.note}>\n          <Text>To start the WS test server:</Text>\n          <Text style={styles.monospace}>\n            ./RNTester/js/examples/WebSocket/websocket_test_server.js\n          </Text>\n        </View>\n        <Row label=\"Current WebSocket state\" value={showValue(socketState)} />\n        <Row\n          label=\"Last WebSocket event\"\n          value={showValue(this.state.lastSocketEvent)}\n        />\n        <Row\n          label=\"Last message received\"\n          value={showValue(this.state.lastMessage)}\n        />\n        <Row label=\"Last image received\">\n          {canSend ? <WebSocketImage url={this.state.url} /> : null}\n        </Row>\n        <TextInput\n          style={styles.textInput}\n          autoCorrect={false}\n          placeholder=\"Server URL...\"\n          onChangeText={url => this.setState({url})}\n          value={this.state.url}\n        />\n        <View style={styles.buttonRow}>\n          <Button\n            onPress={this._connect}\n            label=\"Connect\"\n            disabled={!canConnect}\n          />\n          <Button\n            onPress={this._disconnect}\n            label=\"Disconnect\"\n            disabled={canConnect}\n          />\n        </View>\n        <TextInput\n          style={styles.textInput}\n          autoCorrect={false}\n          placeholder=\"Type message here...\"\n          onChangeText={outgoingMessage => this.setState({outgoingMessage})}\n          value={this.state.outgoingMessage}\n        />\n        <View style={styles.buttonRow}>\n          <Button\n            onPress={this._sendText}\n            label=\"Send as text\"\n            disabled={!canSend}\n          />\n          <Button\n            onPress={this._sendBinary}\n            label=\"Send as binary\"\n            disabled={!canSend}\n          />\n        </View>\n        <View style={styles.note}>\n          <Text>To start the HTTP test server:</Text>\n          <Text style={styles.monospace}>\n            ./RNTester/js/examples/WebSocket/http_test_server.js\n          </Text>\n        </View>\n        <TextInput\n          style={styles.textInput}\n          autoCorrect={false}\n          placeholder=\"HTTP URL...\"\n          onChangeText={httpUrl => this.setState({httpUrl})}\n          value={this.state.httpUrl}\n        />\n        <View style={styles.buttonRow}>\n          <Button\n            onPress={this._sendHttp}\n            label=\"Send HTTP request to set cookie\"\n            disabled={this.state.fetchStatus === 'fetching'}\n          />\n        </View>\n        <View style={styles.note}>\n          <Text>\n            {this.state.fetchStatus === 'OK'\n              ? 'Done. Check your WS server console to see if the next WS requests include the cookie (should be \"wstest=OK\")'\n              : '-'}\n          </Text>\n        </View>\n      </ScrollView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  note: {\n    padding: 8,\n    margin: 4,\n    backgroundColor: 'white',\n  },\n  monospace: {\n    fontFamily: 'courier',\n    fontSize: 11,\n  },\n  row: {\n    height: 40,\n    padding: 4,\n    backgroundColor: 'white',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderBottomWidth: 1 / PixelRatio.get(),\n    borderColor: 'grey',\n  },\n  button: {\n    margin: 8,\n    padding: 8,\n    borderRadius: 4,\n    backgroundColor: 'blue',\n    alignSelf: 'center',\n  },\n  disabledButton: {\n    opacity: 0.5,\n  },\n  buttonLabel: {\n    color: 'white',\n  },\n  buttonRow: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  textInput: {\n    height: 40,\n    backgroundColor: 'white',\n    margin: 8,\n    padding: 8,\n  },\n});\n\nexports.title = 'WebSocket';\nexports.description = 'WebSocket API';\nexports.examples = [\n  {\n    title: 'Basic websocket',\n    render(): React.Element<typeof WebSocketExample> {\n      return <WebSocketExample />;\n    },\n  },\n];\n"]},"metadata":{},"sourceType":"script"}