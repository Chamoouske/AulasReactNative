{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar android_plugins_1 = require(\"../plugins/android-plugins\");\n\nvar Manifest_1 = require(\"./Manifest\");\n\nvar META_BRANCH_KEY = 'io.branch.sdk.BranchKey';\nexports.withBranch = android_plugins_1.createAndroidManifestPlugin(setBranchApiKey, 'withBranch');\n\nfunction getBranchApiKey(config) {\n  var _a, _b, _c, _d;\n\n  return (_d = (_c = (_b = (_a = config.android) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.branch) === null || _c === void 0 ? void 0 : _c.apiKey) !== null && _d !== void 0 ? _d : null;\n}\n\nexports.getBranchApiKey = getBranchApiKey;\n\nfunction setBranchApiKey(config, androidManifest) {\n  var apiKey = getBranchApiKey(config);\n  var mainApplication = Manifest_1.getMainApplicationOrThrow(androidManifest);\n\n  if (apiKey) {\n    Manifest_1.addMetaDataItemToMainApplication(mainApplication, META_BRANCH_KEY, apiKey);\n  } else {\n    Manifest_1.removeMetaDataItemFromMainApplication(mainApplication, META_BRANCH_KEY);\n  }\n\n  return androidManifest;\n}\n\nexports.setBranchApiKey = setBranchApiKey;","map":{"version":3,"sources":["../../src/android/Branch.ts"],"names":[],"mappings":";;;;;;AAEA,IAAA,iBAAA,GAAA,OAAA,8BAAA;;AACA,IAAA,UAAA,GAAA,OAAA,cAAA;;AAOA,IAAM,eAAe,GAAG,yBAAxB;AAEa,OAAA,CAAA,UAAA,GAAa,iBAAA,CAAA,2BAAA,CAA4B,eAA5B,EAA6C,YAA7C,CAAb;;AAEb,SAAgB,eAAhB,CAAgC,MAAhC,EAAkD;;;AAChD,SAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAO,MAAM,CAAC,OAAd,MAAqB,IAArB,IAAqB,EAAA,KAAA,KAAA,CAArB,GAAqB,KAAA,CAArB,GAAqB,EAAA,CAAE,MAAvB,MAA6B,IAA7B,IAA6B,EAAA,KAAA,KAAA,CAA7B,GAA6B,KAAA,CAA7B,GAA6B,EAAA,CAAE,MAA/B,MAAqC,IAArC,IAAqC,EAAA,KAAA,KAAA,CAArC,GAAqC,KAAA,CAArC,GAAqC,EAAA,CAAE,MAAvC,MAA6C,IAA7C,IAA6C,EAAA,KAAA,KAAA,CAA7C,GAA6C,EAA7C,GAAiD,IAAjD;AACD;;AAFD,OAAA,CAAA,eAAA,GAAA,eAAA;;AAIA,SAAgB,eAAhB,CAAgC,MAAhC,EAAoD,eAApD,EAAoF;AAClF,MAAM,MAAM,GAAG,eAAe,CAAC,MAAD,CAA9B;AAEA,MAAM,eAAe,GAAG,UAAA,CAAA,yBAAA,CAA0B,eAA1B,CAAxB;;AAEA,MAAI,MAAJ,EAAY;AAEV,IAAA,UAAA,CAAA,gCAAA,CAAiC,eAAjC,EAAkD,eAAlD,EAAmE,MAAnE;AACD,GAHD,MAGO;AAEL,IAAA,UAAA,CAAA,qCAAA,CAAsC,eAAtC,EAAuD,eAAvD;AACD;;AACD,SAAO,eAAP;AACD;;AAbD,OAAA,CAAA,eAAA,GAAA,eAAA","sourcesContent":["import { ExpoConfig } from '@expo/config-types';\n\nimport { createAndroidManifestPlugin } from '../plugins/android-plugins';\nimport {\n  addMetaDataItemToMainApplication,\n  AndroidManifest,\n  getMainApplicationOrThrow,\n  removeMetaDataItemFromMainApplication,\n} from './Manifest';\n\nconst META_BRANCH_KEY = 'io.branch.sdk.BranchKey';\n\nexport const withBranch = createAndroidManifestPlugin(setBranchApiKey, 'withBranch');\n\nexport function getBranchApiKey(config: ExpoConfig) {\n  return config.android?.config?.branch?.apiKey ?? null;\n}\n\nexport function setBranchApiKey(config: ExpoConfig, androidManifest: AndroidManifest) {\n  const apiKey = getBranchApiKey(config);\n\n  const mainApplication = getMainApplicationOrThrow(androidManifest);\n\n  if (apiKey) {\n    // If the item exists, add it back\n    addMetaDataItemToMainApplication(mainApplication, META_BRANCH_KEY, apiKey);\n  } else {\n    // Remove any existing item\n    removeMetaDataItemFromMainApplication(mainApplication, META_BRANCH_KEY);\n  }\n  return androidManifest;\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}