{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Paths_1 = require(\"./Paths\");\n\nvar Resources_1 = require(\"./Resources\");\n\nfunction getProjectStylesXMLPathAsync(projectRoot) {\n  var _ref,\n      kind,\n      _args = arguments;\n\n  return _regeneratorRuntime.async(function getProjectStylesXMLPathAsync$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _ref = _args.length > 1 && _args[1] !== undefined ? _args[1] : {}, kind = _ref.kind;\n          return _context.abrupt(\"return\", Paths_1.getResourceXMLPathAsync(projectRoot, {\n            kind: kind,\n            name: 'styles'\n          }));\n\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nexports.getProjectStylesXMLPathAsync = getProjectStylesXMLPathAsync;\n\nfunction ensureDefaultStyleResourceXML(xml) {\n  var _a;\n\n  xml = Resources_1.ensureDefaultResourceXML(xml);\n\n  if (!Array.isArray((_a = xml === null || xml === void 0 ? void 0 : xml.resources) === null || _a === void 0 ? void 0 : _a.style)) {\n    xml.resources.style = [];\n  }\n\n  return xml;\n}\n\nfunction getStyleParent(xml, parent) {\n  var _a, _b, _c, _d;\n\n  var app = (_d = (_c = (_b = (_a = xml === null || xml === void 0 ? void 0 : xml.resources) === null || _a === void 0 ? void 0 : _a.style) === null || _b === void 0 ? void 0 : _b.filter) === null || _c === void 0 ? void 0 : _c.call(_b, function (e) {\n    var matches = e.$.name === parent.name;\n\n    if (parent.parent != null && matches) {\n      matches = e.$.parent === parent.parent;\n    }\n\n    return matches;\n  })) === null || _d === void 0 ? void 0 : _d[0];\n  return app !== null && app !== void 0 ? app : null;\n}\n\nexports.getStyleParent = getStyleParent;\n\nfunction getStylesItem(_ref2) {\n  var name = _ref2.name,\n      xml = _ref2.xml,\n      parent = _ref2.parent;\n  xml = ensureDefaultStyleResourceXML(xml);\n  var appTheme = getStyleParent(xml, parent);\n\n  if (!appTheme) {\n    return null;\n  }\n\n  if (appTheme.item) {\n    var existingItem = appTheme.item.filter(function (_item) {\n      return _item.$.name === name;\n    })[0];\n\n    if (existingItem) {\n      return existingItem;\n    }\n  }\n\n  return null;\n}\n\nexports.getStylesItem = getStylesItem;\n\nfunction setStylesItem(_ref3) {\n  var item = _ref3.item,\n      xml = _ref3.xml,\n      parent = _ref3.parent;\n  xml = ensureDefaultStyleResourceXML(xml);\n  var appTheme = getStyleParent(xml, parent);\n\n  if (!appTheme) {\n    appTheme = Resources_1.buildResourceGroup(parent);\n    xml.resources.style.push(appTheme);\n  }\n\n  if (appTheme.item) {\n    var existingItem = appTheme.item.filter(function (_item) {\n      return _item.$.name === item.$.name;\n    })[0];\n\n    if (existingItem) {\n      existingItem._ = item._;\n    } else {\n      appTheme.item.push(item);\n    }\n  } else {\n    appTheme.item = [item];\n  }\n\n  return xml;\n}\n\nexports.setStylesItem = setStylesItem;\n\nfunction removeStylesItem(_ref4) {\n  var name = _ref4.name,\n      xml = _ref4.xml,\n      parent = _ref4.parent;\n  xml = ensureDefaultStyleResourceXML(xml);\n  var appTheme = getStyleParent(xml, parent);\n\n  if (appTheme === null || appTheme === void 0 ? void 0 : appTheme.item) {\n    var index = appTheme.item.findIndex(function (e) {\n      return e.$.name === name;\n    });\n\n    if (index > -1) {\n      appTheme.item.splice(index, 1);\n    }\n  }\n\n  return xml;\n}\n\nexports.removeStylesItem = removeStylesItem;","map":{"version":3,"sources":["../../src/android/Styles.ts"],"names":[],"mappings":"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","sourcesContent":["import { getResourceXMLPathAsync } from './Paths';\nimport {\n  buildResourceGroup,\n  ensureDefaultResourceXML,\n  ResourceGroupXML,\n  ResourceItemXML,\n  ResourceKind,\n  ResourceXML,\n} from './Resources';\n\nexport async function getProjectStylesXMLPathAsync(\n  projectRoot: string,\n  { kind }: { kind?: ResourceKind } = {}\n): Promise<string> {\n  return getResourceXMLPathAsync(projectRoot, { kind, name: 'styles' });\n}\n\nfunction ensureDefaultStyleResourceXML(xml: ResourceXML): ResourceXML {\n  xml = ensureDefaultResourceXML(xml);\n  if (!Array.isArray(xml?.resources?.style)) {\n    xml.resources.style = [];\n  }\n  return xml;\n}\n\nexport function getStyleParent(\n  xml: ResourceXML,\n  parent: { name: string; parent?: string }\n): ResourceGroupXML | null {\n  const app = xml?.resources?.style?.filter?.((e: any) => {\n    let matches = e.$.name === parent.name;\n    if (parent.parent != null && matches) {\n      matches = e.$.parent === parent.parent;\n    }\n    return matches;\n  })?.[0];\n  return app ?? null;\n}\n\nexport function getStylesItem({\n  name,\n  xml,\n  parent,\n}: {\n  name: string;\n  xml: ResourceXML;\n  parent: { name: string; parent: string };\n}): ResourceItemXML | null {\n  xml = ensureDefaultStyleResourceXML(xml);\n\n  const appTheme = getStyleParent(xml, parent);\n\n  if (!appTheme) {\n    return null;\n  }\n\n  if (appTheme.item) {\n    const existingItem = appTheme.item.filter(_item => _item.$.name === name)[0];\n\n    // Don't want to 2 of the same item, so if one exists, we overwrite it\n    if (existingItem) {\n      return existingItem;\n    }\n  }\n  return null;\n}\n\nexport function setStylesItem({\n  item,\n  xml,\n  parent,\n}: {\n  item: ResourceItemXML;\n  xml: ResourceXML;\n  parent: { name: string; parent: string };\n}): ResourceXML {\n  xml = ensureDefaultStyleResourceXML(xml);\n\n  let appTheme = getStyleParent(xml, parent);\n\n  if (!appTheme) {\n    appTheme = buildResourceGroup(parent);\n    xml.resources!.style!.push(appTheme);\n  }\n\n  if (appTheme.item) {\n    const existingItem = appTheme.item.filter(_item => _item.$.name === item.$.name)[0];\n\n    // Don't want to 2 of the same item, so if one exists, we overwrite it\n    if (existingItem) {\n      existingItem._ = item._;\n    } else {\n      appTheme.item.push(item);\n    }\n  } else {\n    appTheme.item = [item];\n  }\n  return xml;\n}\n\nexport function removeStylesItem({\n  name,\n  xml,\n  parent,\n}: {\n  name: string;\n  xml: ResourceXML;\n  parent: { name: string; parent: string };\n}): ResourceXML {\n  xml = ensureDefaultStyleResourceXML(xml);\n  const appTheme = getStyleParent(xml, parent);\n  if (appTheme?.item) {\n    const index = appTheme.item.findIndex((e: ResourceItemXML) => e.$.name === name);\n    if (index > -1) {\n      appTheme.item.splice(index, 1);\n    }\n  }\n  return xml;\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}